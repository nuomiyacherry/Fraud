{"remainingRequest":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js!D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\工作项目\\部反诈\\src\\utils\\tableScroll.js","dependencies":[{"path":"D:\\工作项目\\部反诈\\src\\utils\\tableScroll.js","mtime":1598758375153},{"path":"D:\\工作项目\\部反诈\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport \"regenerator-runtime/runtime\";\nimport _parseFloat from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-float\";\nimport _Object$assign from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport _typeof from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\nimport _classCallCheck from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _asyncToGenerator from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport { requestAnimationFrame, on, off } from 'utils/dom';\nimport { sleep } from 'utils/util'; // 用于el-table的滚动，需要放在table中的数据再页面中渲染完后执行\n\nexport function elTableScroll(_x, _x2) {\n  return _elTableScroll.apply(this, arguments);\n}\n\nfunction _elTableScroll() {\n  _elTableScroll = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee2(ref, options) {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return sleep(30);\n\n          case 2:\n            return _context2.abrupt(\"return\", new _Promise(\n            /*#__PURE__*/\n            function () {\n              var _ref = _asyncToGenerator(\n              /*#__PURE__*/\n              regeneratorRuntime.mark(function _callee(resolve, reject) {\n                var el, tableScroll;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        el = ref.$children[ref.$children.length - 1].$el.parentNode;\n\n                        if (!(el.scrollHeight - el.clientHeight === 0)) {\n                          _context.next = 3;\n                          break;\n                        }\n\n                        return _context.abrupt(\"return\");\n\n                      case 3:\n                        tableScroll = new TableScroll(el, options);\n                        tableScroll.run();\n                        resolve(tableScroll);\n\n                      case 6:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x3, _x4) {\n                return _ref.apply(this, arguments);\n              };\n            }()));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _elTableScroll.apply(this, arguments);\n}\n\nvar TableScroll =\n/*#__PURE__*/\nfunction () {\n  function TableScroll(el, options) {\n    _classCallCheck(this, TableScroll);\n\n    this.el = el;\n    this.options = {\n      step: 0.3,\n      duration: 25,\n      useType: 'step'\n    };\n\n    if (_typeof(options) === 'object') {\n      _Object$assign(this.options, options);\n    } else {\n      this.duration = options;\n    } // this.duration = duration\n    // this.step = step\n\n\n    this.timer = null;\n  }\n\n  _createClass(TableScroll, [{\n    key: \"run\",\n    value: function run() {\n      this.scrollBottom(this.el);\n      this.watchScrollState();\n    }\n  }, {\n    key: \"watchScrollState\",\n    value: function watchScrollState() {\n      on(this.el, 'mouseover', this.stop.bind(this));\n      on(this.el, 'mouseout', this.regain.bind(this));\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      clearTimeout(this.timer);\n      this.setAttr(this.el, 'data-scroll', 'no');\n    } // 恢复滚动\n\n  }, {\n    key: \"regain\",\n    value: function regain() {\n      var _this = this;\n\n      this.timer = setTimeout(function (_) {\n        _this.setAttr(_this.el, 'data-scroll', 'yes');\n\n        if (_this.el.getAttribute('data-scroll-dir') === 'bottom') {\n          _this.scrollBottom(_this.el, _this.el.scrollTop);\n        } else {\n          _this.scrollTop(_this.el);\n        }\n      }, 1000);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.el.setAttribute('data-scroll', 'no');\n      off(this.el, 'mouseouver', this.stop);\n      off(this.el, 'mouseout', this.regain);\n    }\n  }, {\n    key: \"setAttr\",\n    value: function setAttr(el, key, value) {\n      if (el.getAttribute(key) !== value) {\n        el.setAttribute(key, value);\n      }\n    }\n  }, {\n    key: \"scrollBottom\",\n    value: function scrollBottom(el) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var end = arguments.length > 2 ? arguments[2] : undefined;\n      end = end || el.scrollHeight - el.clientHeight;\n      var difference = Math.abs(start - end);\n\n      var _step;\n\n      if (this.duration) {\n        _step = _parseFloat((difference / this.duration * 50 / 10000).toFixed(4));\n      } else {\n        var _this$options = this.options,\n            duration = _this$options.duration,\n            step = _this$options.step,\n            useType = _this$options.useType;\n        _step = useType === 'step' ? step : _parseFloat((difference / duration * 50 / 10000).toFixed(4));\n      }\n\n      this.setAttr(this.el, 'data-scroll', 'yes');\n      this.setAttr(this.el, 'data-scroll-dir', 'bottom');\n      this.scroll(this.el, start, end, _step);\n    }\n  }, {\n    key: \"scrollTop\",\n    value: function scrollTop(el, start) {\n      var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      start = start || el.scrollTop;\n      var difference = Math.abs(start - end);\n      var step = Math.ceil(difference / 1000 * 50);\n      this.setAttr(el, 'data-scroll', 'yes');\n      this.setAttr(el, 'data-scroll-dir', 'top');\n      this.scroll(el, start, end, step);\n    }\n  }, {\n    key: \"scroll\",\n    value: function scroll(el, start, end, step) {\n      var _this2 = this;\n\n      if (el.getAttribute('data-scroll') === 'no') return;\n\n      if (start === end) {\n        return setTimeout(this.scrollBottom(el), 5000);\n      } // 从上往下滚\n\n\n      var d = start + step > end ? end : start + step; // 从下往上滚\n\n      if (start > end) {\n        d = start - step < end ? end : start - step;\n      }\n\n      if (el === window) {\n        window.scrollTo(d, d);\n      } else {\n        el.scrollTop = d;\n      }\n\n      if (el.scrollTop + el.clientHeight >= el.scrollHeight) {\n        this.scrollTop(el); // el.scrollTop = 0\n      } else if (el.scrollTop <= 0 && d <= 0) {\n        this.scrollBottom(el);\n      } else {\n        requestAnimationFrame(function () {\n          return _this2.scroll(el, d, end, step);\n        });\n      }\n    }\n  }]);\n\n  return TableScroll;\n}();\n\nexport { TableScroll as default };",{"version":3,"sources":["D:\\工作项目\\部反诈\\src\\utils\\tableScroll.js"],"names":["requestAnimationFrame","on","off","sleep","elTableScroll","ref","options","resolve","reject","el","$children","length","$el","parentNode","scrollHeight","clientHeight","tableScroll","TableScroll","run","step","duration","useType","timer","scrollBottom","watchScrollState","stop","bind","regain","clearTimeout","setAttr","setTimeout","_","getAttribute","scrollTop","setAttribute","key","value","start","end","difference","Math","abs","_step","toFixed","scroll","ceil","d","window","scrollTo"],"mappings":"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","sourcesContent":["import { requestAnimationFrame, on, off } from 'utils/dom'\nimport { sleep } from 'utils/util'\n\n// 用于el-table的滚动，需要放在table中的数据再页面中渲染完后执行\nexport async function elTableScroll(ref, options) {\n  // 等待dom渲染\n  await sleep(30)\n  return new Promise(async (resolve, reject) => {\n    const el = ref.$children[ref.$children.length - 1].$el.parentNode\n    if (el.scrollHeight - el.clientHeight === 0) {\n      return\n    }\n    const tableScroll = new TableScroll(el, options)\n    tableScroll.run()\n    resolve(tableScroll)\n  })\n}\n\nexport default class TableScroll {\n  constructor(el, options) {\n    this.el = el\n    this.options = {\n      step: 0.3,\n      duration: 25,\n      useType: 'step'\n    }\n    if (typeof options === 'object') {\n      Object.assign(this.options, options)\n    } else {\n      this.duration = options\n    }\n\n    // this.duration = duration\n    // this.step = step\n    this.timer = null\n  }\n\n  run() {\n    this.scrollBottom(this.el)\n    this.watchScrollState()\n  }\n\n  watchScrollState() {\n    on(this.el, 'mouseover', this.stop.bind(this))\n    on(this.el, 'mouseout', this.regain.bind(this))\n  }\n\n  stop() {\n    clearTimeout(this.timer)\n    this.setAttr(this.el, 'data-scroll', 'no')\n  }\n\n  // 恢复滚动\n  regain() {\n    this.timer = setTimeout(_ => {\n      this.setAttr(this.el, 'data-scroll', 'yes')\n      if (this.el.getAttribute('data-scroll-dir') === 'bottom') {\n        this.scrollBottom(this.el, this.el.scrollTop)\n      } else {\n        this.scrollTop(this.el)\n      }\n    }, 1000)\n  }\n\n  destroy() {\n    this.el.setAttribute('data-scroll', 'no')\n    off(this.el, 'mouseouver', this.stop)\n    off(this.el, 'mouseout', this.regain)\n  }\n\n  setAttr(el, key, value) {\n    if (el.getAttribute(key) !== value) {\n      el.setAttribute(key, value)\n    }\n  }\n\n  scrollBottom(el, start = 0, end) {\n    end = end || el.scrollHeight - el.clientHeight\n    const difference = Math.abs(start - end)\n    let _step\n    if (this.duration) {\n      _step = parseFloat(\n        (((difference / this.duration) * 50) / 10000).toFixed(4)\n      )\n    } else {\n      const { duration, step, useType } = this.options\n      _step =\n        useType === 'step'\n          ? step\n          : parseFloat((((difference / duration) * 50) / 10000).toFixed(4))\n    }\n\n    this.setAttr(this.el, 'data-scroll', 'yes')\n    this.setAttr(this.el, 'data-scroll-dir', 'bottom')\n    this.scroll(this.el, start, end, _step)\n  }\n\n  scrollTop(el, start, end = 0) {\n    start = start || el.scrollTop\n    var difference = Math.abs(start - end)\n    var step = Math.ceil((difference / 1000) * 50)\n    this.setAttr(el, 'data-scroll', 'yes')\n    this.setAttr(el, 'data-scroll-dir', 'top')\n    this.scroll(el, start, end, step)\n  }\n\n  scroll(el, start, end, step) {\n    if (el.getAttribute('data-scroll') === 'no') return\n    if (start === end) {\n      return setTimeout(this.scrollBottom(el), 5000)\n    }\n\n    // 从上往下滚\n    let d = start + step > end ? end : start + step\n    // 从下往上滚\n    if (start > end) {\n      d = start - step < end ? end : start - step\n    }\n    if (el === window) {\n      window.scrollTo(d, d)\n    } else {\n      el.scrollTop = d\n    }\n\n    if (el.scrollTop + el.clientHeight >= el.scrollHeight) {\n      this.scrollTop(el)\n      // el.scrollTop = 0\n    } else if (el.scrollTop <= 0 && d <= 0) {\n      this.scrollBottom(el)\n    } else {\n      requestAnimationFrame(() => this.scroll(el, d, end, step))\n    }\n  }\n}\n"]}]}