{"remainingRequest":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js!D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\工作项目\\部反诈\\src\\utils\\map3d\\index.js","dependencies":[{"path":"D:\\工作项目\\部反诈\\src\\utils\\map3d\\index.js","mtime":1598758375190},{"path":"D:\\工作项目\\部反诈\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.fill\";\nimport _toConsumableArray from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _Array$from from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/from\";\nimport _slicedToArray from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport _Array$isArray from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/is-array\";\nimport _Object$assign from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport _objectSpread from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Object$keys from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/keys\";\nimport _classCallCheck from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as d3 from 'd3-geo';\nimport * as THREE from 'three';\nimport merge from 'lodash/merge';\nimport cloneDeep from 'lodash/cloneDeep';\nimport pick from 'lodash/pick';\nimport decode from './core/decode';\nimport Three from './core/three';\nimport { setStyles } from './libs/dom';\nimport { getType, loaderPromisify, normalizeFourValues } from './tool/util';\nimport { createCanvas, drawText, getTextWidth } from './tool/canvas';\nimport { hex2Rgba, rgbToRgba } from './tool/color';\nimport Loading from './components/loading';\nimport Tooltip from './components/tooltip/index';\nvar AREA = 'area',\n    TEXT = 'text',\n    BORDER = 'border',\n    HOVERMODEL = 'hoverMode',\n    CLICKMODEL = 'clickModel',\n    comboDistance = 5,\n    _animationEasing = 'quinticInOut',\n    _animationDuration = 3000,\n    // 以屏幕尺寸1920 * 1080 时中国地图缩放为35.98、层高为15时的样式为基准，确定这个基准后，根据不同地图的scale算出depth的值\nstandardLayout = {\n  zoom: 35.98,\n  depth: 10\n},\n    depth = -standardLayout.depth,\n    defaultStyles = {\n  areaStyle: {\n    normal: {\n      show: true,\n      color: '#006de0',\n      opacity: 1,\n      texture: '',\n      depth: depth\n    },\n    emphasis: {\n      show: true,\n      color: '#ffff00',\n      opacity: 1,\n      texture: '',\n      depth: depth\n    }\n  },\n  borderStyle: {\n    normal: {\n      show: true,\n      color: '#aaffff',\n      opacity: 1\n    },\n    emphasis: {\n      show: true,\n      color: '#55ffff',\n      opacity: 1\n    }\n  },\n  textStyle: {\n    normal: {\n      show: true,\n      fontSize: 14,\n      // fontFamily: 'sans-serif',\n      fontFamily: '宋体',\n      fontStyle: 'normal',\n      fontWeight: 'normal',\n      color: '#ffffff',\n      opacity: 1,\n      texture: '',\n      height: 2,\n      style: 'normal',\n      bevelThickness: 1,\n      bevelSize: 1,\n      bevelSegments: 1,\n      curveSegments: 10,\n      rotation: {\n        x: 0,\n        y: Math.PI / 4,\n        z: Math.PI / 2\n      },\n      steps: 1\n    },\n    emphasis: {\n      show: true,\n      color: '#00ff00',\n      fontSize: 14,\n      fontFamily: '宋体',\n      fontStyle: 'normal',\n      fontWeight: 'normal',\n      opacity: 1,\n      texture: '',\n      height: 2,\n      style: 'normal',\n      bevelThickness: 1,\n      bevelSize: 1,\n      bevelSegments: 1,\n      curveSegments: 10,\n      steps: 1,\n      rotation: {\n        x: 0,\n        y: Math.PI / 4,\n        z: Math.PI / 2\n      }\n    }\n  },\n  simpleTip: {\n    show: false,\n    offset: [0, 0],\n    padding: [5, 5],\n    center: null,\n    borderWidth: 2,\n    border: '#FAEA2A',\n    lineGap: 5,\n    rotation: {\n      x: 0,\n      y: Math.PI / 4,\n      z: Math.PI / 2\n    },\n    background: '#6A74AA',\n    opacity: 1,\n    formatter: '{name} \\n {value}',\n    textStyle: {\n      color: '#FAEA2A',\n      fontFamily: 'DS-Digital',\n      fontWeight: 'normal',\n      fontStyle: 'normal',\n      fontSize: 14,\n      lineHeight: 24,\n      whiteSpace: 'nowrap',\n      textAlign: 'center',\n      textBaseline: 'top'\n    }\n  }\n},\n    defaultOptions = {\n  animation: false,\n  animationEasing: _animationEasing,\n  animationDuration: _animationDuration,\n  depth: depth,\n  // layers: Math.abs(depth),\n  layers: 2,\n  // rendererOptions: {\n  //   antialias: false\n  // },\n  stats: true,\n  gui: false,\n  controls: true,\n  // orbit\n  background: '#000000',\n  opacity: 0,\n  blending: false,\n  padding: 20,\n  cameraPosition: {\n    x: 100,\n    y: 0,\n    z: 100\n  },\n  // 字体样式，font.json的绝对路径，修改文字字体需要传入对应字体的font.json路径\n  // font: '/FZNewShuSong-Z10S__china.json',\n  // zoom: 30,\n  rotate: Math.PI / 4,\n  offset: [0, 0],\n  roam: true,\n  autoResize: true,\n  light: {\n    color: 0xffffff,\n    intensity: 1\n  },\n  pointLight: {\n    color: 0xffffff,\n    intensity: 2.5,\n    distance: 120,\n    position: [30, 0, 70]\n  },\n  actived: '',\n  // 北京市\n  map: {},\n  extraBorder: null,\n  tooltip: null,\n  flylines: null,\n  scatters: null,\n  visualMap: null,\n  nameMap: {},\n  stopDefaultMousemove: false,\n  stopDefaultClick: false,\n  visibleSouthSea: false,\n  carousel: {\n    animation: false,\n    time: 3000,\n    sequence: null,\n    handler: null\n  }\n};\n\nvar Map3D =\n/*#__PURE__*/\nfunction (_Three) {\n  _inherits(Map3D, _Three);\n\n  function Map3D(el, mapJson, options) {\n    var _this;\n\n    _classCallCheck(this, Map3D);\n\n    if (mapJson.type !== 'FeatureCollection') {\n      throw new Error('geoJson数据格式不正确，请传入正确的geoJson地图数据');\n    }\n\n    if (options.depth) {\n      defaultStyles.areaStyle.normal.depth = options.depth;\n      defaultStyles.areaStyle.emphasis.depth = options.depth;\n    }\n\n    var opts = merge({}, defaultStyles, defaultOptions, options);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Map3D).call(this, el, opts));\n    _this.originalDepth = opts.depth;\n\n    if (_this.loading) {\n      _this.loading.show();\n    } else {\n      _this.loading = new Loading(_this.el);\n    }\n\n    _this.standardLayout = standardLayout;\n    _this._options = cloneDeep(opts);\n    _this.mapJson = decode(cloneDeep(mapJson));\n    _this.defaultStyles = pick(opts, _Object$keys(defaultStyles));\n\n    _this.init();\n\n    return _this;\n  }\n\n  _createClass(Map3D, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.necessaryInit();\n\n              case 2:\n                _context.next = 4;\n                return this.processMapJson();\n\n              case 4:\n                this.promisifyLoader();\n                this.setLight();\n                this.paint(true);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"setOptions\",\n    value: function () {\n      var _setOptions = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(mapJson, options) {\n        var _this2 = this;\n\n        var _ref;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(mapJson.type !== 'FeatureCollection')) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                ;\n                _ref = [null, mapJson];\n                mapJson = _ref[0];\n                options = _ref[1];\n                _context2.next = 10;\n                break;\n\n              case 7:\n                this.mapJson = decode(mapJson);\n                _context2.next = 10;\n                return this.processMapJson();\n\n              case 10:\n                _Object$keys(defaultOptions).forEach(function (key) {\n                  _this2.options = defaultOptions[key];\n                });\n\n                this.scatters = null;\n                this.flylines = null;\n                this.options = merge(this.options, defaultStyles, cloneDeep(options));\n                this._options = cloneDeep(this.options);\n                this.clear();\n                this.paint();\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setOptions(_x, _x2) {\n        return _setOptions.apply(this, arguments);\n      }\n\n      return setOptions;\n    }()\n  }, {\n    key: \"resetDepth\",\n    value: function resetDepth(options) {\n      for (var key in options) {\n        if (key === 'depth') {\n          // options.depth = (options.depth / standardLayout.zoom) * (standardLayout.zoom / this.mapZoom)\n          options.depth = standardLayout.depth / standardLayout.zoom * (options.depth / standardLayout.depth) * 2;\n        } else if (getType(options[key]) === 'object') {\n          this.resetDepth(options[key]);\n        }\n      }\n    }\n  }, {\n    key: \"paint\",\n    value: function () {\n      var _paint = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(init) {\n        var _this$options, map, tooltip;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$options = this.options, map = _this$options.map, tooltip = _this$options.tooltip;\n                this.mapStyleMerge(map, this.defaultStyles);\n                this.resetDepth(this.options);\n                this.tooltip = new Tooltip(this, tooltip || {});\n                _context3.next = 6;\n                return this.initVisualMap();\n\n              case 6:\n                _context3.next = 8;\n                return this.initFlyline();\n\n              case 8:\n                this.drawMap();\n                this.initScatter();\n                this.registerMouseEvent('mousemove', this.mousemove.bind(this), this.areaMeshes);\n                this.registerMouseEvent('mouseout', this.mouseout.bind(this), this.areaMeshes);\n                this.registerMouseEvent('click', this.click.bind(this), this.areaMeshes);\n                init && this._render();\n                this.emit('ready', this);\n                this.loading && this.loading.hide();\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function paint(_x3) {\n        return _paint.apply(this, arguments);\n      }\n\n      return paint;\n    }()\n  }, {\n    key: \"initVisualMap\",\n    value: function () {\n      var _initVisualMap = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        var _ref2, VisualMap, _this$visualMap$optio, triggerOn, type, mapOptions;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (this.options.visualMap) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 2:\n                !this.canvas && this.addCanvas();\n                _context4.next = 5;\n                return import(\n                /* webpackChunkName: 'visual-map' */\n                './components/visual-map/index');\n\n              case 5:\n                _ref2 = _context4.sent;\n                VisualMap = _ref2.VisualMap;\n                this.processVisualMapOptions();\n                _context4.next = 10;\n                return VisualMap(this.container, _objectSpread({}, this.options.visualMap, {\n                  context: this.ctx,\n                  canvas: this.canvas\n                }));\n\n              case 10:\n                this.visualMap = _context4.sent;\n                _this$visualMap$optio = this.visualMap.options, triggerOn = _this$visualMap$optio.triggerOn, type = _this$visualMap$optio.type;\n\n                if (triggerOn === 'scatter') {\n                  this.options.scatters.data.forEach(function (item) {\n                    var value = item.data.value;\n                    item.color = _this3.visualMap.getColor(value);\n                  });\n                } else if (triggerOn === 'map') {\n                  mapOptions = this.options.map;\n                  this.mapValues = {};\n\n                  _Object$keys(mapOptions).forEach(function (key) {\n                    var value = (mapOptions[key].data || {}).value || 0,\n                        color = _this3.visualMap.getColor(value);\n\n                    mapOptions[key].areaStyle.normal.color = color;\n                    mapOptions[key].areaStyle.inactive = {\n                      color: _this3.visualMap.options.inactiveColor\n                    };\n                    _this3.mapValues[key] = value;\n                  });\n                }\n\n                if (type === 'piecewise') {\n                  this.visualMap.on('click', this.piecewiseVisualMapClick.bind(this));\n                } else if (type === 'continuous') {\n                  this.visualMap.on('mousedown', this.continuousVisualMapMousedown.bind(this));\n                  this.visualMap.on('mouseup', this.continuousVisualMapMouseup.bind(this));\n                  this.visualMap.on('change', this.continuousVisualChange.bind(this));\n                }\n\n                this.visualMap.on('mouseover', this.visualMapMouseover.bind(this));\n                this.visualMap.on('mouseout', this.visualMapMouseout.bind(this));\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function initVisualMap() {\n        return _initVisualMap.apply(this, arguments);\n      }\n\n      return initVisualMap;\n    }()\n  }, {\n    key: \"addCanvas\",\n    value: function addCanvas() {\n      var _createCanvas = createCanvas(this.rendererSize.width, this.rendererSize.height),\n          context = _createCanvas.context,\n          canvas = _createCanvas.canvas;\n\n      this.ctx = context;\n      this.canvas = canvas;\n      this.container.appendChild(canvas);\n      setStyles(this.canvas, {\n        position: 'absolute',\n        // zIndex: 0,\n        left: 0,\n        top: 0\n      });\n    }\n  }, {\n    key: \"setCanvasSize\",\n    value: function setCanvasSize() {\n      if (this.canvas) {\n        this.canvas.width = this.rendererSize.width;\n        this.canvas.height = this.rendererSize.height;\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      this.setCanvasSize();\n      this.visualMap && this.visualMap.resize();\n    }\n  }, {\n    key: \"initScatter\",\n    value: function () {\n      var _initScatter = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5() {\n        var Scatter;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.options.scatters) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 2:\n                _context5.next = 4;\n                return import(\n                /* webpackChunkName: 'scatter' */\n                './components/scatter/index');\n\n              case 4:\n                Scatter = _context5.sent;\n                this.Scatter = Scatter.default;\n                !this.options.animation && this.drawScatter();\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function initScatter() {\n        return _initScatter.apply(this, arguments);\n      }\n\n      return initScatter;\n    }()\n  }, {\n    key: \"drawScatter\",\n    value: function drawScatter() {\n      this.scatters = new this.Scatter(this, this.options.scatters);\n\n      if (this.visualMapRangeParams) {\n        this.scatters.controlScatters(_objectSpread({}, this.visualMapRangeParams, {\n          show: true,\n          hideOther: true\n        }));\n        this.visualMapRangeParams = null;\n      }\n    }\n  }, {\n    key: \"initFlyline\",\n    value: function () {\n      var _initFlyline = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6() {\n        var options, Flyline;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = this.options.flylines;\n\n                if (options) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 3:\n                _context6.next = 5;\n                return import(\n                /* webpackChunkName: 'flyline' */\n                './components/flyline/index');\n\n              case 5:\n                Flyline = _context6.sent;\n                this.Flyline = Flyline.default;\n                !this.options.animation && (this.flylines = new this.Flyline(this, options));\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function initFlyline() {\n        return _initFlyline.apply(this, arguments);\n      }\n\n      return initFlyline;\n    }()\n  }, {\n    key: \"processVisualMapOptions\",\n    value: function processVisualMapOptions() {\n      var _this$options$visualM = this.options.visualMap,\n          min = _this$options$visualM.min,\n          max = _this$options$visualM.max,\n          triggerOn = _this$options$visualM.triggerOn,\n          type = _this$options$visualM.type,\n          data;\n      triggerOn = triggerOn || (type === 'piecewise' ? 'scatter' : 'map');\n\n      if (triggerOn === 'scatter') {\n        data = this.options.scatters.data;\n      }\n\n      if (triggerOn === 'map') {\n        data = this.options.map;\n      }\n\n      if (!min) min = this.getMinData(data);\n      if (!max) max = this.getMaxData(data);\n\n      _Object$assign(this.options.visualMap, {\n        min: min,\n        max: max\n      });\n    }\n  }, {\n    key: \"getMinData\",\n    value: function getMinData(data) {\n      return _Array$isArray(data) ? data.reduce(function (prev, cur) {\n        var value = (cur.data || {}).value || 0;\n        return prev > value ? value : prev;\n      }, 0) : _Object$keys(data).reduce(function (prev, cur) {\n        var value = (data[cur].data || {}).value || 0;\n        return prev > value ? value : prev;\n      }, 0);\n    }\n  }, {\n    key: \"getMaxData\",\n    value: function getMaxData(data) {\n      return _Array$isArray(data) ? data.reduce(function (prev, cur) {\n        var value = (cur.data || {}).value || 0;\n        return prev < value ? value : prev;\n      }, 0) : _Object$keys(data).reduce(function (prev, cur) {\n        var value = (data[cur].data || {}).value || 0;\n        return prev < value ? value : prev;\n      }, 0);\n    }\n  }, {\n    key: \"setScatters\",\n    value: function setScatters(options) {\n      var repaint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (this.scatters) {\n        this.scatters.setOptions(options, repaint);\n      } else {\n        this.scatters = new this.Scatter(this, options);\n      }\n    }\n  }, {\n    key: \"setFlylines\",\n    value: function setFlylines(options) {\n      var repaint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (this.flylines) {\n        this.flylines.setOptions(options, repaint);\n      } else {\n        this.flylines = new this.Flyline(this, options);\n      }\n    }\n  }, {\n    key: \"mapStyleMerge\",\n    value: function mapStyleMerge(map, defaultStyles) {\n      for (var name in map) {\n        if (map[name] && getType(map[name]) === 'object') {\n          map[name] = merge({}, defaultStyles, map[name]);\n        } else {\n          map[name] = defaultStyles;\n        }\n      }\n    }\n  }, {\n    key: \"promisifyLoader\",\n    value: function promisifyLoader() {\n      this.fontLoader = loaderPromisify(new THREE.FontLoader());\n      this.textureLoader = loaderPromisify(new THREE.TextureLoader());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.loading && this.loading.visible && this.loading.hide();\n      this.scatters && this.scatters.render();\n      this.flylines && this.flylines.render();\n\n      if (!this.animated) {\n        this.mapComboTween && this.mapComboTween.update();\n        this.cameraTween && this.cameraTween.update();\n      }\n    }\n  }, {\n    key: \"destroyHook\",\n    value: function destroyHook() {\n      this.loading && this.loading.destroy();\n      this.visualMap && this.visualMap.destroy();\n      this.tooltip && this.tooltip.destroy();\n      this.off('ready');\n      this.off('click');\n      this.off('mousemove');\n    }\n  }, {\n    key: \"click\",\n    value: function click(event) {\n      var animated = !this.options.animation ? true : this.animated;\n      if (!animated) return;\n      var group = this.getIntersectGroup(event);\n      if (this.handleOtherElement) return;\n      this.emit('click', group);\n\n      if (!this.options.stopDefaultClick) {\n        if (this[CLICKMODEL] && this[CLICKMODEL] === group && this[CLICKMODEL].selected) {\n          this.setModelStyleByType(this[CLICKMODEL], 'normal');\n          group.selected = false;\n          this[CLICKMODEL] = null;\n          return;\n        }\n\n        if (!group) {\n          if (this[CLICKMODEL]) {\n            this[CLICKMODEL].selected = false;\n            this.setModelStyleByType(this[CLICKMODEL], 'normal');\n            this[CLICKMODEL] = null;\n          }\n\n          return;\n        }\n\n        this[CLICKMODEL] && (this[CLICKMODEL].selected = false);\n        this.setModelStyle(group, CLICKMODEL);\n        group.selected = true;\n      }\n    }\n  }, {\n    key: \"mousemove\",\n    value: function mousemove(event) {\n      var animated = !this.options.animation ? true : this.animated;\n      if (!animated) return;\n      var group = this.getIntersectGroup(event);\n      this.emit('mousemove', group);\n\n      if (!this.options.stopDefaultMousemove) {\n        if (!group) {\n          if (!this.options.carousel.animation) {\n            if (this[HOVERMODEL] && this[HOVERMODEL] !== this[CLICKMODEL]) {\n              this.setModelStyleByType(this[HOVERMODEL], 'normal');\n              this[HOVERMODEL] = null;\n            }\n\n            this.tooltip.options.triggerOn === 'area' && this.tooltip.hide(event);\n          }\n\n          !this.handleOtherElement && (this.container.style.cursor = 'default');\n          this.carouselMouseOut();\n          return;\n        }\n\n        clearInterval(this.carouselTimer);\n\n        if (this.carouseSequence) {\n          this.carouselTimer = null;\n          this.activeModelIndex = this.carouseSequence.findIndex(function (name) {\n            return name === group.name;\n          }) || this.activeModelIndex;\n        }\n\n        this.tooltip.options.triggerOn === 'area' && this.tooltip.show({\n          type: AREA,\n          data: group.data,\n          object: group,\n          event: event\n        });\n        this.container.style.cursor = 'pointer';\n        if (this[HOVERMODEL] === group) return;\n\n        if (this[CLICKMODEL] !== group) {\n          this.setModelStyle(group, HOVERMODEL);\n        } else {\n          if (this[HOVERMODEL] && !this[HOVERMODEL].selected) {\n            this.setModelStyleByType(this[HOVERMODEL], 'normal');\n            this[HOVERMODEL] = null;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"mouseout\",\n    value: function mouseout(event) {\n      if (this[HOVERMODEL] && !this.options.carousel.animation) {\n        this.setModelStyleByType(this[HOVERMODEL], 'normal');\n        this[HOVERMODEL] = null;\n        this.tooltip.options.triggerOn === 'area' && this.tooltip.hide(event);\n      }\n\n      this.carouselMouseOut();\n    }\n  }, {\n    key: \"carouselMouseOut\",\n    value: function carouselMouseOut() {\n      var animated = !this.options.animation ? true : this.animated;\n\n      if (animated && !this.carouselTimer) {\n        this.carouselAnimate();\n      }\n    }\n  }, {\n    key: \"continuousVisualChange\",\n    value: function continuousVisualChange(params, layout) {\n      this.handleOtherElement = true;\n      var min = params.min,\n          max = params.max,\n          triggerOn = this.visualMap.options.triggerOn;\n\n      if (triggerOn === 'scatter') {\n        if (this.scatters) {\n          this.scatters.controlScatters({\n            min: min,\n            max: max,\n            show: true,\n            hideOther: true\n          });\n        } else {\n          this.visualMapRangeParams = {\n            min: min,\n            max: max\n          };\n        }\n      } else if (triggerOn === 'map') {\n        this.setMapStyleByValueRange(min, max, 'change');\n      }\n    }\n  }, {\n    key: \"continuousVisualMapMousedown\",\n    value: function continuousVisualMapMousedown() {\n      this.handleOtherElement = true;\n      this.controls.enabled = false;\n    }\n  }, {\n    key: \"continuousVisualMapMouseup\",\n    value: function continuousVisualMapMouseup() {\n      this.controls.enabled = true;\n      this.handleOtherElement = false;\n    }\n  }, {\n    key: \"piecewiseVisualMapClick\",\n    value: function piecewiseVisualMapClick(params) {\n      var _this4 = this;\n\n      var min = params.min,\n          max = params.max,\n          selected = params.selected,\n          triggerOn = this.visualMap.options.triggerOn;\n      this.handleOtherElement = true;\n\n      if (triggerOn === 'scatter') {\n        this.scatters && this.scatters.controlScatters({\n          min: min,\n          max: max,\n          zoom: true,\n          show: selected\n        });\n      } else if (triggerOn === 'map') {\n        var type = !selected ? 'inactive' : 'normal';\n\n        _Object$keys(this.mapValues).forEach(function (name) {\n          var value = _this4.mapValues[name],\n              group = _this4.scene.getObjectByName(name);\n\n          if (value >= min && value <= max) {\n            group.inactive = type === 'inactive';\n\n            _this4.setModelStyleByType(group, type);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"visualMapMouseover\",\n    value: function visualMapMouseover(params, all) {\n      this.handleOtherElement = true;\n      var _this$visualMap$optio2 = this.visualMap.options,\n          triggerOn = _this$visualMap$optio2.triggerOn,\n          type = _this$visualMap$optio2.type;\n      var min = params.min,\n          max = params.max,\n          selected = params.selected;\n\n      if (triggerOn === 'scatter') {\n        this.scatters && this.scatters.controlScatters({\n          min: min,\n          max: max,\n          zoom: true,\n          range: this.visualMap.layout.range,\n          show: type === 'piecewise' ? selected : true\n        });\n      } else {\n        if (triggerOn === 'map') {\n          if (type === 'continuous' && params.type === 'colorBar' || type === 'piecewise') {\n            this.setMapStyleByValueRange(min, max, 'mouseover');\n          }\n        }\n      }\n\n      this.isVisualMapMouseout = false;\n    }\n  }, {\n    key: \"visualMapMouseout\",\n    value: function visualMapMouseout() {\n      var _this5 = this;\n\n      if (this.isVisualMapMouseout) return;\n      var triggerOn = this.visualMap.options.triggerOn;\n      this.handleOtherElement = false;\n\n      if (triggerOn === 'scatter') {\n        this.scatters && this.scatters.controlScatters({\n          zoom: false\n        });\n      }\n\n      if (triggerOn === 'map') {\n        this.activesMapName && this.activesMapName.forEach(function (name) {\n          var group = _this5.scene.getObjectByName(name);\n\n          group && _this5.setModelStyleByType(group, 'normal');\n        });\n      }\n\n      if (!this.isVisualMapMouseout) {\n        this.isVisualMapMouseout = true;\n      }\n    }\n  }, {\n    key: \"setMapStyleByValueRange\",\n    value: function setMapStyleByValueRange(min, max, eventType) {\n      var _this6 = this;\n\n      var styleKeyMaps = {\n        mouseover: ['emphasis', 'normal'],\n        change: ['normal', 'inactive'] // 对应continonus的最大最小值改变\n\n      };\n      eventType === 'mouseover' && (this.activesMapName = []);\n\n      _Object$keys(this.mapValues).forEach(function (name) {\n        var value = _this6.mapValues[name],\n            group = _this6.scene.getObjectByName(name);\n\n        if (!group) return;\n\n        if (value >= min && value <= max) {\n          var type = styleKeyMaps[eventType][0];\n          eventType !== 'mouseover' && (group.inactive = type === 'inactive');\n\n          _this6.setModelStyleByType(group, type);\n\n          eventType === 'mouseover' && _this6.activesMapName.push(name);\n        } else {\n          var _type = styleKeyMaps[eventType][1];\n          eventType !== 'mouseover' && (group.inactive = _type === 'inactive');\n\n          _this6.setModelStyleByType(group, _type);\n        }\n      });\n    }\n  }, {\n    key: \"getIntersectGroup\",\n    value: function getIntersectGroup(event) {\n      var intersect = event.intersects[0];\n      if (!intersect) return null;\n      var group = intersect.object.parent;\n      return this.mapNames.includes(group.name) ? group : this.mapNames.includes(group.name.split('_')[0]) && group.parent;\n    }\n  }, {\n    key: \"setActiveModel\",\n    value: function () {\n      var _setActiveModel = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee7(name) {\n        var group, _this$vector3ToScreen, x, y;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                group = this.scene.getObjectByName(name);\n\n                if (!group) {\n                  _context7.next = 8;\n                  break;\n                }\n\n                _this$vector3ToScreen = this.vector3ToScreenPosition(group.data.center), x = _this$vector3ToScreen.x, y = _this$vector3ToScreen.y;\n                this.setModelStyle(group, HOVERMODEL);\n\n                if (!this.options.carousel.handler) {\n                  _context7.next = 7;\n                  break;\n                }\n\n                _context7.next = 7;\n                return this.options.carousel.handler(this[HOVERMODEL]);\n\n              case 7:\n                this.tooltip && this.tooltip.show({\n                  type: AREA,\n                  data: group.data,\n                  object: group,\n                  event: {\n                    offsetX: x,\n                    offsetY: y\n                  }\n                });\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function setActiveModel(_x4) {\n        return _setActiveModel.apply(this, arguments);\n      }\n\n      return setActiveModel;\n    }()\n  }, {\n    key: \"vector3ToScreenPosition\",\n    value: function vector3ToScreenPosition(position) {\n      var _position = _slicedToArray(position, 3),\n          x = _position[0],\n          y = _position[1],\n          z = _position[2],\n          worldVector = new THREE.Vector3(x, y, z),\n          vector = worldVector.project(this.camera),\n          width = this.rendererSize.width / 2,\n          height = this.rendererSize.height / 2;\n\n      return {\n        x: Math.round(vector.x * width + width),\n        y: Math.round(-vector.y * height + height)\n      };\n    }\n  }, {\n    key: \"setModelStyle\",\n    value: function setModelStyle(group, key) {\n      if (group instanceof THREE.Group) {\n        this[key] && !this[key].selected && this.setModelStyleByType(this[key], 'normal');\n        this[key] = group;\n        this.setModelStyleByType(this[key], 'emphasis');\n      }\n    }\n  }, {\n    key: \"processMapJson\",\n    value: function () {\n      var _processMapJson = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee8() {\n        var _this7 = this;\n\n        var _this$options2, nameMap, visibleSouthSea, southSeaJson;\n\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _this$options2 = this.options, nameMap = _this$options2.nameMap, visibleSouthSea = _this$options2.visibleSouthSea;\n\n                if (!visibleSouthSea) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                _context8.next = 4;\n                return import(\n                /* webpackChunkName: 'southsea' */\n                './assets/southsea');\n\n              case 4:\n                southSeaJson = _context8.sent;\n                this.mapJson.features.push(southSeaJson.default.features[0]);\n\n              case 6:\n                !this.left && this.getGeoBounds();\n                this.mapNames = [];\n                this.mapCenters = {};\n                this.mapCenterVectors = {}; // this.coordToVector3()\n                // const path = d3.geoPath().projection(this.projection)\n                // path.centroid(d.geometry)\n                // 把经纬度转换成x, y, z坐标\n\n                this.mapJson.features.forEach(function (d) {\n                  var _d$properties = d.properties,\n                      cp = _d$properties.cp,\n                      origionName = _d$properties.name,\n                      name = nameMap[origionName] || origionName,\n                      center = cp || d3.geoCentroid(d.geometry),\n                      vectors3 = _this7.coordToVector3(center);\n\n                  d.name = name;\n                  d.center = center;\n                  d.centerVector3 = vectors3;\n                  _this7.mapCenterVectors[name] = vectors3;\n\n                  _this7.mapNames.push(name);\n\n                  _this7.mapCenters[name] = center;\n                  d.vector3 = {\n                    singleSide: [],\n                    doubleSide: []\n                  };\n                  d.geometry.coordinates.forEach(function (coordinates, i) {\n                    d.vector3[i] = [];\n                    coordinates.forEach(function (c, j) {\n                      if (_Array$isArray(c[0])) {\n                        d.vector3.doubleSide.push(c.map(function (cinner) {\n                          return _this7.coordToVector3(cinner);\n                        }));\n                      } else {\n                        d.vector3.singleSide.push(_this7.coordToVector3(c));\n                      }\n                    });\n                  });\n                });\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function processMapJson() {\n        return _processMapJson.apply(this, arguments);\n      }\n\n      return processMapJson;\n    }() // 经纬度转换成墨卡托投影\n\n  }, {\n    key: \"coordToVector3\",\n    value: function coordToVector3() {\n      var coord = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var z = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (!this.projection) {\n        var _this$options3 = this.options,\n            rotate = _this$options3.rotate,\n            offset = _this$options3.offset,\n            center = _this$options3.center,\n            zoom = _this$options3.zoom,\n            padding = _this$options3.padding;\n\n        if (!this.mapCenter) {\n          this.mapCenter = center || this.getMapCenter(); // this.mapCenter = center || d3.geoCentroid(this.mapJson)\n\n          this.options.center = this.mapCenter;\n        }\n\n        if (!this.mapZoom) {\n          this.mapZoom = (zoom || this.getZoom()) - padding * 2 / this.standardLayout.zoom;\n          this.options.zoom = this.mapZoom;\n        }\n\n        this.projection = d3.geoMercator().center(this.mapCenter).scale(this.mapZoom).rotate(rotate).translate(offset);\n      }\n\n      var _this$projection$reve = this.projection(coord.concat()).reverse(),\n          _this$projection$reve2 = _slicedToArray(_this$projection$reve, 2),\n          x = _this$projection$reve2[0],\n          y = _this$projection$reve2[1];\n\n      return [x, y, z];\n    }\n  }, {\n    key: \"getGeoBounds\",\n    value: function getGeoBounds() {\n      ;\n\n      var _d3$geoBounds = d3.geoBounds(this.mapJson);\n\n      var _d3$geoBounds2 = _slicedToArray(_d3$geoBounds, 2);\n\n      var _d3$geoBounds2$ = _slicedToArray(_d3$geoBounds2[0], 2);\n\n      this.left = _d3$geoBounds2$[0];\n      this.top = _d3$geoBounds2$[1];\n\n      var _d3$geoBounds2$2 = _slicedToArray(_d3$geoBounds2[1], 2);\n\n      this.right = _d3$geoBounds2$2[0];\n      this.bottom = _d3$geoBounds2$2[1];\n    }\n  }, {\n    key: \"getMapCenter\",\n    value: function getMapCenter() {\n      return [(this.left + this.right) * 0.5, (this.bottom + this.top) * 0.5];\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      var _this$rendererSize = this.rendererSize,\n          width = _this$rendererSize.width,\n          height = _this$rendererSize.height,\n          scaleX = width / Math.abs(this.left - this.right),\n          scaleY = height / Math.abs(this.top - this.bottom);\n      return Math.min(scaleX, scaleY) * 2;\n    }\n  }, {\n    key: \"getModelCenter\",\n    value: function getModelCenter(geoJson) {\n      var _d3$geoBounds3 = d3.geoBounds(geoJson),\n          _d3$geoBounds4 = _slicedToArray(_d3$geoBounds3, 2),\n          _d3$geoBounds4$ = _slicedToArray(_d3$geoBounds4[0], 2),\n          left = _d3$geoBounds4$[0],\n          top = _d3$geoBounds4$[1],\n          _d3$geoBounds4$2 = _slicedToArray(_d3$geoBounds4[1], 2),\n          right = _d3$geoBounds4$2[0],\n          bottom = _d3$geoBounds4$2[1];\n\n      return [(left + right) * 0.5, (bottom + top) * 0.5];\n    }\n  }, {\n    key: \"drawMap\",\n    value: function () {\n      var _drawMap = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee9() {\n        var _this8 = this;\n\n        var mapGroup, _this$options4, map, depth, animation, layers, visibleSouthSea;\n\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.areaMeshes = [];\n                this.textList = [];\n                mapGroup = new THREE.Group(), _this$options4 = this.options, map = _this$options4.map, depth = _this$options4.depth, animation = _this$options4.animation, layers = _this$options4.layers, visibleSouthSea = _this$options4.visibleSouthSea;\n                this.segDepth = layers - 1 === 0 ? depth : depth / (layers - 1);\n                this.mapJson.features.forEach(function (d) {\n                  var modelGroup = new THREE.Group(),\n                      areaGroup = new THREE.Group(),\n                      borderGroup = new THREE.Group(),\n                      name = d.name,\n                      vector3 = d.vector3,\n                      centerVector3 = d.centerVector3,\n                      _ref3 = map[name] || _this8.options,\n                      areaStyle = _ref3.areaStyle,\n                      borderStyle = _ref3.borderStyle,\n                      textStyle = _ref3.textStyle,\n                      center = (map[name] || {}).center,\n                      centerPoint = center ? _this8.coordToVector3(center) : centerVector3;\n\n                  if (name === '南海诸岛' && !visibleSouthSea) return;\n\n                  _this8.textList.push({\n                    text: name,\n                    center: centerPoint,\n                    textStyle: textStyle\n                  });\n\n                  var areaSingleMeshes = _this8.drawArea(vector3.singleSide, areaStyle.normal),\n                      borderSingleMesh = _this8.drawBorder(vector3.singleSide, borderStyle.normal);\n\n                  var simpleTipMesh;\n\n                  if (map[name] && map[name].data && map[name].simpleTip.show) {\n                    var _map$name = map[name],\n                        _map$name$data = _map$name.data,\n                        data = _map$name$data === void 0 ? {} : _map$name$data,\n                        simpleTip = _map$name.simpleTip,\n                        _center = data.center ? _this8.coordToVector3(data.center) : centerPoint;\n\n                    !data.name && (data.name = name);\n                    simpleTipMesh = _this8.drawSimpleTip(simpleTip, data, _center);\n                  }\n\n                  areaSingleMeshes.forEach(function (mesh) {\n                    return areaGroup.add(mesh);\n                  });\n                  borderGroup.add(borderSingleMesh);\n                  vector3.doubleSide.forEach(function (item) {\n                    var areaDoubleMeshes = _this8.drawArea(item, areaStyle.normal),\n                        borderDoubleMesh = _this8.drawBorder(item, borderStyle.normal);\n\n                    areaDoubleMeshes.forEach(function (mesh) {\n                      return areaGroup.add(mesh);\n                    });\n                    borderGroup.add(borderDoubleMesh);\n                  });\n                  modelGroup.data = _objectSpread({}, map[name] ? map[name].data : {}, {\n                    name: name,\n                    vector3: vector3,\n                    center: centerPoint\n                  });\n                  modelGroup.name = name;\n                  areaGroup.name = \"\".concat(name, \"_\").concat(AREA);\n                  borderGroup.name = \"\".concat(name, \"_\").concat(BORDER);\n                  modelGroup.add(areaGroup);\n                  modelGroup.add(borderGroup);\n                  simpleTipMesh && modelGroup.add(simpleTipMesh);\n\n                  if (animation) {\n                    modelGroup.position.x = centerPoint[0] * comboDistance;\n                    modelGroup.position.y = centerPoint[1] * comboDistance;\n                  }\n\n                  mapGroup.add(modelGroup);\n                });\n                this.mapGroup = mapGroup;\n                this.scene.add(mapGroup);\n                this.drawExtraBorders();\n                this.drawTexts();\n                animation && this.mapComboAnimation();\n\n              case 10:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function drawMap() {\n        return _drawMap.apply(this, arguments);\n      }\n\n      return drawMap;\n    }()\n  }, {\n    key: \"mapComboAnimation\",\n    value: function mapComboAnimation() {\n      var _this9 = this;\n\n      !this.mapComboTween && (this.mapComboTween = new this.TWEEN.Group());\n      this.mapComboTween.removeAll();\n      var _this$options5 = this.options,\n          _this$options5$animat = _this$options5.animationEasing,\n          animationEasing = _this$options5$animat === void 0 ? _animationEasing : _this$options5$animat,\n          _this$options5$animat2 = _this$options5.animationDuration,\n          animationDuration = _this$options5$animat2 === void 0 ? _animationDuration : _this$options5$animat2,\n          easing = this.tweenEasing[animationEasing],\n          groups = this.mapGroup.children;\n      groups.forEach(function (group, i) {\n        var end = {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n        new _this9.TWEEN.Tween(group.position, _this9.mapComboTween).to(end, animationDuration).easing(easing).start();\n      });\n      new this.TWEEN.Tween(this, this.mapComboTween).to({}, animationDuration).onComplete(function (_) {\n        _this9.mapComboTween.removeAll();\n\n        _this9.mapComboTween = null;\n        _this9.options.flylines && (_this9.flylines = new _this9.Flyline(_this9, _this9.options.flylines));\n        _this9.options.scatters && (_this9.scatters = new _this9.Scatter(_this9, _this9.options.scatters));\n        _this9.cameraTween = new _this9.TWEEN.Group();\n        new _this9.TWEEN.Tween(_this9.camera.position, _this9.cameraTween).to(_this9.options.cameraPosition, animationDuration / 2).start().onComplete(function (_) {\n          _this9.animated = true;\n\n          _this9.cameraTween.removeAll();\n\n          _this9.cameraTween = null;\n\n          _this9.carouselAnimate();\n        });\n      }).start();\n    }\n  }, {\n    key: \"carouselAnimate\",\n    value: function carouselAnimate() {\n      var _this10 = this;\n\n      var _this$options$carouse = this.options.carousel,\n          time = _this$options$carouse.time,\n          sequence = _this$options$carouse.sequence,\n          animation = _this$options$carouse.animation;\n      if (!animation) return;\n      !this.activeModelIndex && (this.activeModelIndex = 0);\n\n      if (!this.carouseSequence) {\n        this.carouseSequence = sequence || this.mapNames;\n      }\n\n      this.setActiveModel(this.carouseSequence[this.activeModelIndex]);\n      clearInterval(this.carouselTimer);\n      this.carouselTimer = setInterval(function (_) {\n        _this10.activeModelIndex++;\n        _this10.activeModelIndex = _this10.activeModelIndex >= _this10.carouseSequence.length ? 0 : _this10.activeModelIndex;\n        var name = _this10.carouseSequence[_this10.activeModelIndex];\n\n        _this10.setActiveModel(name);\n      }, time);\n    } // 绘制地图区域 points 是一个二维数组 [[x,y], [x,y], [x,y]]\n\n  }, {\n    key: \"drawArea\",\n    value: function drawArea(points, _ref4) {\n      var show = _ref4.show,\n          color = _ref4.color,\n          opacity = _ref4.opacity,\n          depth = _ref4.depth,\n          texture = _ref4.texture;\n      var shape = new THREE.Shape();\n      points.forEach(function (d, i) {\n        var _d = _slicedToArray(d, 2),\n            x = _d[0],\n            y = _d[1];\n\n        if (i === 0) {\n          shape.moveTo(x, y);\n        } else if (i === points.length - 1) {\n          shape.quadraticCurveTo(x, y, x, y);\n        } else {\n          shape.lineTo(x, y, x, y);\n        }\n      });\n      var geometry = new THREE.ExtrudeBufferGeometry(shape, {\n        steps: 2,\n        depth: depth,\n        depthTest: false,\n        bevelEnabled: false,\n        bevelThickness: 1,\n        bevelSize: 1,\n        bevelSegments: 1\n      }),\n          // MeshLambertMaterial | MeshBasicMaterial | MeshPhongMaterial\n      material = new THREE.MeshPhongMaterial({\n        color: color,\n        opacity: opacity,\n        transparent: true,\n        side: THREE.DoubleSide\n      });\n      this.noBledingOpacity(material, opacity);\n      texture && (material.map = texture);\n      var mesh = new THREE.Mesh(geometry, material);\n      mesh.name = AREA;\n      mesh.visible = show;\n      this.areaMeshes.push(mesh);\n      return [mesh];\n    }\n  }, {\n    key: \"noBledingOpacity\",\n    value: function noBledingOpacity(material, opacity) {\n      if (this.options.blending) {\n        material.blending = THREE.AdditiveBlending;\n      } else {\n        material.opacity = opacity === 1 ? 0.65 : opacity;\n      }\n    }\n  }, {\n    key: \"drawExtraBorders\",\n    value: function drawExtraBorders() {\n      var _this11 = this;\n\n      var extraBorder = this.options.extraBorder;\n\n      if (_Array$isArray(extraBorder)) {\n        extraBorder.forEach(function (item) {\n          _this11.addBorder(item);\n        });\n      } else if (getType(extraBorder) === 'object') {\n        this.addBorder(extraBorder);\n      }\n    }\n  }, {\n    key: \"addBorder\",\n    value: function addBorder(_ref5) {\n      var _this12 = this;\n\n      var _ref5$color = _ref5.color,\n          color = _ref5$color === void 0 ? '#ffffff' : _ref5$color,\n          _ref5$opacity = _ref5.opacity,\n          opacity = _ref5$opacity === void 0 ? 1 : _ref5$opacity,\n          _ref5$z = _ref5.z,\n          z = _ref5$z === void 0 ? 0 : _ref5$z,\n          name = _ref5.name;\n      var mapData;\n\n      if (name) {\n        if (_Array$isArray(name)) {\n          mapData = this.mapJson.features.filter(function (d) {\n            return name.includes(d.name);\n          });\n        } else {\n          mapData = this.mapJson.features.filter(function (d) {\n            return name === d.name;\n          });\n        }\n      } else {\n        mapData = this.mapJson.features;\n      }\n\n      var group = new THREE.Group();\n      mapData.forEach(function (d) {\n        var name = d.name,\n            vector3 = d.vector3,\n            borderGroup = new THREE.Group(),\n            modelGroup = _this12.scene.getObjectByName(name),\n            borderMeshSingle = _this12.drawBorder(vector3.singleSide, {\n          show: true,\n          color: color,\n          opacity: opacity\n        }, z);\n\n        borderGroup.add(borderMeshSingle);\n        vector3.doubleSide.forEach(function (item) {\n          var borderMeshDouble = _this12.drawBorder(item, {\n            show: true,\n            color: color,\n            opacity: opacity\n          }, z);\n\n          borderGroup.add(borderMeshDouble);\n        });\n        borderGroup.name = \"extraBorder_\".concat(name, \"_\").concat(z);\n        modelGroup ? modelGroup.add(borderGroup) : group.add(borderGroup);\n      });\n      group.children && this.scene.add(group);\n    }\n  }, {\n    key: \"drawBorder\",\n    value: function drawBorder(points, _ref6, z) {\n      var _this13 = this;\n\n      var show = _ref6.show,\n          color = _ref6.color,\n          opacity = _ref6.opacity;\n      var material = new THREE.LineBasicMaterial({\n        color: color,\n        opacity: opacity,\n        // side: THREE.DoubleSide,\n        transparent: true\n      }),\n          geometry = new THREE.BufferGeometry(),\n          positions = [];\n\n      if (z) {\n        points.forEach(function (d) {\n          var _d2 = _slicedToArray(d, 2),\n              x = _d2[0],\n              y = _d2[1];\n\n          positions.push(x, y, z / _this13.originalDepth * _this13.options.depth);\n        });\n      } else {\n        _Array$from({\n          length: this.options.layers\n        }).forEach(function (item, i) {\n          var _points = points.reduce(function (prev, cur) {\n            var _cur = _slicedToArray(cur, 3),\n                x = _cur[0],\n                y = _cur[1],\n                z = _cur[2];\n\n            prev.push(x, y, z + _this13.segDepth * i);\n            return prev;\n          }, []);\n\n          positions.push.apply(positions, _toConsumableArray(_points));\n        });\n      }\n\n      geometry.addAttribute('position', new THREE.Float32BufferAttribute(positions, 3));\n      geometry.computeBoundingSphere();\n      var border = new THREE.Line(geometry, material);\n      border.visible = show;\n      border.name = BORDER;\n      return border;\n    }\n  }, {\n    key: \"initFont\",\n    value: function () {\n      var _initFont = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee10() {\n        var _this$options6, _this$options6$map, map, textStyle;\n\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _this$options6 = this.options, _this$options6$map = _this$options6.map, map = _this$options6$map === void 0 ? {} : _this$options6$map, textStyle = _this$options6.textStyle;\n\n                if (!(textStyle.normal.show || textStyle.emphasis.show)) {\n                  _context10.next = 7;\n                  break;\n                }\n\n                _context10.next = 4;\n                return this.fontLoader(this.options.font);\n\n              case 4:\n                this.font = _context10.sent;\n                _context10.next = 12;\n                break;\n\n              case 7:\n                _context10.t0 = _Object$keys(map).some(function (item) {\n                  var textStyle = map[item].textStyle;\n                  return textStyle.normal.show || textStyle.emphasis.show;\n                });\n\n                if (!_context10.t0) {\n                  _context10.next = 12;\n                  break;\n                }\n\n                _context10.next = 11;\n                return this.fontLoader(this.options.font);\n\n              case 11:\n                this.font = _context10.sent;\n\n              case 12:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function initFont() {\n        return _initFont.apply(this, arguments);\n      }\n\n      return initFont;\n    }()\n  }, {\n    key: \"drawTexts\",\n    value: function () {\n      var _drawTexts = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee11() {\n        var _this14 = this;\n\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!this.options.font) {\n                  _context11.next = 5;\n                  break;\n                }\n\n                _context11.next = 3;\n                return this.initFont();\n\n              case 3:\n                if (this.font) {\n                  _context11.next = 5;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\");\n\n              case 5:\n                this.textList.forEach(function (item) {\n                  var text = item.text,\n                      center = item.center,\n                      textStyle = item.textStyle,\n                      mesh = _this14.font ? _this14.drawThreeText(text, textStyle.normal, center) : _this14.drawCanvasText(text, textStyle.normal, center);\n\n                  if (mesh) {\n                    var model = _this14.scene.getObjectByName(text) || _this14.scene;\n\n                    mesh.name = \"\".concat(text, \"_\").concat(TEXT);\n                    model.add(mesh);\n                  }\n                });\n\n              case 6:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function drawTexts() {\n        return _drawTexts.apply(this, arguments);\n      }\n\n      return drawTexts;\n    }()\n  }, {\n    key: \"drawThreeText\",\n    value: function drawThreeText(text, _ref7, center) {\n      var _this15 = this;\n\n      var show = _ref7.show,\n          color = _ref7.color,\n          opacity = _ref7.opacity,\n          texture = _ref7.texture,\n          height = _ref7.height,\n          style = _ref7.style,\n          fontSize = _ref7.fontSize,\n          steps = _ref7.steps,\n          bevelThickness = _ref7.bevelThickness,\n          bevelSize = _ref7.bevelSize,\n          bevelSegments = _ref7.bevelSegments,\n          curveSegments = _ref7.curveSegments,\n          rotation = _ref7.rotation;\n\n      if (this.font) {\n        var exist = text.split('').every(function (t) {\n          return t === ' ' || !!_this15.font.data.glyphs[t];\n        });\n        if (!exist) return;\n      }\n\n      var geometry = new THREE.TextBufferGeometry(text, {\n        font: this.font,\n        size: fontSize - 2,\n        height: height,\n        style: style,\n        bevelThickness: bevelThickness,\n        bevelSize: bevelSize,\n        bevelSegments: bevelSegments,\n        curveSegments: curveSegments,\n        steps: steps\n      }),\n          material = new THREE.MeshBasicMaterial({\n        color: color,\n        opacity: opacity,\n        depthTest: false,\n        transparent: true\n      });\n      texture && (material.map = texture);\n      var mesh = new THREE.Mesh(geometry, material),\n          scale = 1 / this.standardLayout.zoom;\n      mesh.rotation.set(rotation.x, rotation.y, rotation.z);\n      mesh.position.set(center[0], center[1], fontSize * scale / 2);\n      mesh.scale.set(scale, scale, scale);\n      mesh.rendererOrder = 2;\n      mesh.geometry.center();\n      mesh.name = TEXT;\n      mesh.visible = show;\n      return mesh;\n    }\n  }, {\n    key: \"drawCanvasText\",\n    value: function drawCanvasText(text, style, center) {\n      if (!text) return;\n\n      var color = style.color,\n          opacity = style.opacity,\n          fontSize = style.fontSize,\n          rotation = style.rotation,\n          show = style.show,\n          width = getTextWidth(text, style),\n          _createCanvas2 = createCanvas(width, fontSize),\n          canvas = _createCanvas2.canvas,\n          context = _createCanvas2.context,\n          _color = color.indexOf('rgba') !== -1 ? color ? color.indexOf('rgb') !== -1 : rgbToRgba(color, opacity) : hex2Rgba(color, opacity);\n\n      drawText(context, _objectSpread({\n        text: text,\n        x: 1,\n        y: 1\n      }, style, {\n        textAlign: 'left',\n        textBaseline: 'top',\n        color: _color\n      }));\n      var mesh = this.drawTextPlane(canvas, width, fontSize),\n          scale = 1 / this.standardLayout.zoom;\n      mesh.rotation.set(rotation.x, rotation.y, rotation.z);\n      mesh.position.set(center[0], center[1], fontSize * scale / 2);\n      mesh.scale.set(scale, scale, scale);\n      mesh.rendererOrder = 2;\n      mesh.geometry.center();\n      mesh.name = TEXT;\n      mesh.visible = show;\n      return mesh;\n    }\n  }, {\n    key: \"drawSimpleTip\",\n    value: function drawSimpleTip(style, data, center) {\n      var show = style.show,\n          formatter = style.formatter,\n          rotation = style.rotation,\n          offset = style.offset,\n          background = style.background,\n          border = style.border,\n          borderWidth = style.borderWidth,\n          textStyle = style.textStyle,\n          lineGap = style.lineGap,\n          opacity = style.opacity,\n          html = this.formatterTipHtml(formatter, data),\n          padding = normalizeFourValues(style.padding),\n          _this$getTipLayout = this.getTipLayout(html, textStyle, padding, lineGap, borderWidth),\n          width = _this$getTipLayout.width,\n          height = _this$getTipLayout.height,\n          texts = _this$getTipLayout.texts,\n          _createCanvas3 = createCanvas(width + borderWidth + (width % 2 === 0 ? 0 : 1), height + borderWidth),\n          canvas = _createCanvas3.canvas,\n          context = _createCanvas3.context;\n\n      context.globalAlpha = opacity;\n      context.save();\n      context.beginPath();\n      context.rect(1, 1, width, height);\n      context.fillStyle = background;\n      context.strokeStyle = border;\n      context.lineWidth = borderWidth;\n      context.fill();\n      context.stroke();\n      context.restore();\n      texts.forEach(function (text, i) {\n        drawText(context, _objectSpread({\n          text: text,\n          x: (width + borderWidth) / 2,\n          y: padding[0] + borderWidth + i * (textStyle.fontSize + lineGap)\n        }, textStyle));\n      }); // canvas.style.marginLeft = '10px'\n      // this.el.appendChild(canvas)\n\n      var mesh = this.drawTextPlane(canvas, width + borderWidth, height, 1, false),\n          scale = 1 / this.standardLayout.zoom;\n      mesh.rotation.set(rotation.x, rotation.y, rotation.z);\n      mesh.position.set(center[0] + offset[0] * scale, center[1] + offset[1] * scale, height * scale / 2);\n      mesh.scale.set(scale, scale, scale);\n      mesh.rendererOrder = 2;\n      mesh.geometry.center();\n      mesh.name = TEXT;\n      mesh.visible = show;\n      return mesh;\n    }\n  }, {\n    key: \"formatterTipHtml\",\n    value: function formatterTipHtml(formatter, data) {\n      if (typeof formatter === 'function') return formatter(data);\n\n      _Object$keys(data).forEach(function (key) {\n        formatter = formatter.replace(\"{\".concat(key, \"}\"), data[key]);\n      });\n\n      return formatter;\n    }\n  }, {\n    key: \"getTipLayout\",\n    value: function getTipLayout(html, style, padding, lineGap) {\n      var arr = html.split('\\n').map(function (i) {\n        return i.trim();\n      }),\n          width = arr.reduce(function (prev, cur) {\n        var w = getTextWidth(cur, style);\n        return prev > w ? prev : w;\n      }, 0),\n          height = arr.length * style.fontSize + lineGap * (arr.length - 1);\n      return {\n        width: width + padding[1] + padding[3],\n        height: height + padding[0] + padding[2],\n        texts: arr\n      };\n    }\n  }, {\n    key: \"drawTextPlane\",\n    value: function drawTextPlane(canvas, width, height) {\n      var opacity = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.9;\n      var blending = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var texture = new THREE.CanvasTexture(canvas);\n      texture.needsUpdate = true;\n      texture.minFilter = THREE.LinearFilter;\n      var planeGeometry = new THREE.PlaneBufferGeometry(width, height, 1, 1),\n          planeMaterial = new THREE.MeshBasicMaterial({\n        // color,\n        opacity: opacity,\n        map: texture,\n        transparent: true,\n        side: THREE.DoubleSide\n      });\n\n      if (blending) {\n        // blending: THREE.AdditiveBlending\n        planeMaterial.depthTest = false;\n        planeMaterial.blending = THREE.CustomBlending;\n        planeMaterial.blendEquation = THREE.AddEquation;\n        planeMaterial.blendSrc = THREE.OneFactor;\n        planeMaterial.blendDst = THREE.OneFactor;\n        planeMaterial.blendSrcAlpha = 0;\n      }\n\n      var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n      return plane;\n    }\n    /**\n     * 设置一个区域的颜色\n     * @param {THREE.Group} g area group\n     * @param {String} type normal | emphasis\n     */\n\n  }, {\n    key: \"setModelStyleByType\",\n    value: function setModelStyleByType(model, type) {\n      var _this16 = this;\n\n      var name = model.name,\n          _this$options7 = this.options,\n          _this$options7$map = _this$options7.map,\n          map = _this$options7$map === void 0 ? {} : _this$options7$map,\n          defaultAreaStyle = _this$options7.areaStyle,\n          defaultTextStyle = _this$options7.textStyle,\n          defaultBorderStyle = _this$options7.borderStyle,\n          _ref8 = map[name] || {},\n          _ref8$areaStyle = _ref8.areaStyle,\n          areaStyle = _ref8$areaStyle === void 0 ? defaultAreaStyle : _ref8$areaStyle,\n          _ref8$textStyle = _ref8.textStyle,\n          textStyle = _ref8$textStyle === void 0 ? defaultTextStyle : _ref8$textStyle,\n          _ref8$borderStyle = _ref8.borderStyle,\n          borderStyle = _ref8$borderStyle === void 0 ? defaultBorderStyle : _ref8$borderStyle,\n          areaType = model.inactive && type === 'normal' ? 'inactive' : type;\n\n      if (type === 'normal') {\n        model.position.z = 0;\n      } else if (type === 'emphasis') {\n        model.position.z = -(1 / this.originalDepth) * areaStyle[areaType].depth * (this.originalDepth / 3);\n      }\n\n      model.children.forEach(function (group) {\n        var cname = group.name;\n\n        if (\"\".concat(name, \"_\").concat(TEXT) === cname) {\n          textStyle[type] && _this16.setTextStyle(group, textStyle[type]);\n        } else if (\"\".concat(name, \"_\").concat(AREA) === cname) {\n          areaStyle[areaType] && _this16.setAreaStyle(group, areaStyle[areaType]);\n        } else if (\"\".concat(name, \"_\").concat(BORDER) === cname) {\n          borderStyle[type] && _this16.setBorderStyle(group, borderStyle[type]);\n        }\n      });\n    }\n  }, {\n    key: \"setAreaStyle\",\n    value: function setAreaStyle(group, _ref9) {\n      var _this17 = this;\n\n      var _ref9$show = _ref9.show,\n          show = _ref9$show === void 0 ? true : _ref9$show,\n          color = _ref9.color,\n          depth = _ref9.depth,\n          opacity = _ref9.opacity,\n          texture = _ref9.texture;\n      group.children.forEach(function (mesh) {\n        color && mesh.material.color.set(color);\n        opacity && _this17.noBledingOpacity(mesh.material, opacity);\n        depth && (mesh.geometry.depth = depth);\n        texture && (mesh.material.map = texture);\n        mesh.visible = show;\n      });\n    }\n  }, {\n    key: \"setBorderStyle\",\n    value: function setBorderStyle(group, _ref10) {\n      var show = _ref10.show,\n          color = _ref10.color,\n          opacity = _ref10.opacity;\n      group.children.forEach(function (mesh) {\n        color && mesh.material.color.set(color);\n        opacity && (mesh.material.opacity = opacity);\n        mesh.visible = show; // mesh.position.z = depth\n      });\n    }\n  }, {\n    key: \"setTextStyle\",\n    value: function setTextStyle(mesh, _ref11) {\n      var show = _ref11.show,\n          color = _ref11.color,\n          height = _ref11.height,\n          opacity = _ref11.opacity,\n          texture = _ref11.texture,\n          rotation = _ref11.rotation;\n      color && mesh.material.color.set(color);\n      opacity && (mesh.material.opacity = opacity);\n      height && (mesh.material.height = height);\n      texture && (mesh.material.map = texture);\n\n      if (rotation) {\n        rotation.x && (mesh.rotation.x = rotation.x);\n        rotation.y && (mesh.rotation.y = rotation.y);\n        rotation.z && (mesh.rotation.z = rotation.z);\n      }\n\n      mesh.visible = show;\n    }\n  }, {\n    key: \"setCamera\",\n    value: function setCamera() {\n      var _this$camera$position;\n\n      var _this$options8 = this.options,\n          cameraPosition = _this$options8.cameraPosition,\n          animation = _this$options8.animation,\n          x = cameraPosition.x,\n          y = cameraPosition.y,\n          z = cameraPosition.z,\n          _this$rendererSize2 = this.rendererSize,\n          width = _this$rendererSize2.width,\n          height = _this$rendererSize2.height,\n          position = animation ? [x / 2, y, z * 2] : [x, y, z];\n      this.camera = new THREE.PerspectiveCamera(10, width / height, 1, 1000);\n      this.camera.up.x = 0;\n      this.camera.up.y = 0;\n      this.camera.up.z = 1;\n\n      (_this$camera$position = this.camera.position).set.apply(_this$camera$position, position);\n\n      this.camera.lookAt(0, 0, 0);\n    }\n  }, {\n    key: \"setLight\",\n    value: function setLight() {\n      var _pointLight$position;\n\n      var _ref12 = this.options.light || {},\n          _ref12$color = _ref12.color,\n          color = _ref12$color === void 0 ? 0xffffff : _ref12$color,\n          _ref12$intensity = _ref12.intensity,\n          intensity = _ref12$intensity === void 0 ? 1 : _ref12$intensity;\n\n      var directionalLight = new THREE.DirectionalLight(color, intensity);\n      this.scene.add(directionalLight);\n      var pointOpt = this.options.pointLight;\n      var pointLight = new THREE.PointLight(pointOpt.color, pointOpt.intensity, pointOpt.distance);\n\n      (_pointLight$position = pointLight.position).set.apply(_pointLight$position, _toConsumableArray(pointOpt.position));\n\n      this.scene.add(pointLight); // const helper = new THREE.PointLightHelper(pointLight, 5)\n      // this.scene.add(helper)\n      // const controll = {\n      //   x: pointLight.position.x,\n      //   y: pointLight.position.y,\n      //   z: pointLight.position.z,\n      //   intensity: pointLight.intensity\n      // }\n      // this.gui.add(controll, 'x', -100, 100).onChange(e => {\n      //   pointLight.position.x = e\n      // })\n      // this.gui.add(controll, 'y', -100, 100).onChange(e => {\n      //   pointLight.position.y = e\n      // })\n      // this.gui.add(controll, 'z', -100, 100).onChange(e => {\n      //   pointLight.position.z = e\n      // })\n      // this.gui.add(controll, 'intensity', 0, 3).onChange(e => {\n      //   pointLight.intensity = e\n      // })\n    }\n  }, {\n    key: \"setHelper\",\n    value: function setHelper() {\n      var axesHelper = new THREE.AxesHelper(5);\n      this.scene.add(axesHelper);\n    }\n    /**\n     * 过渡动画\n     * @param {Object|*} from - 修改的启始值\n     * @param {Object|*} to - 修改的结束值\n     * @param {number} [time] - 完成时间\n     * @param {number} [delay=0] - 延迟时间\n     * @param {callback} [callback] - 完成回调\n     * @example\n     * transition(area.position, {x:0,y:0,z:10}, 300)\n     */\n\n  }, {\n    key: \"transition\",\n    value: function transition(from, to, time, delay, callback) {\n      this.TWEEN.removeAll();\n\n      if (typeof time !== 'number') {\n        time = 300;\n      }\n\n      if (!callback) callback = function callback() {};\n      new this.TWEEN.Tween(from).to(to, time).delay(delay || 0).start().onComplete(callback);\n    }\n  }]);\n\n  return Map3D;\n}(Three);\n\nexport default Map3D;",{"version":3,"sources":["D:\\工作项目\\部反诈\\src\\utils\\map3d\\index.js"],"names":["d3","THREE","merge","cloneDeep","pick","decode","Three","setStyles","getType","loaderPromisify","normalizeFourValues","createCanvas","drawText","getTextWidth","hex2Rgba","rgbToRgba","Loading","Tooltip","AREA","TEXT","BORDER","HOVERMODEL","CLICKMODEL","comboDistance","_animationEasing","_animationDuration","standardLayout","zoom","depth","defaultStyles","areaStyle","normal","show","color","opacity","texture","emphasis","borderStyle","textStyle","fontSize","fontFamily","fontStyle","fontWeight","height","style","bevelThickness","bevelSize","bevelSegments","curveSegments","rotation","x","y","Math","PI","z","steps","simpleTip","offset","padding","center","borderWidth","border","lineGap","background","formatter","lineHeight","whiteSpace","textAlign","textBaseline","defaultOptions","animation","animationEasing","animationDuration","layers","stats","gui","controls","blending","cameraPosition","rotate","roam","autoResize","light","intensity","pointLight","distance","position","actived","map","extraBorder","tooltip","flylines","scatters","visualMap","nameMap","stopDefaultMousemove","stopDefaultClick","visibleSouthSea","carousel","time","sequence","handler","Map3D","el","mapJson","options","type","Error","opts","originalDepth","loading","_options","init","necessaryInit","processMapJson","promisifyLoader","setLight","paint","forEach","key","clear","resetDepth","mapStyleMerge","initVisualMap","initFlyline","drawMap","initScatter","registerMouseEvent","mousemove","bind","areaMeshes","mouseout","click","_render","emit","hide","canvas","addCanvas","VisualMap","processVisualMapOptions","container","context","ctx","triggerOn","data","item","value","getColor","mapOptions","mapValues","inactive","inactiveColor","on","piecewiseVisualMapClick","continuousVisualMapMousedown","continuousVisualMapMouseup","continuousVisualChange","visualMapMouseover","visualMapMouseout","rendererSize","width","appendChild","left","top","setCanvasSize","resize","Scatter","default","drawScatter","visualMapRangeParams","controlScatters","hideOther","Flyline","min","max","getMinData","getMaxData","reduce","prev","cur","repaint","setOptions","name","fontLoader","FontLoader","textureLoader","TextureLoader","visible","render","animated","mapComboTween","update","cameraTween","destroy","off","event","group","getIntersectGroup","handleOtherElement","selected","setModelStyleByType","setModelStyle","cursor","carouselMouseOut","clearInterval","carouselTimer","carouseSequence","activeModelIndex","findIndex","object","carouselAnimate","params","layout","setMapStyleByValueRange","enabled","scene","getObjectByName","all","range","isVisualMapMouseout","activesMapName","eventType","styleKeyMaps","mouseover","change","push","intersect","intersects","parent","mapNames","includes","split","vector3ToScreenPosition","offsetX","offsetY","worldVector","Vector3","vector","project","camera","round","Group","southSeaJson","features","getGeoBounds","mapCenters","mapCenterVectors","d","properties","cp","origionName","geoCentroid","geometry","vectors3","coordToVector3","centerVector3","vector3","singleSide","doubleSide","coordinates","i","c","j","cinner","coord","projection","mapCenter","getMapCenter","mapZoom","getZoom","geoMercator","scale","translate","concat","reverse","geoBounds","right","bottom","scaleX","abs","scaleY","geoJson","textList","mapGroup","segDepth","modelGroup","areaGroup","borderGroup","centerPoint","text","areaSingleMeshes","drawArea","borderSingleMesh","drawBorder","simpleTipMesh","drawSimpleTip","mesh","add","areaDoubleMeshes","borderDoubleMesh","drawExtraBorders","drawTexts","mapComboAnimation","TWEEN","removeAll","easing","tweenEasing","groups","children","end","Tween","to","start","onComplete","_","setActiveModel","setInterval","length","points","shape","Shape","moveTo","quadraticCurveTo","lineTo","ExtrudeBufferGeometry","depthTest","bevelEnabled","material","MeshPhongMaterial","transparent","side","DoubleSide","noBledingOpacity","Mesh","AdditiveBlending","addBorder","mapData","filter","borderMeshSingle","borderMeshDouble","LineBasicMaterial","BufferGeometry","positions","_points","addAttribute","Float32BufferAttribute","computeBoundingSphere","Line","font","some","initFont","drawThreeText","drawCanvasText","model","exist","every","t","glyphs","TextBufferGeometry","size","MeshBasicMaterial","set","rendererOrder","_color","indexOf","drawTextPlane","html","formatterTipHtml","getTipLayout","texts","globalAlpha","save","beginPath","rect","fillStyle","strokeStyle","lineWidth","fill","stroke","restore","replace","arr","trim","w","CanvasTexture","needsUpdate","minFilter","LinearFilter","planeGeometry","PlaneBufferGeometry","planeMaterial","CustomBlending","blendEquation","AddEquation","blendSrc","OneFactor","blendDst","blendSrcAlpha","plane","defaultAreaStyle","defaultTextStyle","defaultBorderStyle","areaType","cname","setTextStyle","setAreaStyle","setBorderStyle","PerspectiveCamera","up","lookAt","directionalLight","DirectionalLight","pointOpt","PointLight","axesHelper","AxesHelper","from","delay","callback"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,EAAZ,MAAoB,QAApB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,SAAQC,OAAR,EAAiBC,eAAjB,EAAkCC,mBAAlC,QAA4D,aAA5D;AACA,SAAQC,YAAR,EAAsBC,QAAtB,EAAgCC,YAAhC,QAAmD,eAAnD;AACA,SAAQC,QAAR,EAAkBC,SAAlB,QAAkC,cAAlC;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,OAAP,MAAoB,4BAApB;AAEA,IAAMC,IAAI,GAAG,MAAb;AAAA,IACEC,IAAI,GAAG,MADT;AAAA,IAEEC,MAAM,GAAG,QAFX;AAAA,IAGEC,UAAU,GAAG,WAHf;AAAA,IAIEC,UAAU,GAAG,YAJf;AAAA,IAKEC,aAAa,GAAG,CALlB;AAAA,IAMEC,gBAAgB,GAAG,cANrB;AAAA,IAOEC,kBAAkB,GAAG,IAPvB;AAAA,IAQE;AACAC,cAAc,GAAG;AACfC,EAAAA,IAAI,EAAE,KADS;AAEfC,EAAAA,KAAK,EAAE;AAFQ,CATnB;AAAA,IAaEA,KAAK,GAAG,CAACF,cAAc,CAACE,KAb1B;AAAA,IAcEC,aAAa,GAAG;AACdC,EAAAA,SAAS,EAAE;AACTC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,KAAK,EAAE,SAFD;AAGNC,MAAAA,OAAO,EAAE,CAHH;AAINC,MAAAA,OAAO,EAAE,EAJH;AAKNP,MAAAA,KAAK,EAALA;AALM,KADC;AAQTQ,IAAAA,QAAQ,EAAE;AACRJ,MAAAA,IAAI,EAAE,IADE;AAERC,MAAAA,KAAK,EAAE,SAFC;AAGRC,MAAAA,OAAO,EAAE,CAHD;AAIRC,MAAAA,OAAO,EAAE,EAJD;AAKRP,MAAAA,KAAK,EAALA;AALQ;AARD,GADG;AAiBdS,EAAAA,WAAW,EAAE;AACXN,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,KAAK,EAAE,SAFD;AAGNC,MAAAA,OAAO,EAAE;AAHH,KADG;AAMXE,IAAAA,QAAQ,EAAE;AACRJ,MAAAA,IAAI,EAAE,IADE;AAERC,MAAAA,KAAK,EAAE,SAFC;AAGRC,MAAAA,OAAO,EAAE;AAHD;AANC,GAjBC;AA6BdI,EAAAA,SAAS,EAAE;AACTP,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE,IADA;AAENO,MAAAA,QAAQ,EAAE,EAFJ;AAGN;AACAC,MAAAA,UAAU,EAAE,IAJN;AAKNC,MAAAA,SAAS,EAAE,QALL;AAMNC,MAAAA,UAAU,EAAE,QANN;AAONT,MAAAA,KAAK,EAAE,SAPD;AAQNC,MAAAA,OAAO,EAAE,CARH;AASNC,MAAAA,OAAO,EAAE,EATH;AAUNQ,MAAAA,MAAM,EAAE,CAVF;AAWNC,MAAAA,KAAK,EAAE,QAXD;AAYNC,MAAAA,cAAc,EAAE,CAZV;AAaNC,MAAAA,SAAS,EAAE,CAbL;AAcNC,MAAAA,aAAa,EAAE,CAdT;AAeNC,MAAAA,aAAa,EAAE,EAfT;AAgBNC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,CAAC,EAAE,CADK;AAERC,QAAAA,CAAC,EAAEC,IAAI,CAACC,EAAL,GAAU,CAFL;AAGRC,QAAAA,CAAC,EAAEF,IAAI,CAACC,EAAL,GAAU;AAHL,OAhBJ;AAqBNE,MAAAA,KAAK,EAAE;AArBD,KADC;AAwBTnB,IAAAA,QAAQ,EAAE;AACRJ,MAAAA,IAAI,EAAE,IADE;AAERC,MAAAA,KAAK,EAAE,SAFC;AAGRM,MAAAA,QAAQ,EAAE,EAHF;AAIRC,MAAAA,UAAU,EAAE,IAJJ;AAKRC,MAAAA,SAAS,EAAE,QALH;AAMRC,MAAAA,UAAU,EAAE,QANJ;AAORR,MAAAA,OAAO,EAAE,CAPD;AAQRC,MAAAA,OAAO,EAAE,EARD;AASRQ,MAAAA,MAAM,EAAE,CATA;AAURC,MAAAA,KAAK,EAAE,QAVC;AAWRC,MAAAA,cAAc,EAAE,CAXR;AAYRC,MAAAA,SAAS,EAAE,CAZH;AAaRC,MAAAA,aAAa,EAAE,CAbP;AAcRC,MAAAA,aAAa,EAAE,EAdP;AAeRO,MAAAA,KAAK,EAAE,CAfC;AAgBRN,MAAAA,QAAQ,EAAE;AACRC,QAAAA,CAAC,EAAE,CADK;AAERC,QAAAA,CAAC,EAAEC,IAAI,CAACC,EAAL,GAAU,CAFL;AAGRC,QAAAA,CAAC,EAAEF,IAAI,CAACC,EAAL,GAAU;AAHL;AAhBF;AAxBD,GA7BG;AA4EdG,EAAAA,SAAS,EAAE;AACTxB,IAAAA,IAAI,EAAE,KADG;AAETyB,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFC;AAGTC,IAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,CAHA;AAITC,IAAAA,MAAM,EAAE,IAJC;AAKTC,IAAAA,WAAW,EAAE,CALJ;AAMTC,IAAAA,MAAM,EAAE,SANC;AAOTC,IAAAA,OAAO,EAAE,CAPA;AAQTb,IAAAA,QAAQ,EAAE;AACRC,MAAAA,CAAC,EAAE,CADK;AAERC,MAAAA,CAAC,EAAEC,IAAI,CAACC,EAAL,GAAU,CAFL;AAGRC,MAAAA,CAAC,EAAEF,IAAI,CAACC,EAAL,GAAU;AAHL,KARD;AAaTU,IAAAA,UAAU,EAAE,SAbH;AAcT7B,IAAAA,OAAO,EAAE,CAdA;AAeT8B,IAAAA,SAAS,EAAE,mBAfF;AAgBT1B,IAAAA,SAAS,EAAE;AACTL,MAAAA,KAAK,EAAE,SADE;AAETO,MAAAA,UAAU,EAAE,YAFH;AAGTE,MAAAA,UAAU,EAAE,QAHH;AAITD,MAAAA,SAAS,EAAE,QAJF;AAKTF,MAAAA,QAAQ,EAAE,EALD;AAMT0B,MAAAA,UAAU,EAAE,EANH;AAOTC,MAAAA,UAAU,EAAE,QAPH;AAQTC,MAAAA,SAAS,EAAE,QARF;AASTC,MAAAA,YAAY,EAAE;AATL;AAhBF;AA5EG,CAdlB;AAAA,IAuHEC,cAAc,GAAG;AACfC,EAAAA,SAAS,EAAE,KADI;AAEfC,EAAAA,eAAe,EAAE/C,gBAFF;AAGfgD,EAAAA,iBAAiB,EAAE/C,kBAHJ;AAIfG,EAAAA,KAAK,EAALA,KAJe;AAKf;AACA6C,EAAAA,MAAM,EAAE,CANO;AAOf;AACA;AACA;AACAC,EAAAA,KAAK,EAAE,IAVQ;AAWfC,EAAAA,GAAG,EAAE,KAXU;AAYfC,EAAAA,QAAQ,EAAE,IAZK;AAYC;AAChBb,EAAAA,UAAU,EAAE,SAbG;AAcf7B,EAAAA,OAAO,EAAE,CAdM;AAef2C,EAAAA,QAAQ,EAAE,KAfK;AAgBfnB,EAAAA,OAAO,EAAE,EAhBM;AAiBfoB,EAAAA,cAAc,EAAE;AAAC5B,IAAAA,CAAC,EAAE,GAAJ;AAASC,IAAAA,CAAC,EAAE,CAAZ;AAAeG,IAAAA,CAAC,EAAE;AAAlB,GAjBD;AAkBf;AACA;AACA;AACAyB,EAAAA,MAAM,EAAE3B,IAAI,CAACC,EAAL,GAAU,CArBH;AAsBfI,EAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAtBO;AAuBfuB,EAAAA,IAAI,EAAE,IAvBS;AAwBfC,EAAAA,UAAU,EAAE,IAxBG;AAyBfC,EAAAA,KAAK,EAAE;AACLjD,IAAAA,KAAK,EAAE,QADF;AAELkD,IAAAA,SAAS,EAAE;AAFN,GAzBQ;AA6BfC,EAAAA,UAAU,EAAE;AACVnD,IAAAA,KAAK,EAAE,QADG;AAEVkD,IAAAA,SAAS,EAAE,GAFD;AAGVE,IAAAA,QAAQ,EAAE,GAHA;AAIVC,IAAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR;AAJA,GA7BG;AAmCfC,EAAAA,OAAO,EAAE,EAnCM;AAmCF;AACbC,EAAAA,GAAG,EAAE,EApCU;AAqCfC,EAAAA,WAAW,EAAE,IArCE;AAsCfC,EAAAA,OAAO,EAAE,IAtCM;AAuCfC,EAAAA,QAAQ,EAAE,IAvCK;AAwCfC,EAAAA,QAAQ,EAAE,IAxCK;AAyCfC,EAAAA,SAAS,EAAE,IAzCI;AA0CfC,EAAAA,OAAO,EAAE,EA1CM;AA2CfC,EAAAA,oBAAoB,EAAE,KA3CP;AA4CfC,EAAAA,gBAAgB,EAAE,KA5CH;AA6CfC,EAAAA,eAAe,EAAE,KA7CF;AA8CfC,EAAAA,QAAQ,EAAE;AACR5B,IAAAA,SAAS,EAAE,KADH;AAER6B,IAAAA,IAAI,EAAE,IAFE;AAGRC,IAAAA,QAAQ,EAAE,IAHF;AAIRC,IAAAA,OAAO,EAAE;AAJD;AA9CK,CAvHnB;;IA6KMC,K;;;;;AACJ,iBAAYC,EAAZ,EAAgBC,OAAhB,EAAyBC,OAAzB,EAAkC;AAAA;;AAAA;;AAChC,QAAID,OAAO,CAACE,IAAR,KAAiB,mBAArB,EAA0C;AACxC,YAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;AACD;;AACD,QAAIF,OAAO,CAAC7E,KAAZ,EAAmB;AACjBC,MAAAA,aAAa,CAACC,SAAd,CAAwBC,MAAxB,CAA+BH,KAA/B,GAAuC6E,OAAO,CAAC7E,KAA/C;AACAC,MAAAA,aAAa,CAACC,SAAd,CAAwBM,QAAxB,CAAiCR,KAAjC,GAAyC6E,OAAO,CAAC7E,KAAjD;AACD;;AACD,QAAMgF,IAAI,GAAG1G,KAAK,CAAC,EAAD,EAAK2B,aAAL,EAAoBwC,cAApB,EAAoCoC,OAApC,CAAlB;AACA,+EAAMF,EAAN,EAAUK,IAAV;AACA,UAAKC,aAAL,GAAqBD,IAAI,CAAChF,KAA1B;;AACA,QAAI,MAAKkF,OAAT,EAAkB;AAChB,YAAKA,OAAL,CAAa9E,IAAb;AACD,KAFD,MAEO;AACL,YAAK8E,OAAL,GAAe,IAAI9F,OAAJ,CAAY,MAAKuF,EAAjB,CAAf;AACD;;AACD,UAAK7E,cAAL,GAAsBA,cAAtB;AACA,UAAKqF,QAAL,GAAgB5G,SAAS,CAACyG,IAAD,CAAzB;AACA,UAAKJ,OAAL,GAAenG,MAAM,CAACF,SAAS,CAACqG,OAAD,CAAV,CAArB;AACA,UAAK3E,aAAL,GAAqBzB,IAAI,CAACwG,IAAD,EAAO,aAAY/E,aAAZ,CAAP,CAAzB;;AACA,UAAKmF,IAAL;;AApBgC;AAqBjC;;;;;;;;;;;;;uBAGO,KAAKC,aAAL,E;;;;uBACA,KAAKC,cAAL,E;;;AACN,qBAAKC,eAAL;AACA,qBAAKC,QAAL;AACA,qBAAKC,KAAL,CAAW,IAAX;;;;;;;;;;;;;;;;;;;;;gDAGeb,O,EAASC,O;;;;;;;;;sBACpBD,OAAO,CAACE,IAAR,KAAiB,mB;;;;;AACnB;uBAAsB,CAAC,IAAD,EAAOF,OAAP,C;AAApBA,gBAAAA,O;AAASC,gBAAAA,O;;;;;AAEX,qBAAKD,OAAL,GAAenG,MAAM,CAACmG,OAAD,CAArB;;uBACM,KAAKU,cAAL,E;;;AAGR,6BAAY7C,cAAZ,EAA4BiD,OAA5B,CAAoC,UAAAC,GAAG,EAAI;AACzC,kBAAA,MAAI,CAACd,OAAL,GAAepC,cAAc,CAACkD,GAAD,CAA7B;AACD,iBAFD;;AAGA,qBAAK3B,QAAL,GAAgB,IAAhB;AACA,qBAAKD,QAAL,GAAgB,IAAhB;AACA,qBAAKc,OAAL,GAAevG,KAAK,CAAC,KAAKuG,OAAN,EAAe5E,aAAf,EAA8B1B,SAAS,CAACsG,OAAD,CAAvC,CAApB;AAEA,qBAAKM,QAAL,GAAgB5G,SAAS,CAAC,KAAKsG,OAAN,CAAzB;AACA,qBAAKe,KAAL;AACA,qBAAKH,KAAL;;;;;;;;;;;;;;;;;;+BAGSZ,O,EAAS;AAClB,WAAK,IAAIc,GAAT,IAAgBd,OAAhB,EAAyB;AACvB,YAAIc,GAAG,KAAK,OAAZ,EAAqB;AACnB;AACAd,UAAAA,OAAO,CAAC7E,KAAR,GAAiBF,cAAc,CAACE,KAAf,GAAuBF,cAAc,CAACC,IAAvC,IAAgD8E,OAAO,CAAC7E,KAAR,GAAgBF,cAAc,CAACE,KAA/E,IAAwF,CAAxG;AACD,SAHD,MAGO,IAAIpB,OAAO,CAACiG,OAAO,CAACc,GAAD,CAAR,CAAP,KAA0B,QAA9B,EAAwC;AAC7C,eAAKE,UAAL,CAAgBhB,OAAO,CAACc,GAAD,CAAvB;AACD;AACF;AACF;;;;;;gDAEWP,I;;;;;;;gCACa,KAAKP,O,EAArBjB,G,iBAAAA,G,EAAKE,O,iBAAAA,O;AACZ,qBAAKgC,aAAL,CAAmBlC,GAAnB,EAAwB,KAAK3D,aAA7B;AAEA,qBAAK4F,UAAL,CAAgB,KAAKhB,OAArB;AACA,qBAAKf,OAAL,GAAe,IAAIzE,OAAJ,CAAY,IAAZ,EAAkByE,OAAO,IAAI,EAA7B,CAAf;;uBAEM,KAAKiC,aAAL,E;;;;uBACA,KAAKC,WAAL,E;;;AAEN,qBAAKC,OAAL;AACA,qBAAKC,WAAL;AAEA,qBAAKC,kBAAL,CAAwB,WAAxB,EAAqC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAArC,EAAgE,KAAKC,UAArE;AACA,qBAAKH,kBAAL,CAAwB,UAAxB,EAAoC,KAAKI,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAApC,EAA8D,KAAKC,UAAnE;AAEA,qBAAKH,kBAAL,CAAwB,OAAxB,EAAiC,KAAKK,KAAL,CAAWH,IAAX,CAAgB,IAAhB,CAAjC,EAAwD,KAAKC,UAA7D;AAEAlB,gBAAAA,IAAI,IAAI,KAAKqB,OAAL,EAAR;AACA,qBAAKC,IAAL,CAAU,OAAV,EAAmB,IAAnB;AACA,qBAAKxB,OAAL,IAAgB,KAAKA,OAAL,CAAayB,IAAb,EAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAIK,KAAK9B,OAAL,CAAaZ,S;;;;;;;;AAClB,iBAAC,KAAK2C,MAAN,IAAgB,KAAKC,SAAL,EAAhB;;uBAC0B;AAAO;AAAqC,+CAA5C,C;;;;AAAnBC,gBAAAA,S,SAAAA,S;AAEP,qBAAKC,uBAAL;;uBACuBD,SAAS,CAAC,KAAKE,SAAN,oBAC3B,KAAKnC,OAAL,CAAaZ,SADc;AAE9BgD,kBAAAA,OAAO,EAAE,KAAKC,GAFgB;AAG9BN,kBAAAA,MAAM,EAAE,KAAKA;AAHiB,mB;;;AAAhC,qBAAK3C,S;wCAKqB,KAAKA,SAAL,CAAeY,O,EAAlCsC,S,yBAAAA,S,EAAWrC,I,yBAAAA,I;;AAClB,oBAAIqC,SAAS,KAAK,SAAlB,EAA6B;AAC3B,uBAAKtC,OAAL,CAAab,QAAb,CAAsBoD,IAAtB,CAA2B1B,OAA3B,CAAmC,UAAA2B,IAAI,EAAI;AAAA,wBAClCC,KADkC,GACzBD,IAAI,CAACD,IADoB,CAClCE,KADkC;AAEzCD,oBAAAA,IAAI,CAAChH,KAAL,GAAa,MAAI,CAAC4D,SAAL,CAAesD,QAAf,CAAwBD,KAAxB,CAAb;AACD,mBAHD;AAID,iBALD,MAKO,IAAIH,SAAS,KAAK,KAAlB,EAAyB;AACxBK,kBAAAA,UADwB,GACX,KAAK3C,OAAL,CAAajB,GADF;AAG9B,uBAAK6D,SAAL,GAAiB,EAAjB;;AACA,+BAAYD,UAAZ,EAAwB9B,OAAxB,CAAgC,UAAAC,GAAG,EAAI;AACrC,wBAAM2B,KAAK,GAAG,CAACE,UAAU,CAAC7B,GAAD,CAAV,CAAgByB,IAAhB,IAAwB,EAAzB,EAA6BE,KAA7B,IAAsC,CAApD;AAAA,wBACEjH,KAAK,GAAG,MAAI,CAAC4D,SAAL,CAAesD,QAAf,CAAwBD,KAAxB,CADV;;AAEAE,oBAAAA,UAAU,CAAC7B,GAAD,CAAV,CAAgBzF,SAAhB,CAA0BC,MAA1B,CAAiCE,KAAjC,GAAyCA,KAAzC;AACAmH,oBAAAA,UAAU,CAAC7B,GAAD,CAAV,CAAgBzF,SAAhB,CAA0BwH,QAA1B,GAAqC;AACnCrH,sBAAAA,KAAK,EAAE,MAAI,CAAC4D,SAAL,CAAeY,OAAf,CAAuB8C;AADK,qBAArC;AAGA,oBAAA,MAAI,CAACF,SAAL,CAAe9B,GAAf,IAAsB2B,KAAtB;AACD,mBARD;AASD;;AACD,oBAAIxC,IAAI,KAAK,WAAb,EAA0B;AACxB,uBAAKb,SAAL,CAAe2D,EAAf,CAAkB,OAAlB,EAA2B,KAAKC,uBAAL,CAA6BxB,IAA7B,CAAkC,IAAlC,CAA3B;AACD,iBAFD,MAEO,IAAIvB,IAAI,KAAK,YAAb,EAA2B;AAChC,uBAAKb,SAAL,CAAe2D,EAAf,CAAkB,WAAlB,EAA+B,KAAKE,4BAAL,CAAkCzB,IAAlC,CAAuC,IAAvC,CAA/B;AACA,uBAAKpC,SAAL,CAAe2D,EAAf,CAAkB,SAAlB,EAA6B,KAAKG,0BAAL,CAAgC1B,IAAhC,CAAqC,IAArC,CAA7B;AACA,uBAAKpC,SAAL,CAAe2D,EAAf,CAAkB,QAAlB,EAA4B,KAAKI,sBAAL,CAA4B3B,IAA5B,CAAiC,IAAjC,CAA5B;AACD;;AAED,qBAAKpC,SAAL,CAAe2D,EAAf,CAAkB,WAAlB,EAA+B,KAAKK,kBAAL,CAAwB5B,IAAxB,CAA6B,IAA7B,CAA/B;AACA,qBAAKpC,SAAL,CAAe2D,EAAf,CAAkB,UAAlB,EAA8B,KAAKM,iBAAL,CAAuB7B,IAAvB,CAA4B,IAA5B,CAA9B;;;;;;;;;;;;;;;;;;gCAGU;AAAA,0BACgBtH,YAAY,CAAC,KAAKoJ,YAAL,CAAkBC,KAAnB,EAA0B,KAAKD,YAAL,CAAkBpH,MAA5C,CAD5B;AAAA,UACHkG,OADG,iBACHA,OADG;AAAA,UACML,MADN,iBACMA,MADN;;AAEV,WAAKM,GAAL,GAAWD,OAAX;AACA,WAAKL,MAAL,GAAcA,MAAd;AACA,WAAKI,SAAL,CAAeqB,WAAf,CAA2BzB,MAA3B;AACAjI,MAAAA,SAAS,CAAC,KAAKiI,MAAN,EAAc;AACrBlD,QAAAA,QAAQ,EAAE,UADW;AAErB;AACA4E,QAAAA,IAAI,EAAE,CAHe;AAIrBC,QAAAA,GAAG,EAAE;AAJgB,OAAd,CAAT;AAMD;;;oCAEe;AACd,UAAI,KAAK3B,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYwB,KAAZ,GAAoB,KAAKD,YAAL,CAAkBC,KAAtC;AACA,aAAKxB,MAAL,CAAY7F,MAAZ,GAAqB,KAAKoH,YAAL,CAAkBpH,MAAvC;AACD;AACF;;;6BAEQ;AACP,WAAKyH,aAAL;AACA,WAAKvE,SAAL,IAAkB,KAAKA,SAAL,CAAewE,MAAf,EAAlB;AACD;;;;;;;;;;;;oBAGM,KAAK5D,OAAL,CAAab,Q;;;;;;;;;uBACI;AAAO;AAAkC,4CAAzC,C;;;AAAhB0E,gBAAAA,O;AACN,qBAAKA,OAAL,GAAeA,OAAO,CAACC,OAAvB;AACA,iBAAC,KAAK9D,OAAL,CAAanC,SAAd,IAA2B,KAAKkG,WAAL,EAA3B;;;;;;;;;;;;;;;;;;kCAGY;AACZ,WAAK5E,QAAL,GAAgB,IAAI,KAAK0E,OAAT,CAAiB,IAAjB,EAAuB,KAAK7D,OAAL,CAAab,QAApC,CAAhB;;AAEA,UAAI,KAAK6E,oBAAT,EAA+B;AAC7B,aAAK7E,QAAL,CAAc8E,eAAd,mBACK,KAAKD,oBADV;AAEEzI,UAAAA,IAAI,EAAE,IAFR;AAGE2I,UAAAA,SAAS,EAAE;AAHb;AAKA,aAAKF,oBAAL,GAA4B,IAA5B;AACD;AACF;;;;;;;;;;;;AAGOhE,gBAAAA,O,GAAU,KAAKA,OAAL,CAAad,Q;;oBACxBc,O;;;;;;;;;uBACiB;AAAO;AAAkC,4CAAzC,C;;;AAAhBmE,gBAAAA,O;AACN,qBAAKA,OAAL,GAAeA,OAAO,CAACL,OAAvB;AACA,iBAAC,KAAK9D,OAAL,CAAanC,SAAd,KAA4B,KAAKqB,QAAL,GAAgB,IAAI,KAAKiF,OAAT,CAAiB,IAAjB,EAAuBnE,OAAvB,CAA5C;;;;;;;;;;;;;;;;;;8CAGwB;AAAA,kCACU,KAAKA,OAAL,CAAaZ,SADvB;AAAA,UACnBgF,GADmB,yBACnBA,GADmB;AAAA,UACdC,GADc,yBACdA,GADc;AAAA,UACT/B,SADS,yBACTA,SADS;AAAA,UACErC,IADF,yBACEA,IADF;AAAA,UAEtBsC,IAFsB;AAGxBD,MAAAA,SAAS,GAAGA,SAAS,KAAKrC,IAAI,KAAK,WAAT,GAAuB,SAAvB,GAAmC,KAAxC,CAArB;;AACA,UAAIqC,SAAS,KAAK,SAAlB,EAA6B;AAC3BC,QAAAA,IAAI,GAAG,KAAKvC,OAAL,CAAab,QAAb,CAAsBoD,IAA7B;AACD;;AACD,UAAID,SAAS,KAAK,KAAlB,EAAyB;AACvBC,QAAAA,IAAI,GAAG,KAAKvC,OAAL,CAAajB,GAApB;AACD;;AACD,UAAI,CAACqF,GAAL,EAAUA,GAAG,GAAG,KAAKE,UAAL,CAAgB/B,IAAhB,CAAN;AACV,UAAI,CAAC8B,GAAL,EAAUA,GAAG,GAAG,KAAKE,UAAL,CAAgBhC,IAAhB,CAAN;;AAEV,qBAAc,KAAKvC,OAAL,CAAaZ,SAA3B,EAAsC;AAACgF,QAAAA,GAAG,EAAHA,GAAD;AAAMC,QAAAA,GAAG,EAAHA;AAAN,OAAtC;AACD;;;+BAEU9B,I,EAAM;AACf,aAAO,eAAcA,IAAd,IACHA,IAAI,CAACiC,MAAL,CAAY,UAACC,IAAD,EAAOC,GAAP,EAAe;AACzB,YAAMjC,KAAK,GAAG,CAACiC,GAAG,CAACnC,IAAJ,IAAY,EAAb,EAAiBE,KAAjB,IAA0B,CAAxC;AACA,eAAOgC,IAAI,GAAGhC,KAAP,GAAeA,KAAf,GAAuBgC,IAA9B;AACD,OAHD,EAGG,CAHH,CADG,GAKH,aAAYlC,IAAZ,EAAkBiC,MAAlB,CAAyB,UAACC,IAAD,EAAOC,GAAP,EAAe;AACtC,YAAMjC,KAAK,GAAG,CAACF,IAAI,CAACmC,GAAD,CAAJ,CAAUnC,IAAV,IAAkB,EAAnB,EAAuBE,KAAvB,IAAgC,CAA9C;AACA,eAAOgC,IAAI,GAAGhC,KAAP,GAAeA,KAAf,GAAuBgC,IAA9B;AACD,OAHD,EAGG,CAHH,CALJ;AASD;;;+BAEUlC,I,EAAM;AACf,aAAO,eAAcA,IAAd,IACHA,IAAI,CAACiC,MAAL,CAAY,UAACC,IAAD,EAAOC,GAAP,EAAe;AACzB,YAAMjC,KAAK,GAAG,CAACiC,GAAG,CAACnC,IAAJ,IAAY,EAAb,EAAiBE,KAAjB,IAA0B,CAAxC;AACA,eAAOgC,IAAI,GAAGhC,KAAP,GAAeA,KAAf,GAAuBgC,IAA9B;AACD,OAHD,EAGG,CAHH,CADG,GAKH,aAAYlC,IAAZ,EAAkBiC,MAAlB,CAAyB,UAACC,IAAD,EAAOC,GAAP,EAAe;AACtC,YAAMjC,KAAK,GAAG,CAACF,IAAI,CAACmC,GAAD,CAAJ,CAAUnC,IAAV,IAAkB,EAAnB,EAAuBE,KAAvB,IAAgC,CAA9C;AACA,eAAOgC,IAAI,GAAGhC,KAAP,GAAeA,KAAf,GAAuBgC,IAA9B;AACD,OAHD,EAGG,CAHH,CALJ;AASD;;;gCAEWzE,O,EAAyB;AAAA,UAAhB2E,OAAgB,uEAAN,IAAM;;AACnC,UAAI,KAAKxF,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcyF,UAAd,CAAyB5E,OAAzB,EAAkC2E,OAAlC;AACD,OAFD,MAEO;AACL,aAAKxF,QAAL,GAAgB,IAAI,KAAK0E,OAAT,CAAiB,IAAjB,EAAuB7D,OAAvB,CAAhB;AACD;AACF;;;gCAEWA,O,EAAyB;AAAA,UAAhB2E,OAAgB,uEAAN,IAAM;;AACnC,UAAI,KAAKzF,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAc0F,UAAd,CAAyB5E,OAAzB,EAAkC2E,OAAlC;AACD,OAFD,MAEO;AACL,aAAKzF,QAAL,GAAgB,IAAI,KAAKiF,OAAT,CAAiB,IAAjB,EAAuBnE,OAAvB,CAAhB;AACD;AACF;;;kCAEajB,G,EAAK3D,a,EAAe;AAChC,WAAK,IAAIyJ,IAAT,IAAiB9F,GAAjB,EAAsB;AACpB,YAAIA,GAAG,CAAC8F,IAAD,CAAH,IAAa9K,OAAO,CAACgF,GAAG,CAAC8F,IAAD,CAAJ,CAAP,KAAuB,QAAxC,EAAkD;AAChD9F,UAAAA,GAAG,CAAC8F,IAAD,CAAH,GAAYpL,KAAK,CAAC,EAAD,EAAK2B,aAAL,EAAoB2D,GAAG,CAAC8F,IAAD,CAAvB,CAAjB;AACD,SAFD,MAEO;AACL9F,UAAAA,GAAG,CAAC8F,IAAD,CAAH,GAAYzJ,aAAZ;AACD;AACF;AACF;;;sCAEiB;AAChB,WAAK0J,UAAL,GAAkB9K,eAAe,CAAC,IAAIR,KAAK,CAACuL,UAAV,EAAD,CAAjC;AACA,WAAKC,aAAL,GAAqBhL,eAAe,CAAC,IAAIR,KAAK,CAACyL,aAAV,EAAD,CAApC;AACD;;;6BAEQ;AACP,WAAK5E,OAAL,IAAgB,KAAKA,OAAL,CAAa6E,OAA7B,IAAwC,KAAK7E,OAAL,CAAayB,IAAb,EAAxC;AACA,WAAK3C,QAAL,IAAiB,KAAKA,QAAL,CAAcgG,MAAd,EAAjB;AACA,WAAKjG,QAAL,IAAiB,KAAKA,QAAL,CAAciG,MAAd,EAAjB;;AACA,UAAI,CAAC,KAAKC,QAAV,EAAoB;AAClB,aAAKC,aAAL,IAAsB,KAAKA,aAAL,CAAmBC,MAAnB,EAAtB;AACA,aAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBD,MAAjB,EAApB;AACD;AACF;;;kCAEa;AACZ,WAAKjF,OAAL,IAAgB,KAAKA,OAAL,CAAamF,OAAb,EAAhB;AACA,WAAKpG,SAAL,IAAkB,KAAKA,SAAL,CAAeoG,OAAf,EAAlB;AACA,WAAKvG,OAAL,IAAgB,KAAKA,OAAL,CAAauG,OAAb,EAAhB;AACA,WAAKC,GAAL,CAAS,OAAT;AACA,WAAKA,GAAL,CAAS,OAAT;AACA,WAAKA,GAAL,CAAS,WAAT;AACD;;;0BAEKC,K,EAAO;AACX,UAAMN,QAAQ,GAAG,CAAC,KAAKpF,OAAL,CAAanC,SAAd,GAA0B,IAA1B,GAAiC,KAAKuH,QAAvD;AACA,UAAI,CAACA,QAAL,EAAe;AACf,UAAMO,KAAK,GAAG,KAAKC,iBAAL,CAAuBF,KAAvB,CAAd;AACA,UAAI,KAAKG,kBAAT,EAA6B;AAC7B,WAAKhE,IAAL,CAAU,OAAV,EAAmB8D,KAAnB;;AACA,UAAI,CAAC,KAAK3F,OAAL,CAAaT,gBAAlB,EAAoC;AAClC,YAAI,KAAK1E,UAAL,KAAoB,KAAKA,UAAL,MAAqB8K,KAAzC,IAAkD,KAAK9K,UAAL,EAAiBiL,QAAvE,EAAiF;AAC/E,eAAKC,mBAAL,CAAyB,KAAKlL,UAAL,CAAzB,EAA2C,QAA3C;AACA8K,UAAAA,KAAK,CAACG,QAAN,GAAiB,KAAjB;AACA,eAAKjL,UAAL,IAAmB,IAAnB;AACA;AACD;;AACD,YAAI,CAAC8K,KAAL,EAAY;AACV,cAAI,KAAK9K,UAAL,CAAJ,EAAsB;AACpB,iBAAKA,UAAL,EAAiBiL,QAAjB,GAA4B,KAA5B;AACA,iBAAKC,mBAAL,CAAyB,KAAKlL,UAAL,CAAzB,EAA2C,QAA3C;AACA,iBAAKA,UAAL,IAAmB,IAAnB;AACD;;AACD;AACD;;AACD,aAAKA,UAAL,MAAqB,KAAKA,UAAL,EAAiBiL,QAAjB,GAA4B,KAAjD;AACA,aAAKE,aAAL,CAAmBL,KAAnB,EAA0B9K,UAA1B;AACA8K,QAAAA,KAAK,CAACG,QAAN,GAAiB,IAAjB;AACD;AACF;;;8BAESJ,K,EAAO;AACf,UAAMN,QAAQ,GAAG,CAAC,KAAKpF,OAAL,CAAanC,SAAd,GAA0B,IAA1B,GAAiC,KAAKuH,QAAvD;AACA,UAAI,CAACA,QAAL,EAAe;AACf,UAAMO,KAAK,GAAG,KAAKC,iBAAL,CAAuBF,KAAvB,CAAd;AACA,WAAK7D,IAAL,CAAU,WAAV,EAAuB8D,KAAvB;;AACA,UAAI,CAAC,KAAK3F,OAAL,CAAaV,oBAAlB,EAAwC;AACtC,YAAI,CAACqG,KAAL,EAAY;AACV,cAAI,CAAC,KAAK3F,OAAL,CAAaP,QAAb,CAAsB5B,SAA3B,EAAsC;AACpC,gBAAI,KAAKjD,UAAL,KAAoB,KAAKA,UAAL,MAAqB,KAAKC,UAAL,CAA7C,EAA+D;AAC7D,mBAAKkL,mBAAL,CAAyB,KAAKnL,UAAL,CAAzB,EAA2C,QAA3C;AACA,mBAAKA,UAAL,IAAmB,IAAnB;AACD;;AACD,iBAAKqE,OAAL,CAAae,OAAb,CAAqBsC,SAArB,KAAmC,MAAnC,IAA6C,KAAKrD,OAAL,CAAa6C,IAAb,CAAkB4D,KAAlB,CAA7C;AACD;;AAED,WAAC,KAAKG,kBAAN,KAA6B,KAAK1D,SAAL,CAAehG,KAAf,CAAqB8J,MAArB,GAA8B,SAA3D;AAEA,eAAKC,gBAAL;AACA;AACD;;AAEDC,QAAAA,aAAa,CAAC,KAAKC,aAAN,CAAb;;AACA,YAAI,KAAKC,eAAT,EAA0B;AACxB,eAAKD,aAAL,GAAqB,IAArB;AACA,eAAKE,gBAAL,GAAwB,KAAKD,eAAL,CAAqBE,SAArB,CAA+B,UAAA1B,IAAI;AAAA,mBAAIA,IAAI,KAAKc,KAAK,CAACd,IAAnB;AAAA,WAAnC,KAA+D,KAAKyB,gBAA5F;AACD;;AAED,aAAKrH,OAAL,CAAae,OAAb,CAAqBsC,SAArB,KAAmC,MAAnC,IACE,KAAKrD,OAAL,CAAa1D,IAAb,CAAkB;AAChB0E,UAAAA,IAAI,EAAExF,IADU;AAEhB8H,UAAAA,IAAI,EAAEoD,KAAK,CAACpD,IAFI;AAGhBiE,UAAAA,MAAM,EAAEb,KAHQ;AAIhBD,UAAAA,KAAK,EAALA;AAJgB,SAAlB,CADF;AAOA,aAAKvD,SAAL,CAAehG,KAAf,CAAqB8J,MAArB,GAA8B,SAA9B;AACA,YAAI,KAAKrL,UAAL,MAAqB+K,KAAzB,EAAgC;;AAChC,YAAI,KAAK9K,UAAL,MAAqB8K,KAAzB,EAAgC;AAC9B,eAAKK,aAAL,CAAmBL,KAAnB,EAA0B/K,UAA1B;AACD,SAFD,MAEO;AACL,cAAI,KAAKA,UAAL,KAAoB,CAAC,KAAKA,UAAL,EAAiBkL,QAA1C,EAAoD;AAClD,iBAAKC,mBAAL,CAAyB,KAAKnL,UAAL,CAAzB,EAA2C,QAA3C;AACA,iBAAKA,UAAL,IAAmB,IAAnB;AACD;AACF;AACF;AACF;;;6BAEQ8K,K,EAAO;AACd,UAAI,KAAK9K,UAAL,KAAoB,CAAC,KAAKoF,OAAL,CAAaP,QAAb,CAAsB5B,SAA/C,EAA0D;AACxD,aAAKkI,mBAAL,CAAyB,KAAKnL,UAAL,CAAzB,EAA2C,QAA3C;AACA,aAAKA,UAAL,IAAmB,IAAnB;AACA,aAAKqE,OAAL,CAAae,OAAb,CAAqBsC,SAArB,KAAmC,MAAnC,IAA6C,KAAKrD,OAAL,CAAa6C,IAAb,CAAkB4D,KAAlB,CAA7C;AACD;;AACD,WAAKQ,gBAAL;AACD;;;uCAEkB;AACjB,UAAMd,QAAQ,GAAG,CAAC,KAAKpF,OAAL,CAAanC,SAAd,GAA0B,IAA1B,GAAiC,KAAKuH,QAAvD;;AACA,UAAIA,QAAQ,IAAI,CAAC,KAAKgB,aAAtB,EAAqC;AACnC,aAAKK,eAAL;AACD;AACF;;;2CAEsBC,M,EAAQC,M,EAAQ;AACrC,WAAKd,kBAAL,GAA0B,IAA1B;AADqC,UAE9BzB,GAF8B,GAElBsC,MAFkB,CAE9BtC,GAF8B;AAAA,UAEzBC,GAFyB,GAElBqC,MAFkB,CAEzBrC,GAFyB;AAAA,UAGnC/B,SAHmC,GAGvB,KAAKlD,SAAL,CAAeY,OAAf,CAAuBsC,SAHA;;AAIrC,UAAIA,SAAS,KAAK,SAAlB,EAA6B;AAC3B,YAAI,KAAKnD,QAAT,EAAmB;AACjB,eAAKA,QAAL,CAAc8E,eAAd,CAA8B;AAC5BG,YAAAA,GAAG,EAAHA,GAD4B;AAE5BC,YAAAA,GAAG,EAAHA,GAF4B;AAG5B9I,YAAAA,IAAI,EAAE,IAHsB;AAI5B2I,YAAAA,SAAS,EAAE;AAJiB,WAA9B;AAMD,SAPD,MAOO;AACL,eAAKF,oBAAL,GAA4B;AAACI,YAAAA,GAAG,EAAHA,GAAD;AAAMC,YAAAA,GAAG,EAAHA;AAAN,WAA5B;AACD;AACF,OAXD,MAWO,IAAI/B,SAAS,KAAK,KAAlB,EAAyB;AAC9B,aAAKsE,uBAAL,CAA6BxC,GAA7B,EAAkCC,GAAlC,EAAuC,QAAvC;AACD;AACF;;;mDAE8B;AAC7B,WAAKwB,kBAAL,GAA0B,IAA1B;AACA,WAAK1H,QAAL,CAAc0I,OAAd,GAAwB,KAAxB;AACD;;;iDAE4B;AAC3B,WAAK1I,QAAL,CAAc0I,OAAd,GAAwB,IAAxB;AACA,WAAKhB,kBAAL,GAA0B,KAA1B;AACD;;;4CAEuBa,M,EAAQ;AAAA;;AAAA,UACvBtC,GADuB,GACDsC,MADC,CACvBtC,GADuB;AAAA,UAClBC,GADkB,GACDqC,MADC,CAClBrC,GADkB;AAAA,UACbyB,QADa,GACDY,MADC,CACbZ,QADa;AAAA,UAE3BxD,SAF2B,GAEd,KAAKlD,SAAL,CAAeY,OAFD,CAE3BsC,SAF2B;AAG9B,WAAKuD,kBAAL,GAA0B,IAA1B;;AACA,UAAIvD,SAAS,KAAK,SAAlB,EAA6B;AAC3B,aAAKnD,QAAL,IACE,KAAKA,QAAL,CAAc8E,eAAd,CAA8B;AAC5BG,UAAAA,GAAG,EAAHA,GAD4B;AAE5BC,UAAAA,GAAG,EAAHA,GAF4B;AAG5BnJ,UAAAA,IAAI,EAAE,IAHsB;AAI5BK,UAAAA,IAAI,EAAEuK;AAJsB,SAA9B,CADF;AAOD,OARD,MAQO,IAAIxD,SAAS,KAAK,KAAlB,EAAyB;AAC9B,YAAMrC,IAAI,GAAG,CAAC6F,QAAD,GAAY,UAAZ,GAAyB,QAAtC;;AACA,qBAAY,KAAKlD,SAAjB,EAA4B/B,OAA5B,CAAoC,UAAAgE,IAAI,EAAI;AAC1C,cAAMpC,KAAK,GAAG,MAAI,CAACG,SAAL,CAAeiC,IAAf,CAAd;AAAA,cACEc,KAAK,GAAG,MAAI,CAACmB,KAAL,CAAWC,eAAX,CAA2BlC,IAA3B,CADV;;AAEA,cAAIpC,KAAK,IAAI2B,GAAT,IAAgB3B,KAAK,IAAI4B,GAA7B,EAAkC;AAChCsB,YAAAA,KAAK,CAAC9C,QAAN,GAAiB5C,IAAI,KAAK,UAA1B;;AACA,YAAA,MAAI,CAAC8F,mBAAL,CAAyBJ,KAAzB,EAAgC1F,IAAhC;AACD;AACF,SAPD;AAQD;AACF;;;uCAEkByG,M,EAAQM,G,EAAK;AAC9B,WAAKnB,kBAAL,GAA0B,IAA1B;AAD8B,mCAEJ,KAAKzG,SAAL,CAAeY,OAFX;AAAA,UAEvBsC,SAFuB,0BAEvBA,SAFuB;AAAA,UAEZrC,IAFY,0BAEZA,IAFY;AAAA,UAGvBmE,GAHuB,GAGDsC,MAHC,CAGvBtC,GAHuB;AAAA,UAGlBC,GAHkB,GAGDqC,MAHC,CAGlBrC,GAHkB;AAAA,UAGbyB,QAHa,GAGDY,MAHC,CAGbZ,QAHa;;AAK9B,UAAIxD,SAAS,KAAK,SAAlB,EAA6B;AAC3B,aAAKnD,QAAL,IACE,KAAKA,QAAL,CAAc8E,eAAd,CAA8B;AAC5BG,UAAAA,GAAG,EAAHA,GAD4B;AAE5BC,UAAAA,GAAG,EAAHA,GAF4B;AAG5BnJ,UAAAA,IAAI,EAAE,IAHsB;AAI5B+L,UAAAA,KAAK,EAAE,KAAK7H,SAAL,CAAeuH,MAAf,CAAsBM,KAJD;AAK5B1L,UAAAA,IAAI,EAAE0E,IAAI,KAAK,WAAT,GAAuB6F,QAAvB,GAAkC;AALZ,SAA9B,CADF;AAQD,OATD,MASO;AACL,YAAIxD,SAAS,KAAK,KAAlB,EAAyB;AACvB,cAAKrC,IAAI,KAAK,YAAT,IAAyByG,MAAM,CAACzG,IAAP,KAAgB,UAA1C,IAAyDA,IAAI,KAAK,WAAtE,EAAmF;AACjF,iBAAK2G,uBAAL,CAA6BxC,GAA7B,EAAkCC,GAAlC,EAAuC,WAAvC;AACD;AACF;AACF;;AACD,WAAK6C,mBAAL,GAA2B,KAA3B;AACD;;;wCAEmB;AAAA;;AAClB,UAAI,KAAKA,mBAAT,EAA8B;AADZ,UAEX5E,SAFW,GAEE,KAAKlD,SAAL,CAAeY,OAFjB,CAEXsC,SAFW;AAGlB,WAAKuD,kBAAL,GAA0B,KAA1B;;AACA,UAAIvD,SAAS,KAAK,SAAlB,EAA6B;AAC3B,aAAKnD,QAAL,IACE,KAAKA,QAAL,CAAc8E,eAAd,CAA8B;AAC5B/I,UAAAA,IAAI,EAAE;AADsB,SAA9B,CADF;AAID;;AACD,UAAIoH,SAAS,KAAK,KAAlB,EAAyB;AACvB,aAAK6E,cAAL,IACE,KAAKA,cAAL,CAAoBtG,OAApB,CAA4B,UAAAgE,IAAI,EAAI;AAClC,cAAMc,KAAK,GAAG,MAAI,CAACmB,KAAL,CAAWC,eAAX,CAA2BlC,IAA3B,CAAd;;AACAc,UAAAA,KAAK,IAAI,MAAI,CAACI,mBAAL,CAAyBJ,KAAzB,EAAgC,QAAhC,CAAT;AACD,SAHD,CADF;AAKD;;AACD,UAAI,CAAC,KAAKuB,mBAAV,EAA+B;AAC7B,aAAKA,mBAAL,GAA2B,IAA3B;AACD;AACF;;;4CAEuB9C,G,EAAKC,G,EAAK+C,S,EAAW;AAAA;;AAC3C,UAAMC,YAAY,GAAG;AACnBC,QAAAA,SAAS,EAAE,CAAC,UAAD,EAAa,QAAb,CADQ;AAEnBC,QAAAA,MAAM,EAAE,CAAC,QAAD,EAAW,UAAX,CAFW,CAEY;;AAFZ,OAArB;AAIAH,MAAAA,SAAS,KAAK,WAAd,KAA8B,KAAKD,cAAL,GAAsB,EAApD;;AAEA,mBAAY,KAAKvE,SAAjB,EAA4B/B,OAA5B,CAAoC,UAAAgE,IAAI,EAAI;AAC1C,YAAMpC,KAAK,GAAG,MAAI,CAACG,SAAL,CAAeiC,IAAf,CAAd;AAAA,YACEc,KAAK,GAAG,MAAI,CAACmB,KAAL,CAAWC,eAAX,CAA2BlC,IAA3B,CADV;;AAEA,YAAI,CAACc,KAAL,EAAY;;AACZ,YAAIlD,KAAK,IAAI2B,GAAT,IAAgB3B,KAAK,IAAI4B,GAA7B,EAAkC;AAChC,cAAMpE,IAAI,GAAGoH,YAAY,CAACD,SAAD,CAAZ,CAAwB,CAAxB,CAAb;AACAA,UAAAA,SAAS,KAAK,WAAd,KAA8BzB,KAAK,CAAC9C,QAAN,GAAiB5C,IAAI,KAAK,UAAxD;;AACA,UAAA,MAAI,CAAC8F,mBAAL,CAAyBJ,KAAzB,EAAgC1F,IAAhC;;AACAmH,UAAAA,SAAS,KAAK,WAAd,IAA6B,MAAI,CAACD,cAAL,CAAoBK,IAApB,CAAyB3C,IAAzB,CAA7B;AACD,SALD,MAKO;AACL,cAAM5E,KAAI,GAAGoH,YAAY,CAACD,SAAD,CAAZ,CAAwB,CAAxB,CAAb;AACAA,UAAAA,SAAS,KAAK,WAAd,KAA8BzB,KAAK,CAAC9C,QAAN,GAAiB5C,KAAI,KAAK,UAAxD;;AACA,UAAA,MAAI,CAAC8F,mBAAL,CAAyBJ,KAAzB,EAAgC1F,KAAhC;AACD;AACF,OAdD;AAeD;;;sCAEiByF,K,EAAO;AACvB,UAAM+B,SAAS,GAAG/B,KAAK,CAACgC,UAAN,CAAiB,CAAjB,CAAlB;AACA,UAAI,CAACD,SAAL,EAAgB,OAAO,IAAP;AAChB,UAAM9B,KAAK,GAAG8B,SAAS,CAACjB,MAAV,CAAiBmB,MAA/B;AACA,aAAO,KAAKC,QAAL,CAAcC,QAAd,CAAuBlC,KAAK,CAACd,IAA7B,IAAqCc,KAArC,GAA6C,KAAKiC,QAAL,CAAcC,QAAd,CAAuBlC,KAAK,CAACd,IAAN,CAAWiD,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAvB,KAAoDnC,KAAK,CAACgC,MAA9G;AACD;;;;;;gDAEoB9C,I;;;;;;;AACbc,gBAAAA,K,GAAQ,KAAKmB,KAAL,CAAWC,eAAX,CAA2BlC,IAA3B,C;;qBACVc,K;;;;;wCACa,KAAKoC,uBAAL,CAA6BpC,KAAK,CAACpD,IAAN,CAAWrF,MAAxC,C,EAART,C,yBAAAA,C,EAAGC,C,yBAAAA,C;AAEV,qBAAKsJ,aAAL,CAAmBL,KAAnB,EAA0B/K,UAA1B;;qBACI,KAAKoF,OAAL,CAAaP,QAAb,CAAsBG,O;;;;;;uBAClB,KAAKI,OAAL,CAAaP,QAAb,CAAsBG,OAAtB,CAA8B,KAAKhF,UAAL,CAA9B,C;;;AAER,qBAAKqE,OAAL,IACE,KAAKA,OAAL,CAAa1D,IAAb,CAAkB;AAChB0E,kBAAAA,IAAI,EAAExF,IADU;AAEhB8H,kBAAAA,IAAI,EAAEoD,KAAK,CAACpD,IAFI;AAGhBiE,kBAAAA,MAAM,EAAEb,KAHQ;AAIhBD,kBAAAA,KAAK,EAAE;AACLsC,oBAAAA,OAAO,EAAEvL,CADJ;AAELwL,oBAAAA,OAAO,EAAEvL;AAFJ;AAJS,iBAAlB,CADF;;;;;;;;;;;;;;;;;;4CAaoBmC,Q,EAAU;AAAA,qCACdA,QADc;AAAA,UACzBpC,CADyB;AAAA,UACtBC,CADsB;AAAA,UACnBG,CADmB;AAAA,UAE9BqL,WAF8B,GAEhB,IAAI1O,KAAK,CAAC2O,OAAV,CAAkB1L,CAAlB,EAAqBC,CAArB,EAAwBG,CAAxB,CAFgB;AAAA,UAG9BuL,MAH8B,GAGrBF,WAAW,CAACG,OAAZ,CAAoB,KAAKC,MAAzB,CAHqB;AAAA,UAI9B/E,KAJ8B,GAItB,KAAKD,YAAL,CAAkBC,KAAlB,GAA0B,CAJJ;AAAA,UAK9BrH,MAL8B,GAKrB,KAAKoH,YAAL,CAAkBpH,MAAlB,GAA2B,CALN;;AAMhC,aAAO;AACLO,QAAAA,CAAC,EAAEE,IAAI,CAAC4L,KAAL,CAAWH,MAAM,CAAC3L,CAAP,GAAW8G,KAAX,GAAmBA,KAA9B,CADE;AAEL7G,QAAAA,CAAC,EAAEC,IAAI,CAAC4L,KAAL,CAAW,CAACH,MAAM,CAAC1L,CAAR,GAAYR,MAAZ,GAAqBA,MAAhC;AAFE,OAAP;AAID;;;kCAEayJ,K,EAAO7E,G,EAAK;AACxB,UAAI6E,KAAK,YAAYnM,KAAK,CAACgP,KAA3B,EAAkC;AAChC,aAAK1H,GAAL,KAAa,CAAC,KAAKA,GAAL,EAAUgF,QAAxB,IAAoC,KAAKC,mBAAL,CAAyB,KAAKjF,GAAL,CAAzB,EAAoC,QAApC,CAApC;AACA,aAAKA,GAAL,IAAY6E,KAAZ;AACA,aAAKI,mBAAL,CAAyB,KAAKjF,GAAL,CAAzB,EAAoC,UAApC;AACD;AACF;;;;;;;;;;;;;;;iCAGoC,KAAKd,O,EAAjCX,O,kBAAAA,O,EAASG,e,kBAAAA,e;;qBAEZA,e;;;;;;uBACyB;AAAO;AAAmC,mCAA1C,C;;;AAArBiJ,gBAAAA,Y;AACN,qBAAK1I,OAAL,CAAa2I,QAAb,CAAsBlB,IAAtB,CAA2BiB,YAAY,CAAC3E,OAAb,CAAqB4E,QAArB,CAA8B,CAA9B,CAA3B;;;AAEF,iBAAC,KAAKjF,IAAN,IAAc,KAAKkF,YAAL,EAAd;AAEA,qBAAKf,QAAL,GAAgB,EAAhB;AACA,qBAAKgB,UAAL,GAAkB,EAAlB;AACA,qBAAKC,gBAAL,GAAwB,EAAxB,C,CACA;AACA;AACA;AACA;;AACA,qBAAK9I,OAAL,CAAa2I,QAAb,CAAsB7H,OAAtB,CAA8B,UAAAiI,CAAC,EAAI;AAAA,sCACDA,CAAC,CAACC,UADD;AAAA,sBAC1BC,EAD0B,iBAC1BA,EAD0B;AAAA,sBAChBC,WADgB,iBACtBpE,IADsB;AAAA,sBAE/BA,IAF+B,GAExBxF,OAAO,CAAC4J,WAAD,CAAP,IAAwBA,WAFA;AAAA,sBAG/B/L,MAH+B,GAGtB8L,EAAE,IAAIzP,EAAE,CAAC2P,WAAH,CAAeJ,CAAC,CAACK,QAAjB,CAHgB;AAAA,sBAI/BC,QAJ+B,GAIpB,MAAI,CAACC,cAAL,CAAoBnM,MAApB,CAJoB;;AAKjC4L,kBAAAA,CAAC,CAACjE,IAAF,GAASA,IAAT;AACAiE,kBAAAA,CAAC,CAAC5L,MAAF,GAAWA,MAAX;AACA4L,kBAAAA,CAAC,CAACQ,aAAF,GAAkBF,QAAlB;AAEA,kBAAA,MAAI,CAACP,gBAAL,CAAsBhE,IAAtB,IAA8BuE,QAA9B;;AACA,kBAAA,MAAI,CAACxB,QAAL,CAAcJ,IAAd,CAAmB3C,IAAnB;;AACA,kBAAA,MAAI,CAAC+D,UAAL,CAAgB/D,IAAhB,IAAwB3H,MAAxB;AACA4L,kBAAAA,CAAC,CAACS,OAAF,GAAY;AACVC,oBAAAA,UAAU,EAAE,EADF;AAEVC,oBAAAA,UAAU,EAAE;AAFF,mBAAZ;AAIAX,kBAAAA,CAAC,CAACK,QAAF,CAAWO,WAAX,CAAuB7I,OAAvB,CAA+B,UAAC6I,WAAD,EAAcC,CAAd,EAAoB;AACjDb,oBAAAA,CAAC,CAACS,OAAF,CAAUI,CAAV,IAAe,EAAf;AACAD,oBAAAA,WAAW,CAAC7I,OAAZ,CAAoB,UAAC+I,CAAD,EAAIC,CAAJ,EAAU;AAC5B,0BAAI,eAAcD,CAAC,CAAC,CAAD,CAAf,CAAJ,EAAyB;AACvBd,wBAAAA,CAAC,CAACS,OAAF,CAAUE,UAAV,CAAqBjC,IAArB,CAA0BoC,CAAC,CAAC7K,GAAF,CAAM,UAAA+K,MAAM;AAAA,iCAAI,MAAI,CAACT,cAAL,CAAoBS,MAApB,CAAJ;AAAA,yBAAZ,CAA1B;AACD,uBAFD,MAEO;AACLhB,wBAAAA,CAAC,CAACS,OAAF,CAAUC,UAAV,CAAqBhC,IAArB,CAA0B,MAAI,CAAC6B,cAAL,CAAoBO,CAApB,CAA1B;AACD;AACF,qBAND;AAOD,mBATD;AAUD,iBA1BD;;;;;;;;;;;;;;;QA6BF;;;;qCACkC;AAAA,UAAnBG,KAAmB,uEAAX,EAAW;AAAA,UAAPlN,CAAO,uEAAH,CAAG;;AAChC,UAAI,CAAC,KAAKmN,UAAV,EAAsB;AAAA,6BAC4B,KAAKhK,OADjC;AAAA,YACb1B,MADa,kBACbA,MADa;AAAA,YACLtB,MADK,kBACLA,MADK;AAAA,YACGE,MADH,kBACGA,MADH;AAAA,YACWhC,IADX,kBACWA,IADX;AAAA,YACiB+B,OADjB,kBACiBA,OADjB;;AAGpB,YAAI,CAAC,KAAKgN,SAAV,EAAqB;AACnB,eAAKA,SAAL,GAAiB/M,MAAM,IAAI,KAAKgN,YAAL,EAA3B,CADmB,CAEnB;;AACA,eAAKlK,OAAL,CAAa9C,MAAb,GAAsB,KAAK+M,SAA3B;AACD;;AACD,YAAI,CAAC,KAAKE,OAAV,EAAmB;AACjB,eAAKA,OAAL,GAAe,CAACjP,IAAI,IAAI,KAAKkP,OAAL,EAAT,IAA4BnN,OAAO,GAAG,CAAX,GAAgB,KAAKhC,cAAL,CAAoBC,IAA9E;AACA,eAAK8E,OAAL,CAAa9E,IAAb,GAAoB,KAAKiP,OAAzB;AACD;;AACD,aAAKH,UAAL,GAAkBzQ,EAAE,CACjB8Q,WADe,GAEfnN,MAFe,CAER,KAAK+M,SAFG,EAGfK,KAHe,CAGT,KAAKH,OAHI,EAIf7L,MAJe,CAIRA,MAJQ,EAKfiM,SALe,CAKLvN,MALK,CAAlB;AAMD;;AAnB+B,kCAoBjB,KAAKgN,UAAL,CAAgBD,KAAK,CAACS,MAAN,EAAhB,EAAgCC,OAAhC,EApBiB;AAAA;AAAA,UAoBzBhO,CApByB;AAAA,UAoBtBC,CApBsB;;AAqBhC,aAAO,CAACD,CAAD,EAAIC,CAAJ,EAAOG,CAAP,CAAP;AACD;;;mCAEc;AACb;;AADa,0BACyCtD,EAAE,CAACmR,SAAH,CAAa,KAAK3K,OAAlB,CADzC;;AAAA;;AAAA;;AACV,WAAK0D,IADK;AACC,WAAKC,GADN;;AAAA;;AACa,WAAKiH,KADlB;AACyB,WAAKC,MAD9B;AAEd;;;mCAEc;AACb,aAAO,CAAC,CAAC,KAAKnH,IAAL,GAAY,KAAKkH,KAAlB,IAA2B,GAA5B,EAAiC,CAAC,KAAKC,MAAL,GAAc,KAAKlH,GAApB,IAA2B,GAA5D,CAAP;AACD;;;8BAES;AAAA,+BACgB,KAAKJ,YADrB;AAAA,UACDC,KADC,sBACDA,KADC;AAAA,UACMrH,MADN,sBACMA,MADN;AAAA,UAEN2O,MAFM,GAEGtH,KAAK,GAAG5G,IAAI,CAACmO,GAAL,CAAS,KAAKrH,IAAL,GAAY,KAAKkH,KAA1B,CAFX;AAAA,UAGNI,MAHM,GAGG7O,MAAM,GAAGS,IAAI,CAACmO,GAAL,CAAS,KAAKpH,GAAL,GAAW,KAAKkH,MAAzB,CAHZ;AAIR,aAAOjO,IAAI,CAACyH,GAAL,CAASyG,MAAT,EAAiBE,MAAjB,IAA2B,CAAlC;AACD;;;mCAEcC,O,EAAS;AAAA,2BACiBzR,EAAE,CAACmR,SAAH,CAAaM,OAAb,CADjB;AAAA;AAAA;AAAA,UACdvH,IADc;AAAA,UACRC,GADQ;AAAA;AAAA,UACDiH,KADC;AAAA,UACMC,MADN;;AAEtB,aAAO,CAAC,CAACnH,IAAI,GAAGkH,KAAR,IAAiB,GAAlB,EAAuB,CAACC,MAAM,GAAGlH,GAAV,IAAiB,GAAxC,CAAP;AACD;;;;;;;;;;;;;;;AAGC,qBAAKjC,UAAL,GAAkB,EAAlB;AACA,qBAAKwJ,QAAL,GAAgB,EAAhB;AACMC,gBAAAA,Q,GAAW,IAAI1R,KAAK,CAACgP,KAAV,E,mBACoC,KAAKxI,O,EAAvDjB,G,kBAAAA,G,EAAK5D,K,kBAAAA,K,EAAO0C,S,kBAAAA,S,EAAWG,M,kBAAAA,M,EAAQwB,e,kBAAAA,e;AAClC,qBAAK2L,QAAL,GAAgBnN,MAAM,GAAG,CAAT,KAAe,CAAf,GAAmB7C,KAAnB,GAA2BA,KAAK,IAAI6C,MAAM,GAAG,CAAb,CAAhD;AACA,qBAAK+B,OAAL,CAAa2I,QAAb,CAAsB7H,OAAtB,CAA8B,UAAAiI,CAAC,EAAI;AAC3B,sBAAAsC,UAAU,GAAG,IAAI5R,KAAK,CAACgP,KAAV,EAAb;AAAA,sBACJ6C,SADI,GACQ,IAAI7R,KAAK,CAACgP,KAAV,EADR;AAAA,sBAEJ8C,WAFI,GAEU,IAAI9R,KAAK,CAACgP,KAAV,EAFV;AAAA,sBAGH3D,IAHG,GAG6BiE,CAH7B,CAGHjE,IAHG;AAAA,sBAGG0E,OAHH,GAG6BT,CAH7B,CAGGS,OAHH;AAAA,sBAGYD,aAHZ,GAG6BR,CAH7B,CAGYQ,aAHZ;AAAA,8BAIkCvK,GAAG,CAAC8F,IAAD,CAAH,IAAa,MAAI,CAAC7E,OAJpD;AAAA,sBAIH3E,SAJG,SAIHA,SAJG;AAAA,sBAIQO,WAJR,SAIQA,WAJR;AAAA,sBAIqBC,SAJrB,SAIqBA,SAJrB;AAAA,sBAKJqB,MALI,GAKK,CAAC6B,GAAG,CAAC8F,IAAD,CAAH,IAAa,EAAd,EAAkB3H,MALvB;AAAA,sBAMJqO,WANI,GAMUrO,MAAM,GAAG,MAAI,CAACmM,cAAL,CAAoBnM,MAApB,CAAH,GAAiCoM,aANjD;;AAQN,sBAAIzE,IAAI,KAAK,MAAT,IAAmB,CAACrF,eAAxB,EAAyC;;AACzC,kBAAA,MAAI,CAACyL,QAAL,CAAczD,IAAd,CAAmB;AACjBgE,oBAAAA,IAAI,EAAE3G,IADW;AAEjB3H,oBAAAA,MAAM,EAAEqO,WAFS;AAGjB1P,oBAAAA,SAAS,EAATA;AAHiB,mBAAnB;;AAKA,sBAAM4P,gBAAgB,GAAG,MAAI,CAACC,QAAL,CAAcnC,OAAO,CAACC,UAAtB,EAAkCnO,SAAS,CAACC,MAA5C,CAAzB;AAAA,sBACEqQ,gBAAgB,GAAG,MAAI,CAACC,UAAL,CAAgBrC,OAAO,CAACC,UAAxB,EAAoC5N,WAAW,CAACN,MAAhD,CADrB;;AAEA,sBAAIuQ,aAAJ;;AACA,sBAAI9M,GAAG,CAAC8F,IAAD,CAAH,IAAa9F,GAAG,CAAC8F,IAAD,CAAH,CAAUtC,IAAvB,IAA+BxD,GAAG,CAAC8F,IAAD,CAAH,CAAU9H,SAAV,CAAoBxB,IAAvD,EAA6D;AAAA,oCAC5BwD,GAAG,CAAC8F,IAAD,CADyB;AAAA,mDACpDtC,IADoD;AAAA,wBACpDA,IADoD,+BAC7C,EAD6C;AAAA,wBACzCxF,SADyC,aACzCA,SADyC;AAAA,wBAEzDG,OAFyD,GAEhDqF,IAAI,CAACrF,MAAL,GAAc,MAAI,CAACmM,cAAL,CAAoB9G,IAAI,CAACrF,MAAzB,CAAd,GAAiDqO,WAFD;;AAG3D,qBAAChJ,IAAI,CAACsC,IAAN,KAAetC,IAAI,CAACsC,IAAL,GAAYA,IAA3B;AACAgH,oBAAAA,aAAa,GAAG,MAAI,CAACC,aAAL,CAAmB/O,SAAnB,EAA8BwF,IAA9B,EAAoCrF,OAApC,CAAhB;AACD;;AAEDuO,kBAAAA,gBAAgB,CAAC5K,OAAjB,CAAyB,UAAAkL,IAAI;AAAA,2BAAIV,SAAS,CAACW,GAAV,CAAcD,IAAd,CAAJ;AAAA,mBAA7B;AACAT,kBAAAA,WAAW,CAACU,GAAZ,CAAgBL,gBAAhB;AACApC,kBAAAA,OAAO,CAACE,UAAR,CAAmB5I,OAAnB,CAA2B,UAAA2B,IAAI,EAAI;AACjC,wBAAMyJ,gBAAgB,GAAG,MAAI,CAACP,QAAL,CAAclJ,IAAd,EAAoBnH,SAAS,CAACC,MAA9B,CAAzB;AAAA,wBACE4Q,gBAAgB,GAAG,MAAI,CAACN,UAAL,CAAgBpJ,IAAhB,EAAsB5G,WAAW,CAACN,MAAlC,CADrB;;AAEA2Q,oBAAAA,gBAAgB,CAACpL,OAAjB,CAAyB,UAAAkL,IAAI;AAAA,6BAAIV,SAAS,CAACW,GAAV,CAAcD,IAAd,CAAJ;AAAA,qBAA7B;AACAT,oBAAAA,WAAW,CAACU,GAAZ,CAAgBE,gBAAhB;AACD,mBALD;AAMAd,kBAAAA,UAAU,CAAC7I,IAAX,qBACMxD,GAAG,CAAC8F,IAAD,CAAH,GAAY9F,GAAG,CAAC8F,IAAD,CAAH,CAAUtC,IAAtB,GAA6B,EADnC;AAEEsC,oBAAAA,IAAI,EAAJA,IAFF;AAGE0E,oBAAAA,OAAO,EAAPA,OAHF;AAIErM,oBAAAA,MAAM,EAAEqO;AAJV;AAMAH,kBAAAA,UAAU,CAACvG,IAAX,GAAkBA,IAAlB;AACAwG,kBAAAA,SAAS,CAACxG,IAAV,aAAoBA,IAApB,cAA4BpK,IAA5B;AACA6Q,kBAAAA,WAAW,CAACzG,IAAZ,aAAsBA,IAAtB,cAA8BlK,MAA9B;AACAyQ,kBAAAA,UAAU,CAACY,GAAX,CAAeX,SAAf;AACAD,kBAAAA,UAAU,CAACY,GAAX,CAAeV,WAAf;AACAO,kBAAAA,aAAa,IAAIT,UAAU,CAACY,GAAX,CAAeH,aAAf,CAAjB;;AAEA,sBAAIhO,SAAJ,EAAe;AACbuN,oBAAAA,UAAU,CAACvM,QAAX,CAAoBpC,CAApB,GAAwB8O,WAAW,CAAC,CAAD,CAAX,GAAiBzQ,aAAzC;AACAsQ,oBAAAA,UAAU,CAACvM,QAAX,CAAoBnC,CAApB,GAAwB6O,WAAW,CAAC,CAAD,CAAX,GAAiBzQ,aAAzC;AACD;;AACDoQ,kBAAAA,QAAQ,CAACc,GAAT,CAAaZ,UAAb;AACD,iBAnDD;AAqDA,qBAAKF,QAAL,GAAgBA,QAAhB;AACA,qBAAKpE,KAAL,CAAWkF,GAAX,CAAed,QAAf;AACA,qBAAKiB,gBAAL;AACA,qBAAKC,SAAL;AACAvO,gBAAAA,SAAS,IAAI,KAAKwO,iBAAL,EAAb;;;;;;;;;;;;;;;;;;wCAGkB;AAAA;;AAClB,OAAC,KAAKhH,aAAN,KAAwB,KAAKA,aAAL,GAAqB,IAAI,KAAKiH,KAAL,CAAW9D,KAAf,EAA7C;AACA,WAAKnD,aAAL,CAAmBkH,SAAnB;AAFkB,2BAGmE,KAAKvM,OAHxE;AAAA,iDAGXlC,eAHW;AAAA,UAGXA,eAHW,sCAGO/C,gBAHP;AAAA,kDAGyBgD,iBAHzB;AAAA,UAGyBA,iBAHzB,uCAG6C/C,kBAH7C;AAAA,UAIhBwR,MAJgB,GAIP,KAAKC,WAAL,CAAiB3O,eAAjB,CAJO;AAAA,UAKhB4O,MALgB,GAKP,KAAKxB,QAAL,CAAcyB,QALP;AAOlBD,MAAAA,MAAM,CAAC7L,OAAP,CAAe,UAAC8E,KAAD,EAAQgE,CAAR,EAAc;AAC3B,YAAMiD,GAAG,GAAG;AAACnQ,UAAAA,CAAC,EAAE,CAAJ;AAAOC,UAAAA,CAAC,EAAE,CAAV;AAAaG,UAAAA,CAAC,EAAE;AAAhB,SAAZ;AACA,YAAI,MAAI,CAACyP,KAAL,CAAWO,KAAf,CAAqBlH,KAAK,CAAC9G,QAA3B,EAAqC,MAAI,CAACwG,aAA1C,EACGyH,EADH,CACMF,GADN,EACW7O,iBADX,EAEGyO,MAFH,CAEUA,MAFV,EAGGO,KAHH;AAID,OAND;AAOA,UAAI,KAAKT,KAAL,CAAWO,KAAf,CAAqB,IAArB,EAA2B,KAAKxH,aAAhC,EACGyH,EADH,CACM,EADN,EACU/O,iBADV,EAEGiP,UAFH,CAEc,UAAAC,CAAC,EAAI;AACf,QAAA,MAAI,CAAC5H,aAAL,CAAmBkH,SAAnB;;AACA,QAAA,MAAI,CAAClH,aAAL,GAAqB,IAArB;AACA,QAAA,MAAI,CAACrF,OAAL,CAAad,QAAb,KAA0B,MAAI,CAACA,QAAL,GAAgB,IAAI,MAAI,CAACiF,OAAT,CAAiB,MAAjB,EAAuB,MAAI,CAACnE,OAAL,CAAad,QAApC,CAA1C;AACA,QAAA,MAAI,CAACc,OAAL,CAAab,QAAb,KAA0B,MAAI,CAACA,QAAL,GAAgB,IAAI,MAAI,CAAC0E,OAAT,CAAiB,MAAjB,EAAuB,MAAI,CAAC7D,OAAL,CAAab,QAApC,CAA1C;AACA,QAAA,MAAI,CAACoG,WAAL,GAAmB,IAAI,MAAI,CAAC+G,KAAL,CAAW9D,KAAf,EAAnB;AACA,YAAI,MAAI,CAAC8D,KAAL,CAAWO,KAAf,CAAqB,MAAI,CAACvE,MAAL,CAAYzJ,QAAjC,EAA2C,MAAI,CAAC0G,WAAhD,EACGuH,EADH,CACM,MAAI,CAAC9M,OAAL,CAAa3B,cADnB,EACmCN,iBAAiB,GAAG,CADvD,EAEGgP,KAFH,GAGGC,UAHH,CAGc,UAAAC,CAAC,EAAI;AACf,UAAA,MAAI,CAAC7H,QAAL,GAAgB,IAAhB;;AACA,UAAA,MAAI,CAACG,WAAL,CAAiBgH,SAAjB;;AACA,UAAA,MAAI,CAAChH,WAAL,GAAmB,IAAnB;;AACA,UAAA,MAAI,CAACkB,eAAL;AACD,SARH;AASD,OAjBH,EAkBGsG,KAlBH;AAmBD;;;sCAEiB;AAAA;;AAAA,kCACoB,KAAK/M,OAAL,CAAaP,QADjC;AAAA,UACTC,IADS,yBACTA,IADS;AAAA,UACHC,QADG,yBACHA,QADG;AAAA,UACO9B,SADP,yBACOA,SADP;AAEhB,UAAI,CAACA,SAAL,EAAgB;AAChB,OAAC,KAAKyI,gBAAN,KAA2B,KAAKA,gBAAL,GAAwB,CAAnD;;AACA,UAAI,CAAC,KAAKD,eAAV,EAA2B;AACzB,aAAKA,eAAL,GAAuB1G,QAAQ,IAAI,KAAKiI,QAAxC;AACD;;AACD,WAAKsF,cAAL,CAAoB,KAAK7G,eAAL,CAAqB,KAAKC,gBAA1B,CAApB;AAEAH,MAAAA,aAAa,CAAC,KAAKC,aAAN,CAAb;AACA,WAAKA,aAAL,GAAqB+G,WAAW,CAAC,UAAAF,CAAC,EAAI;AACpC,QAAA,OAAI,CAAC3G,gBAAL;AACA,QAAA,OAAI,CAACA,gBAAL,GAAwB,OAAI,CAACA,gBAAL,IAAyB,OAAI,CAACD,eAAL,CAAqB+G,MAA9C,GAAuD,CAAvD,GAA2D,OAAI,CAAC9G,gBAAxF;AACA,YAAMzB,IAAI,GAAG,OAAI,CAACwB,eAAL,CAAqB,OAAI,CAACC,gBAA1B,CAAb;;AACA,QAAA,OAAI,CAAC4G,cAAL,CAAoBrI,IAApB;AACD,OAL+B,EAK7BnF,IAL6B,CAAhC;AAMD,K,CAED;;;;6BACS2N,M,SAAgD;AAAA,UAAvC9R,IAAuC,SAAvCA,IAAuC;AAAA,UAAjCC,KAAiC,SAAjCA,KAAiC;AAAA,UAA1BC,OAA0B,SAA1BA,OAA0B;AAAA,UAAjBN,KAAiB,SAAjBA,KAAiB;AAAA,UAAVO,OAAU,SAAVA,OAAU;AACvD,UAAM4R,KAAK,GAAG,IAAI9T,KAAK,CAAC+T,KAAV,EAAd;AACAF,MAAAA,MAAM,CAACxM,OAAP,CAAe,UAACiI,CAAD,EAAIa,CAAJ,EAAU;AAAA,gCACRb,CADQ;AAAA,YAChBrM,CADgB;AAAA,YACbC,CADa;;AAEvB,YAAIiN,CAAC,KAAK,CAAV,EAAa;AACX2D,UAAAA,KAAK,CAACE,MAAN,CAAa/Q,CAAb,EAAgBC,CAAhB;AACD,SAFD,MAEO,IAAIiN,CAAC,KAAK0D,MAAM,CAACD,MAAP,GAAgB,CAA1B,EAA6B;AAClCE,UAAAA,KAAK,CAACG,gBAAN,CAAuBhR,CAAvB,EAA0BC,CAA1B,EAA6BD,CAA7B,EAAgCC,CAAhC;AACD,SAFM,MAEA;AACL4Q,UAAAA,KAAK,CAACI,MAAN,CAAajR,CAAb,EAAgBC,CAAhB,EAAmBD,CAAnB,EAAsBC,CAAtB;AACD;AACF,OATD;AAUA,UAAMyM,QAAQ,GAAG,IAAI3P,KAAK,CAACmU,qBAAV,CAAgCL,KAAhC,EAAuC;AACpDxQ,QAAAA,KAAK,EAAE,CAD6C;AAEpD3B,QAAAA,KAAK,EAALA,KAFoD;AAGpDyS,QAAAA,SAAS,EAAE,KAHyC;AAIpDC,QAAAA,YAAY,EAAE,KAJsC;AAKpDzR,QAAAA,cAAc,EAAE,CALoC;AAMpDC,QAAAA,SAAS,EAAE,CANyC;AAOpDC,QAAAA,aAAa,EAAE;AAPqC,OAAvC,CAAjB;AAAA,UASE;AACAwR,MAAAA,QAAQ,GAAG,IAAItU,KAAK,CAACuU,iBAAV,CAA4B;AACrCvS,QAAAA,KAAK,EAALA,KADqC;AAErCC,QAAAA,OAAO,EAAPA,OAFqC;AAGrCuS,QAAAA,WAAW,EAAE,IAHwB;AAIrCC,QAAAA,IAAI,EAAEzU,KAAK,CAAC0U;AAJyB,OAA5B,CAVb;AAgBA,WAAKC,gBAAL,CAAsBL,QAAtB,EAAgCrS,OAAhC;AACAC,MAAAA,OAAO,KAAKoS,QAAQ,CAAC/O,GAAT,GAAerD,OAApB,CAAP;AACA,UAAMqQ,IAAI,GAAG,IAAIvS,KAAK,CAAC4U,IAAV,CAAejF,QAAf,EAAyB2E,QAAzB,CAAb;AACA/B,MAAAA,IAAI,CAAClH,IAAL,GAAYpK,IAAZ;AACAsR,MAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf;AACA,WAAKkG,UAAL,CAAgB+F,IAAhB,CAAqBuE,IAArB;AACA,aAAO,CAACA,IAAD,CAAP;AACD;;;qCAEgB+B,Q,EAAUrS,O,EAAS;AAClC,UAAI,KAAKuE,OAAL,CAAa5B,QAAjB,EAA2B;AACzB0P,QAAAA,QAAQ,CAAC1P,QAAT,GAAoB5E,KAAK,CAAC6U,gBAA1B;AACD,OAFD,MAEO;AACLP,QAAAA,QAAQ,CAACrS,OAAT,GAAmBA,OAAO,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,OAA1C;AACD;AACF;;;uCAEkB;AAAA;;AAAA,UACVuD,WADU,GACK,KAAKgB,OADV,CACVhB,WADU;;AAEjB,UAAI,eAAcA,WAAd,CAAJ,EAAgC;AAC9BA,QAAAA,WAAW,CAAC6B,OAAZ,CAAoB,UAAA2B,IAAI,EAAI;AAC1B,UAAA,OAAI,CAAC8L,SAAL,CAAe9L,IAAf;AACD,SAFD;AAGD,OAJD,MAIO,IAAIzI,OAAO,CAACiF,WAAD,CAAP,KAAyB,QAA7B,EAAuC;AAC5C,aAAKsP,SAAL,CAAetP,WAAf;AACD;AACF;;;qCAEwD;AAAA;;AAAA,8BAA9CxD,KAA8C;AAAA,UAA9CA,KAA8C,4BAAtC,SAAsC;AAAA,gCAA3BC,OAA2B;AAAA,UAA3BA,OAA2B,8BAAjB,CAAiB;AAAA,0BAAdoB,CAAc;AAAA,UAAdA,CAAc,wBAAV,CAAU;AAAA,UAAPgI,IAAO,SAAPA,IAAO;AACvD,UAAI0J,OAAJ;;AACA,UAAI1J,IAAJ,EAAU;AACR,YAAI,eAAcA,IAAd,CAAJ,EAAyB;AACvB0J,UAAAA,OAAO,GAAG,KAAKxO,OAAL,CAAa2I,QAAb,CAAsB8F,MAAtB,CAA6B,UAAA1F,CAAC;AAAA,mBAAIjE,IAAI,CAACgD,QAAL,CAAciB,CAAC,CAACjE,IAAhB,CAAJ;AAAA,WAA9B,CAAV;AACD,SAFD,MAEO;AACL0J,UAAAA,OAAO,GAAG,KAAKxO,OAAL,CAAa2I,QAAb,CAAsB8F,MAAtB,CAA6B,UAAA1F,CAAC;AAAA,mBAAIjE,IAAI,KAAKiE,CAAC,CAACjE,IAAf;AAAA,WAA9B,CAAV;AACD;AACF,OAND,MAMO;AACL0J,QAAAA,OAAO,GAAG,KAAKxO,OAAL,CAAa2I,QAAvB;AACD;;AACD,UAAM/C,KAAK,GAAG,IAAInM,KAAK,CAACgP,KAAV,EAAd;AACA+F,MAAAA,OAAO,CAAC1N,OAAR,CAAgB,UAAAiI,CAAC,EAAI;AAAA,YACZjE,IADY,GACKiE,CADL,CACZjE,IADY;AAAA,YACN0E,OADM,GACKT,CADL,CACNS,OADM;AAAA,YAEjB+B,WAFiB,GAEH,IAAI9R,KAAK,CAACgP,KAAV,EAFG;AAAA,YAGjB4C,UAHiB,GAGJ,OAAI,CAACtE,KAAL,CAAWC,eAAX,CAA2BlC,IAA3B,CAHI;AAAA,YAIjB4J,gBAJiB,GAIE,OAAI,CAAC7C,UAAL,CACjBrC,OAAO,CAACC,UADS,EAEjB;AACEjO,UAAAA,IAAI,EAAE,IADR;AAEEC,UAAAA,KAAK,EAALA,KAFF;AAGEC,UAAAA,OAAO,EAAPA;AAHF,SAFiB,EAOjBoB,CAPiB,CAJF;;AAanByO,QAAAA,WAAW,CAACU,GAAZ,CAAgByC,gBAAhB;AACAlF,QAAAA,OAAO,CAACE,UAAR,CAAmB5I,OAAnB,CAA2B,UAAA2B,IAAI,EAAI;AACjC,cAAMkM,gBAAgB,GAAG,OAAI,CAAC9C,UAAL,CACvBpJ,IADuB,EAEvB;AACEjH,YAAAA,IAAI,EAAE,IADR;AAEEC,YAAAA,KAAK,EAALA,KAFF;AAGEC,YAAAA,OAAO,EAAPA;AAHF,WAFuB,EAOvBoB,CAPuB,CAAzB;;AASAyO,UAAAA,WAAW,CAACU,GAAZ,CAAgB0C,gBAAhB;AACD,SAXD;AAYApD,QAAAA,WAAW,CAACzG,IAAZ,yBAAkCA,IAAlC,cAA0ChI,CAA1C;AACAuO,QAAAA,UAAU,GAAGA,UAAU,CAACY,GAAX,CAAeV,WAAf,CAAH,GAAiC3F,KAAK,CAACqG,GAAN,CAAUV,WAAV,CAA3C;AACD,OA5BD;AA6BA3F,MAAAA,KAAK,CAACgH,QAAN,IAAkB,KAAK7F,KAAL,CAAWkF,GAAX,CAAerG,KAAf,CAAlB;AACD;;;+BAEU0H,M,SAAgCxQ,C,EAAG;AAAA;;AAAA,UAA1BtB,IAA0B,SAA1BA,IAA0B;AAAA,UAApBC,KAAoB,SAApBA,KAAoB;AAAA,UAAbC,OAAa,SAAbA,OAAa;AAC5C,UAAMqS,QAAQ,GAAG,IAAItU,KAAK,CAACmV,iBAAV,CAA4B;AACzCnT,QAAAA,KAAK,EAALA,KADyC;AAEzCC,QAAAA,OAAO,EAAPA,OAFyC;AAGzC;AACAuS,QAAAA,WAAW,EAAE;AAJ4B,OAA5B,CAAjB;AAAA,UAME7E,QAAQ,GAAG,IAAI3P,KAAK,CAACoV,cAAV,EANb;AAAA,UAOEC,SAAS,GAAG,EAPd;;AAQA,UAAIhS,CAAJ,EAAO;AACLwQ,QAAAA,MAAM,CAACxM,OAAP,CAAe,UAAAiI,CAAC,EAAI;AAAA,mCACHA,CADG;AAAA,cACXrM,CADW;AAAA,cACRC,CADQ;;AAElBmS,UAAAA,SAAS,CAACrH,IAAV,CAAe/K,CAAf,EAAkBC,CAAlB,EAAsBG,CAAC,GAAG,OAAI,CAACuD,aAAV,GAA2B,OAAI,CAACJ,OAAL,CAAa7E,KAA7D;AACD,SAHD;AAID,OALD,MAKO;AACL,oBAAW;AAACiS,UAAAA,MAAM,EAAE,KAAKpN,OAAL,CAAahC;AAAtB,SAAX,EAA0C6C,OAA1C,CAAkD,UAAC2B,IAAD,EAAOmH,CAAP,EAAa;AAC7D,cAAMmF,OAAO,GAAGzB,MAAM,CAAC7I,MAAP,CAAc,UAACC,IAAD,EAAOC,GAAP,EAAe;AAAA,sCACzBA,GADyB;AAAA,gBACpCjI,CADoC;AAAA,gBACjCC,CADiC;AAAA,gBAC9BG,CAD8B;;AAE3C4H,YAAAA,IAAI,CAAC+C,IAAL,CAAU/K,CAAV,EAAaC,CAAb,EAAgBG,CAAC,GAAG,OAAI,CAACsO,QAAL,GAAgBxB,CAApC;AACA,mBAAOlF,IAAP;AACD,WAJe,EAIb,EAJa,CAAhB;;AAMAoK,UAAAA,SAAS,CAACrH,IAAV,OAAAqH,SAAS,qBAASC,OAAT,EAAT;AACD,SARD;AASD;;AAED3F,MAAAA,QAAQ,CAAC4F,YAAT,CAAsB,UAAtB,EAAkC,IAAIvV,KAAK,CAACwV,sBAAV,CAAiCH,SAAjC,EAA4C,CAA5C,CAAlC;AACA1F,MAAAA,QAAQ,CAAC8F,qBAAT;AAEA,UAAM7R,MAAM,GAAG,IAAI5D,KAAK,CAAC0V,IAAV,CAAe/F,QAAf,EAAyB2E,QAAzB,CAAf;AACA1Q,MAAAA,MAAM,CAAC8H,OAAP,GAAiB3J,IAAjB;AACA6B,MAAAA,MAAM,CAACyH,IAAP,GAAclK,MAAd;AACA,aAAOyC,MAAP;AACD;;;;;;;;;;;;;iCAG+B,KAAK4C,O,sCAA5BjB,G,EAAAA,G,mCAAM,E,uBAAIlD,S,kBAAAA,S;;sBACbA,SAAS,CAACP,MAAV,CAAiBC,IAAjB,IAAyBM,SAAS,CAACF,QAAV,CAAmBJ,I;;;;;;uBAC5B,KAAKuJ,UAAL,CAAgB,KAAK9E,OAAL,CAAamP,IAA7B,C;;;AAAlB,qBAAKA,I;;;;;gCAEL,aAAYpQ,GAAZ,EAAiBqQ,IAAjB,CAAsB,UAAA5M,IAAI,EAAI;AAC5B,sBAAM3G,SAAS,GAAGkD,GAAG,CAACyD,IAAD,CAAH,CAAU3G,SAA5B;AACA,yBAAOA,SAAS,CAACP,MAAV,CAAiBC,IAAjB,IAAyBM,SAAS,CAACF,QAAV,CAAmBJ,IAAnD;AACD,iBAHD,C;;;;;;;;uBAGyB,KAAKuJ,UAAL,CAAgB,KAAK9E,OAAL,CAAamP,IAA7B,C;;;AAAlB,qBAAKA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBAKV,KAAKnP,OAAL,CAAamP,I;;;;;;uBACT,KAAKE,QAAL,E;;;oBACD,KAAKF,I;;;;;;;;AAEZ,qBAAKlE,QAAL,CAAcpK,OAAd,CAAsB,UAAA2B,IAAI,EAAI;AAAA,sBACrBgJ,IADqB,GACMhJ,IADN,CACrBgJ,IADqB;AAAA,sBACftO,MADe,GACMsF,IADN,CACftF,MADe;AAAA,sBACPrB,SADO,GACM2G,IADN,CACP3G,SADO;AAAA,sBAE1BkQ,IAF0B,GAEnB,OAAI,CAACoD,IAAL,GACH,OAAI,CAACG,aAAL,CAAmB9D,IAAnB,EAAyB3P,SAAS,CAACP,MAAnC,EAA2C4B,MAA3C,CADG,GAEH,OAAI,CAACqS,cAAL,CAAoB/D,IAApB,EAA0B3P,SAAS,CAACP,MAApC,EAA4C4B,MAA5C,CAJsB;;AAK5B,sBAAI6O,IAAJ,EAAU;AACR,wBAAMyD,KAAK,GAAG,OAAI,CAAC1I,KAAL,CAAWC,eAAX,CAA2ByE,IAA3B,KAAoC,OAAI,CAAC1E,KAAvD;;AACAiF,oBAAAA,IAAI,CAAClH,IAAL,aAAe2G,IAAf,cAAuB9Q,IAAvB;AACA8U,oBAAAA,KAAK,CAACxD,GAAN,CAAUD,IAAV;AACD;AACF,iBAVD;;;;;;;;;;;;;;;;;;kCAcAP,I,SAgBAtO,M,EACA;AAAA;;AAAA,UAfE3B,IAeF,SAfEA,IAeF;AAAA,UAdEC,KAcF,SAdEA,KAcF;AAAA,UAbEC,OAaF,SAbEA,OAaF;AAAA,UAZEC,OAYF,SAZEA,OAYF;AAAA,UAXEQ,MAWF,SAXEA,MAWF;AAAA,UAVEC,KAUF,SAVEA,KAUF;AAAA,UATEL,QASF,SATEA,QASF;AAAA,UAREgB,KAQF,SAREA,KAQF;AAAA,UAPEV,cAOF,SAPEA,cAOF;AAAA,UANEC,SAMF,SANEA,SAMF;AAAA,UALEC,aAKF,SALEA,aAKF;AAAA,UAJEC,aAIF,SAJEA,aAIF;AAAA,UAHEC,QAGF,SAHEA,QAGF;;AACA,UAAI,KAAK2S,IAAT,EAAe;AACb,YAAMM,KAAK,GAAGjE,IAAI,CAAC1D,KAAL,CAAW,EAAX,EAAe4H,KAAf,CAAqB,UAAAC,CAAC;AAAA,iBAAIA,CAAC,KAAK,GAAN,IAAa,CAAC,CAAC,OAAI,CAACR,IAAL,CAAU5M,IAAV,CAAeqN,MAAf,CAAsBD,CAAtB,CAAnB;AAAA,SAAtB,CAAd;AACA,YAAI,CAACF,KAAL,EAAY;AACb;;AACD,UAAMtG,QAAQ,GAAG,IAAI3P,KAAK,CAACqW,kBAAV,CAA6BrE,IAA7B,EAAmC;AAChD2D,QAAAA,IAAI,EAAE,KAAKA,IADqC;AAEhDW,QAAAA,IAAI,EAAEhU,QAAQ,GAAG,CAF+B;AAGhDI,QAAAA,MAAM,EAANA,MAHgD;AAIhDC,QAAAA,KAAK,EAALA,KAJgD;AAKhDC,QAAAA,cAAc,EAAdA,cALgD;AAMhDC,QAAAA,SAAS,EAATA,SANgD;AAOhDC,QAAAA,aAAa,EAAbA,aAPgD;AAQhDC,QAAAA,aAAa,EAAbA,aARgD;AAShDO,QAAAA,KAAK,EAALA;AATgD,OAAnC,CAAjB;AAAA,UAWEgR,QAAQ,GAAG,IAAItU,KAAK,CAACuW,iBAAV,CAA4B;AACrCvU,QAAAA,KAAK,EAALA,KADqC;AAErCC,QAAAA,OAAO,EAAPA,OAFqC;AAGrCmS,QAAAA,SAAS,EAAE,KAH0B;AAIrCI,QAAAA,WAAW,EAAE;AAJwB,OAA5B,CAXb;AAiBAtS,MAAAA,OAAO,KAAKoS,QAAQ,CAAC/O,GAAT,GAAerD,OAApB,CAAP;AACA,UAAMqQ,IAAI,GAAG,IAAIvS,KAAK,CAAC4U,IAAV,CAAejF,QAAf,EAAyB2E,QAAzB,CAAb;AAAA,UACExD,KAAK,GAAG,IAAI,KAAKrP,cAAL,CAAoBC,IADlC;AAGA6Q,MAAAA,IAAI,CAACvP,QAAL,CAAcwT,GAAd,CAAkBxT,QAAQ,CAACC,CAA3B,EAA8BD,QAAQ,CAACE,CAAvC,EAA0CF,QAAQ,CAACK,CAAnD;AACAkP,MAAAA,IAAI,CAAClN,QAAL,CAAcmR,GAAd,CAAkB9S,MAAM,CAAC,CAAD,CAAxB,EAA6BA,MAAM,CAAC,CAAD,CAAnC,EAAyCpB,QAAQ,GAAGwO,KAAZ,GAAqB,CAA7D;AACAyB,MAAAA,IAAI,CAACzB,KAAL,CAAW0F,GAAX,CAAe1F,KAAf,EAAsBA,KAAtB,EAA6BA,KAA7B;AACAyB,MAAAA,IAAI,CAACkE,aAAL,GAAqB,CAArB;AACAlE,MAAAA,IAAI,CAAC5C,QAAL,CAAcjM,MAAd;AACA6O,MAAAA,IAAI,CAAClH,IAAL,GAAYnK,IAAZ;AACAqR,MAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf;AACA,aAAOwQ,IAAP;AACD;;;mCAEcP,I,EAAMrP,K,EAAOe,M,EAAQ;AAClC,UAAI,CAACsO,IAAL,EAAW;;AADuB,UAE3BhQ,KAF2B,GAEiBW,KAFjB,CAE3BX,KAF2B;AAAA,UAEpBC,OAFoB,GAEiBU,KAFjB,CAEpBV,OAFoB;AAAA,UAEXK,QAFW,GAEiBK,KAFjB,CAEXL,QAFW;AAAA,UAEDU,QAFC,GAEiBL,KAFjB,CAEDK,QAFC;AAAA,UAESjB,IAFT,GAEiBY,KAFjB,CAESZ,IAFT;AAAA,UAGhCgI,KAHgC,GAGxBnJ,YAAY,CAACoR,IAAD,EAAOrP,KAAP,CAHY;AAAA,2BAIZjC,YAAY,CAACqJ,KAAD,EAAQzH,QAAR,CAJA;AAAA,UAI/BiG,MAJ+B,kBAI/BA,MAJ+B;AAAA,UAIvBK,OAJuB,kBAIvBA,OAJuB;AAAA,UAKhC8N,MALgC,GAM9B1U,KAAK,CAAC2U,OAAN,CAAc,MAAd,MAA0B,CAAC,CAA3B,GACI3U,KAAK,GACHA,KAAK,CAAC2U,OAAN,CAAc,KAAd,MAAyB,CAAC,CADvB,GAEH7V,SAAS,CAACkB,KAAD,EAAQC,OAAR,CAHf,GAIIpB,QAAQ,CAACmB,KAAD,EAAQC,OAAR,CAVkB;;AAYlCtB,MAAAA,QAAQ,CAACiI,OAAD;AACNoJ,QAAAA,IAAI,EAAJA,IADM;AAEN/O,QAAAA,CAAC,EAAE,CAFG;AAGNC,QAAAA,CAAC,EAAE;AAHG,SAIHP,KAJG;AAKNuB,QAAAA,SAAS,EAAE,MALL;AAMNC,QAAAA,YAAY,EAAE,KANR;AAONnC,QAAAA,KAAK,EAAE0U;AAPD,SAAR;AASA,UAAMnE,IAAI,GAAG,KAAKqE,aAAL,CAAmBrO,MAAnB,EAA2BwB,KAA3B,EAAkCzH,QAAlC,CAAb;AAAA,UACEwO,KAAK,GAAG,IAAI,KAAKrP,cAAL,CAAoBC,IADlC;AAGA6Q,MAAAA,IAAI,CAACvP,QAAL,CAAcwT,GAAd,CAAkBxT,QAAQ,CAACC,CAA3B,EAA8BD,QAAQ,CAACE,CAAvC,EAA0CF,QAAQ,CAACK,CAAnD;AACAkP,MAAAA,IAAI,CAAClN,QAAL,CAAcmR,GAAd,CAAkB9S,MAAM,CAAC,CAAD,CAAxB,EAA6BA,MAAM,CAAC,CAAD,CAAnC,EAAyCpB,QAAQ,GAAGwO,KAAZ,GAAqB,CAA7D;AACAyB,MAAAA,IAAI,CAACzB,KAAL,CAAW0F,GAAX,CAAe1F,KAAf,EAAsBA,KAAtB,EAA6BA,KAA7B;AACAyB,MAAAA,IAAI,CAACkE,aAAL,GAAqB,CAArB;AACAlE,MAAAA,IAAI,CAAC5C,QAAL,CAAcjM,MAAd;AACA6O,MAAAA,IAAI,CAAClH,IAAL,GAAYnK,IAAZ;AACAqR,MAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf;AACA,aAAOwQ,IAAP;AACD;;;kCAEa5P,K,EAAOoG,I,EAAMrF,M,EAAQ;AAAA,UAC1B3B,IAD0B,GACyEY,KADzE,CAC1BZ,IAD0B;AAAA,UACpBgC,SADoB,GACyEpB,KADzE,CACpBoB,SADoB;AAAA,UACTf,QADS,GACyEL,KADzE,CACTK,QADS;AAAA,UACCQ,MADD,GACyEb,KADzE,CACCa,MADD;AAAA,UACSM,UADT,GACyEnB,KADzE,CACSmB,UADT;AAAA,UACqBF,MADrB,GACyEjB,KADzE,CACqBiB,MADrB;AAAA,UAC6BD,WAD7B,GACyEhB,KADzE,CAC6BgB,WAD7B;AAAA,UAC0CtB,SAD1C,GACyEM,KADzE,CAC0CN,SAD1C;AAAA,UACqDwB,OADrD,GACyElB,KADzE,CACqDkB,OADrD;AAAA,UAC8D5B,OAD9D,GACyEU,KADzE,CAC8DV,OAD9D;AAAA,UAE/B4U,IAF+B,GAExB,KAAKC,gBAAL,CAAsB/S,SAAtB,EAAiCgF,IAAjC,CAFwB;AAAA,UAG/BtF,OAH+B,GAGrBhD,mBAAmB,CAACkC,KAAK,CAACc,OAAP,CAHE;AAAA,+BAIN,KAAKsT,YAAL,CAAkBF,IAAlB,EAAwBxU,SAAxB,EAAmCoB,OAAnC,EAA4CI,OAA5C,EAAqDF,WAArD,CAJM;AAAA,UAI9BoG,KAJ8B,sBAI9BA,KAJ8B;AAAA,UAIvBrH,MAJuB,sBAIvBA,MAJuB;AAAA,UAIfsU,KAJe,sBAIfA,KAJe;AAAA,2BAKXtW,YAAY,CAACqJ,KAAK,GAAGpG,WAAR,IAAuBoG,KAAK,GAAG,CAAR,KAAc,CAAd,GAAkB,CAAlB,GAAsB,CAA7C,CAAD,EAAkDrH,MAAM,GAAGiB,WAA3D,CALD;AAAA,UAK9B4E,MAL8B,kBAK9BA,MAL8B;AAAA,UAKtBK,OALsB,kBAKtBA,OALsB;;AAMjCA,MAAAA,OAAO,CAACqO,WAAR,GAAsBhV,OAAtB;AACA2G,MAAAA,OAAO,CAACsO,IAAR;AACAtO,MAAAA,OAAO,CAACuO,SAAR;AACAvO,MAAAA,OAAO,CAACwO,IAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmBrN,KAAnB,EAA0BrH,MAA1B;AACAkG,MAAAA,OAAO,CAACyO,SAAR,GAAoBvT,UAApB;AACA8E,MAAAA,OAAO,CAAC0O,WAAR,GAAsB1T,MAAtB;AACAgF,MAAAA,OAAO,CAAC2O,SAAR,GAAoB5T,WAApB;AACAiF,MAAAA,OAAO,CAAC4O,IAAR;AACA5O,MAAAA,OAAO,CAAC6O,MAAR;AACA7O,MAAAA,OAAO,CAAC8O,OAAR;AACAV,MAAAA,KAAK,CAAC3P,OAAN,CAAc,UAAC2K,IAAD,EAAO7B,CAAP,EAAa;AACzBxP,QAAAA,QAAQ,CAACiI,OAAD;AACNoJ,UAAAA,IAAI,EAAJA,IADM;AAEN/O,UAAAA,CAAC,EAAE,CAAC8G,KAAK,GAAGpG,WAAT,IAAwB,CAFrB;AAGNT,UAAAA,CAAC,EAAEO,OAAO,CAAC,CAAD,CAAP,GAAaE,WAAb,GAA2BwM,CAAC,IAAI9N,SAAS,CAACC,QAAV,GAAqBuB,OAAzB;AAHzB,WAIHxB,SAJG,EAAR;AAMD,OAPD,EAhBiC,CAwBjC;AACA;;AACA,UAAMkQ,IAAI,GAAG,KAAKqE,aAAL,CAAmBrO,MAAnB,EAA2BwB,KAAK,GAAGpG,WAAnC,EAAgDjB,MAAhD,EAAwD,CAAxD,EAA2D,KAA3D,CAAb;AAAA,UACEoO,KAAK,GAAG,IAAI,KAAKrP,cAAL,CAAoBC,IADlC;AAGA6Q,MAAAA,IAAI,CAACvP,QAAL,CAAcwT,GAAd,CAAkBxT,QAAQ,CAACC,CAA3B,EAA8BD,QAAQ,CAACE,CAAvC,EAA0CF,QAAQ,CAACK,CAAnD;AACAkP,MAAAA,IAAI,CAAClN,QAAL,CAAcmR,GAAd,CAAkB9S,MAAM,CAAC,CAAD,CAAN,GAAYF,MAAM,CAAC,CAAD,CAAN,GAAYsN,KAA1C,EAAiDpN,MAAM,CAAC,CAAD,CAAN,GAAYF,MAAM,CAAC,CAAD,CAAN,GAAYsN,KAAzE,EAAiFpO,MAAM,GAAGoO,KAAV,GAAmB,CAAnG;AACAyB,MAAAA,IAAI,CAACzB,KAAL,CAAW0F,GAAX,CAAe1F,KAAf,EAAsBA,KAAtB,EAA6BA,KAA7B;AACAyB,MAAAA,IAAI,CAACkE,aAAL,GAAqB,CAArB;AACAlE,MAAAA,IAAI,CAAC5C,QAAL,CAAcjM,MAAd;AACA6O,MAAAA,IAAI,CAAClH,IAAL,GAAYnK,IAAZ;AACAqR,MAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf;AACA,aAAOwQ,IAAP;AACD;;;qCAEgBxO,S,EAAWgF,I,EAAM;AAChC,UAAI,OAAOhF,SAAP,KAAqB,UAAzB,EAAqC,OAAOA,SAAS,CAACgF,IAAD,CAAhB;;AACrC,mBAAYA,IAAZ,EAAkB1B,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC/BvD,QAAAA,SAAS,GAAGA,SAAS,CAAC4T,OAAV,YAAsBrQ,GAAtB,QAA8ByB,IAAI,CAACzB,GAAD,CAAlC,CAAZ;AACD,OAFD;;AAGA,aAAOvD,SAAP;AACD;;;iCAEY8S,I,EAAMlU,K,EAAOc,O,EAASI,O,EAAS;AAC1C,UAAM+T,GAAG,GAAGf,IAAI,CAACvI,KAAL,CAAW,IAAX,EAAiB/I,GAAjB,CAAqB,UAAA4K,CAAC;AAAA,eAAIA,CAAC,CAAC0H,IAAF,EAAJ;AAAA,OAAtB,CAAZ;AAAA,UACE9N,KAAK,GAAG6N,GAAG,CAAC5M,MAAJ,CAAW,UAACC,IAAD,EAAOC,GAAP,EAAe;AAChC,YAAM4M,CAAC,GAAGlX,YAAY,CAACsK,GAAD,EAAMvI,KAAN,CAAtB;AACA,eAAOsI,IAAI,GAAG6M,CAAP,GAAW7M,IAAX,GAAkB6M,CAAzB;AACD,OAHO,EAGL,CAHK,CADV;AAAA,UAKEpV,MAAM,GAAGkV,GAAG,CAAChE,MAAJ,GAAajR,KAAK,CAACL,QAAnB,GAA8BuB,OAAO,IAAI+T,GAAG,CAAChE,MAAJ,GAAa,CAAjB,CALhD;AAMA,aAAO;AACL7J,QAAAA,KAAK,EAAEA,KAAK,GAAGtG,OAAO,CAAC,CAAD,CAAf,GAAqBA,OAAO,CAAC,CAAD,CAD9B;AAELf,QAAAA,MAAM,EAAEA,MAAM,GAAGe,OAAO,CAAC,CAAD,CAAhB,GAAsBA,OAAO,CAAC,CAAD,CAFhC;AAGLuT,QAAAA,KAAK,EAAEY;AAHF,OAAP;AAKD;;;kCAEarP,M,EAAQwB,K,EAAOrH,M,EAAwC;AAAA,UAAhCT,OAAgC,uEAAtB,GAAsB;AAAA,UAAjB2C,QAAiB,uEAAN,IAAM;AACnE,UAAM1C,OAAO,GAAG,IAAIlC,KAAK,CAAC+X,aAAV,CAAwBxP,MAAxB,CAAhB;AACArG,MAAAA,OAAO,CAAC8V,WAAR,GAAsB,IAAtB;AACA9V,MAAAA,OAAO,CAAC+V,SAAR,GAAoBjY,KAAK,CAACkY,YAA1B;AACA,UAAMC,aAAa,GAAG,IAAInY,KAAK,CAACoY,mBAAV,CAA8BrO,KAA9B,EAAqCrH,MAArC,EAA6C,CAA7C,EAAgD,CAAhD,CAAtB;AAAA,UACE2V,aAAa,GAAG,IAAIrY,KAAK,CAACuW,iBAAV,CAA4B;AAC1C;AACAtU,QAAAA,OAAO,EAAPA,OAF0C;AAG1CsD,QAAAA,GAAG,EAAErD,OAHqC;AAI1CsS,QAAAA,WAAW,EAAE,IAJ6B;AAK1CC,QAAAA,IAAI,EAAEzU,KAAK,CAAC0U;AAL8B,OAA5B,CADlB;;AAQA,UAAI9P,QAAJ,EAAc;AACZ;AACAyT,QAAAA,aAAa,CAACjE,SAAd,GAA0B,KAA1B;AACAiE,QAAAA,aAAa,CAACzT,QAAd,GAAyB5E,KAAK,CAACsY,cAA/B;AACAD,QAAAA,aAAa,CAACE,aAAd,GAA8BvY,KAAK,CAACwY,WAApC;AACAH,QAAAA,aAAa,CAACI,QAAd,GAAyBzY,KAAK,CAAC0Y,SAA/B;AACAL,QAAAA,aAAa,CAACM,QAAd,GAAyB3Y,KAAK,CAAC0Y,SAA/B;AACAL,QAAAA,aAAa,CAACO,aAAd,GAA8B,CAA9B;AACD;;AACD,UAAMC,KAAK,GAAG,IAAI7Y,KAAK,CAAC4U,IAAV,CAAeuD,aAAf,EAA8BE,aAA9B,CAAd;AACA,aAAOQ,KAAP;AACD;AAED;;;;;;;;wCAKoB7C,K,EAAOvP,I,EAAM;AAAA;;AACzB,UAAA4E,IAAI,GAAG2K,KAAK,CAAC3K,IAAb;AAAA,2BAMA,KAAK7E,OANL;AAAA,8CAEFjB,GAFE;AAAA,UAEFA,GAFE,mCAEI,EAFJ;AAAA,UAGSuT,gBAHT,kBAGFjX,SAHE;AAAA,UAISkX,gBAJT,kBAIF1W,SAJE;AAAA,UAKW2W,kBALX,kBAKF5W,WALE;AAAA,kBAO6FmD,GAAG,CAAC8F,IAAD,CAAH,IAAa,EAP1G;AAAA,kCAOHxJ,SAPG;AAAA,UAOHA,SAPG,gCAOSiX,gBAPT;AAAA,kCAO2BzW,SAP3B;AAAA,UAO2BA,SAP3B,gCAOuC0W,gBAPvC;AAAA,oCAOyD3W,WAPzD;AAAA,UAOyDA,WAPzD,kCAOuE4W,kBAPvE;AAAA,UAQJC,QARI,GAQOjD,KAAK,CAAC3M,QAAN,IAAkB5C,IAAI,KAAK,QAA3B,GAAsC,UAAtC,GAAmDA,IAR1D;;AAUN,UAAIA,IAAI,KAAK,QAAb,EAAuB;AACrBuP,QAAAA,KAAK,CAAC3Q,QAAN,CAAehC,CAAf,GAAmB,CAAnB;AACD,OAFD,MAEO,IAAIoD,IAAI,KAAK,UAAb,EAAyB;AAC9BuP,QAAAA,KAAK,CAAC3Q,QAAN,CAAehC,CAAf,GAAmB,EAAE,IAAI,KAAKuD,aAAX,IAA4B/E,SAAS,CAACoX,QAAD,CAAT,CAAoBtX,KAAhD,IAAyD,KAAKiF,aAAL,GAAqB,CAA9E,CAAnB;AACD;;AACDoP,MAAAA,KAAK,CAAC7C,QAAN,CAAe9L,OAAf,CAAuB,UAAA8E,KAAK,EAAI;AAC9B,YAAM+M,KAAK,GAAG/M,KAAK,CAACd,IAApB;;AACA,YAAI,UAAGA,IAAH,cAAWnK,IAAX,MAAsBgY,KAA1B,EAAiC;AAC/B7W,UAAAA,SAAS,CAACoE,IAAD,CAAT,IAAmB,OAAI,CAAC0S,YAAL,CAAkBhN,KAAlB,EAAyB9J,SAAS,CAACoE,IAAD,CAAlC,CAAnB;AACD,SAFD,MAEO,IAAI,UAAG4E,IAAH,cAAWpK,IAAX,MAAsBiY,KAA1B,EAAiC;AACtCrX,UAAAA,SAAS,CAACoX,QAAD,CAAT,IAAuB,OAAI,CAACG,YAAL,CAAkBjN,KAAlB,EAAyBtK,SAAS,CAACoX,QAAD,CAAlC,CAAvB;AACD,SAFM,MAEA,IAAI,UAAG5N,IAAH,cAAWlK,MAAX,MAAwB+X,KAA5B,EAAmC;AACxC9W,UAAAA,WAAW,CAACqE,IAAD,CAAX,IAAqB,OAAI,CAAC4S,cAAL,CAAoBlN,KAApB,EAA2B/J,WAAW,CAACqE,IAAD,CAAtC,CAArB;AACD;AACF,OATD;AAUD;;;iCAEY0F,K,SAAsD;AAAA;;AAAA,6BAA9CpK,IAA8C;AAAA,UAA9CA,IAA8C,2BAAvC,IAAuC;AAAA,UAAjCC,KAAiC,SAAjCA,KAAiC;AAAA,UAA1BL,KAA0B,SAA1BA,KAA0B;AAAA,UAAnBM,OAAmB,SAAnBA,OAAmB;AAAA,UAAVC,OAAU,SAAVA,OAAU;AACjEiK,MAAAA,KAAK,CAACgH,QAAN,CAAe9L,OAAf,CAAuB,UAAAkL,IAAI,EAAI;AAC7BvQ,QAAAA,KAAK,IAAIuQ,IAAI,CAAC+B,QAAL,CAActS,KAAd,CAAoBwU,GAApB,CAAwBxU,KAAxB,CAAT;AACAC,QAAAA,OAAO,IAAI,OAAI,CAAC0S,gBAAL,CAAsBpC,IAAI,CAAC+B,QAA3B,EAAqCrS,OAArC,CAAX;AACAN,QAAAA,KAAK,KAAK4Q,IAAI,CAAC5C,QAAL,CAAchO,KAAd,GAAsBA,KAA3B,CAAL;AACAO,QAAAA,OAAO,KAAKqQ,IAAI,CAAC+B,QAAL,CAAc/O,GAAd,GAAoBrD,OAAzB,CAAP;AACAqQ,QAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf;AACD,OAND;AAOD;;;mCAEcoK,K,UAA+B;AAAA,UAAvBpK,IAAuB,UAAvBA,IAAuB;AAAA,UAAjBC,KAAiB,UAAjBA,KAAiB;AAAA,UAAVC,OAAU,UAAVA,OAAU;AAC5CkK,MAAAA,KAAK,CAACgH,QAAN,CAAe9L,OAAf,CAAuB,UAAAkL,IAAI,EAAI;AAC7BvQ,QAAAA,KAAK,IAAIuQ,IAAI,CAAC+B,QAAL,CAActS,KAAd,CAAoBwU,GAApB,CAAwBxU,KAAxB,CAAT;AACAC,QAAAA,OAAO,KAAKsQ,IAAI,CAAC+B,QAAL,CAAcrS,OAAd,GAAwBA,OAA7B,CAAP;AACAsQ,QAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf,CAH6B,CAI7B;AACD,OALD;AAMD;;;iCAEYwQ,I,UAAyD;AAAA,UAAlDxQ,IAAkD,UAAlDA,IAAkD;AAAA,UAA5CC,KAA4C,UAA5CA,KAA4C;AAAA,UAArCU,MAAqC,UAArCA,MAAqC;AAAA,UAA7BT,OAA6B,UAA7BA,OAA6B;AAAA,UAApBC,OAAoB,UAApBA,OAAoB;AAAA,UAAXc,QAAW,UAAXA,QAAW;AACpEhB,MAAAA,KAAK,IAAIuQ,IAAI,CAAC+B,QAAL,CAActS,KAAd,CAAoBwU,GAApB,CAAwBxU,KAAxB,CAAT;AACAC,MAAAA,OAAO,KAAKsQ,IAAI,CAAC+B,QAAL,CAAcrS,OAAd,GAAwBA,OAA7B,CAAP;AACAS,MAAAA,MAAM,KAAK6P,IAAI,CAAC+B,QAAL,CAAc5R,MAAd,GAAuBA,MAA5B,CAAN;AACAR,MAAAA,OAAO,KAAKqQ,IAAI,CAAC+B,QAAL,CAAc/O,GAAd,GAAoBrD,OAAzB,CAAP;;AACA,UAAIc,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACC,CAAT,KAAesP,IAAI,CAACvP,QAAL,CAAcC,CAAd,GAAkBD,QAAQ,CAACC,CAA1C;AACAD,QAAAA,QAAQ,CAACE,CAAT,KAAeqP,IAAI,CAACvP,QAAL,CAAcE,CAAd,GAAkBF,QAAQ,CAACE,CAA1C;AACAF,QAAAA,QAAQ,CAACK,CAAT,KAAekP,IAAI,CAACvP,QAAL,CAAcK,CAAd,GAAkBL,QAAQ,CAACK,CAA1C;AACD;;AACDkP,MAAAA,IAAI,CAAC7G,OAAL,GAAe3J,IAAf;AACD;;;gCAEW;AAAA;;AAAA,2BAC0B,KAAKyE,OAD/B;AAAA,UACH3B,cADG,kBACHA,cADG;AAAA,UACaR,SADb,kBACaA,SADb;AAAA,UAEPpB,CAFO,GAEI4B,cAFJ,CAEP5B,CAFO;AAAA,UAEJC,CAFI,GAEI2B,cAFJ,CAEJ3B,CAFI;AAAA,UAEDG,CAFC,GAEIwB,cAFJ,CAEDxB,CAFC;AAAA,gCAGU,KAAKyG,YAHf;AAAA,UAGPC,KAHO,uBAGPA,KAHO;AAAA,UAGArH,MAHA,uBAGAA,MAHA;AAAA,UAIR2C,QAJQ,GAIGhB,SAAS,GAAG,CAACpB,CAAC,GAAG,CAAL,EAAQC,CAAR,EAAWG,CAAC,GAAG,CAAf,CAAH,GAAuB,CAACJ,CAAD,EAAIC,CAAJ,EAAOG,CAAP,CAJnC;AAMV,WAAKyL,MAAL,GAAc,IAAI9O,KAAK,CAACsZ,iBAAV,CAA4B,EAA5B,EAAgCvP,KAAK,GAAGrH,MAAxC,EAAgD,CAAhD,EAAmD,IAAnD,CAAd;AACA,WAAKoM,MAAL,CAAYyK,EAAZ,CAAetW,CAAf,GAAmB,CAAnB;AACA,WAAK6L,MAAL,CAAYyK,EAAZ,CAAerW,CAAf,GAAmB,CAAnB;AACA,WAAK4L,MAAL,CAAYyK,EAAZ,CAAelW,CAAf,GAAmB,CAAnB;;AACA,oCAAKyL,MAAL,CAAYzJ,QAAZ,EAAqBmR,GAArB,8BAA4BnR,QAA5B;;AACA,WAAKyJ,MAAL,CAAY0K,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB;AACD;;;+BAEU;AAAA;;AAAA,mBACiC,KAAKhT,OAAL,CAAavB,KAAb,IAAsB,EADvD;AAAA,gCACFjD,KADE;AAAA,UACFA,KADE,6BACM,QADN;AAAA,oCACgBkD,SADhB;AAAA,UACgBA,SADhB,iCAC4B,CAD5B;;AAET,UAAMuU,gBAAgB,GAAG,IAAIzZ,KAAK,CAAC0Z,gBAAV,CAA2B1X,KAA3B,EAAkCkD,SAAlC,CAAzB;AACA,WAAKoI,KAAL,CAAWkF,GAAX,CAAeiH,gBAAf;AACA,UAAME,QAAQ,GAAG,KAAKnT,OAAL,CAAarB,UAA9B;AACA,UAAMA,UAAU,GAAG,IAAInF,KAAK,CAAC4Z,UAAV,CAAqBD,QAAQ,CAAC3X,KAA9B,EAAqC2X,QAAQ,CAACzU,SAA9C,EAAyDyU,QAAQ,CAACvU,QAAlE,CAAnB;;AACA,8BAAAD,UAAU,CAACE,QAAX,EAAoBmR,GAApB,gDAA2BmD,QAAQ,CAACtU,QAApC;;AACA,WAAKiI,KAAL,CAAWkF,GAAX,CAAerN,UAAf,EAPS,CAQT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;gCAEW;AACV,UAAM0U,UAAU,GAAG,IAAI7Z,KAAK,CAAC8Z,UAAV,CAAqB,CAArB,CAAnB;AACA,WAAKxM,KAAL,CAAWkF,GAAX,CAAeqH,UAAf;AACD;AAED;;;;;;;;;;;;;+BAUWE,I,EAAMzG,E,EAAIpN,I,EAAM8T,K,EAAOC,Q,EAAU;AAC1C,WAAKnH,KAAL,CAAWC,SAAX;;AACA,UAAI,OAAO7M,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,QAAAA,IAAI,GAAG,GAAP;AACD;;AACD,UAAI,CAAC+T,QAAL,EAAeA,QAAQ,GAAG,oBAAM,CAAE,CAAnB;AACf,UAAI,KAAKnH,KAAL,CAAWO,KAAf,CAAqB0G,IAArB,EACGzG,EADH,CACMA,EADN,EACUpN,IADV,EAEG8T,KAFH,CAESA,KAAK,IAAI,CAFlB,EAGGzG,KAHH,GAIGC,UAJH,CAIcyG,QAJd;AAKD;;;;EApsCiB5Z,K;;AAusCpB,eAAegG,KAAf","sourcesContent":["import * as d3 from 'd3-geo'\nimport * as THREE from 'three'\nimport merge from 'lodash/merge'\nimport cloneDeep from 'lodash/cloneDeep'\nimport pick from 'lodash/pick'\nimport decode from './core/decode'\nimport Three from './core/three'\nimport {setStyles} from './libs/dom'\nimport {getType, loaderPromisify, normalizeFourValues} from './tool/util'\nimport {createCanvas, drawText, getTextWidth} from './tool/canvas'\nimport {hex2Rgba, rgbToRgba} from './tool/color'\nimport Loading from './components/loading'\nimport Tooltip from './components/tooltip/index'\n\nconst AREA = 'area',\n  TEXT = 'text',\n  BORDER = 'border',\n  HOVERMODEL = 'hoverMode',\n  CLICKMODEL = 'clickModel',\n  comboDistance = 5,\n  _animationEasing = 'quinticInOut',\n  _animationDuration = 3000,\n  // 以屏幕尺寸1920 * 1080 时中国地图缩放为35.98、层高为15时的样式为基准，确定这个基准后，根据不同地图的scale算出depth的值\n  standardLayout = {\n    zoom: 35.98,\n    depth: 10\n  },\n  depth = -standardLayout.depth,\n  defaultStyles = {\n    areaStyle: {\n      normal: {\n        show: true,\n        color: '#006de0',\n        opacity: 1,\n        texture: '',\n        depth\n      },\n      emphasis: {\n        show: true,\n        color: '#ffff00',\n        opacity: 1,\n        texture: '',\n        depth\n      }\n    },\n    borderStyle: {\n      normal: {\n        show: true,\n        color: '#aaffff',\n        opacity: 1\n      },\n      emphasis: {\n        show: true,\n        color: '#55ffff',\n        opacity: 1\n      }\n    },\n    textStyle: {\n      normal: {\n        show: true,\n        fontSize: 14,\n        // fontFamily: 'sans-serif',\n        fontFamily: '宋体',\n        fontStyle: 'normal',\n        fontWeight: 'normal',\n        color: '#ffffff',\n        opacity: 1,\n        texture: '',\n        height: 2,\n        style: 'normal',\n        bevelThickness: 1,\n        bevelSize: 1,\n        bevelSegments: 1,\n        curveSegments: 10,\n        rotation: {\n          x: 0,\n          y: Math.PI / 4,\n          z: Math.PI / 2\n        },\n        steps: 1\n      },\n      emphasis: {\n        show: true,\n        color: '#00ff00',\n        fontSize: 14,\n        fontFamily: '宋体',\n        fontStyle: 'normal',\n        fontWeight: 'normal',\n        opacity: 1,\n        texture: '',\n        height: 2,\n        style: 'normal',\n        bevelThickness: 1,\n        bevelSize: 1,\n        bevelSegments: 1,\n        curveSegments: 10,\n        steps: 1,\n        rotation: {\n          x: 0,\n          y: Math.PI / 4,\n          z: Math.PI / 2\n        }\n      }\n    },\n    simpleTip: {\n      show: false,\n      offset: [0, 0],\n      padding: [5, 5],\n      center: null,\n      borderWidth: 2,\n      border: '#FAEA2A',\n      lineGap: 5,\n      rotation: {\n        x: 0,\n        y: Math.PI / 4,\n        z: Math.PI / 2\n      },\n      background: '#6A74AA',\n      opacity: 1,\n      formatter: '{name} \\n {value}',\n      textStyle: {\n        color: '#FAEA2A',\n        fontFamily: 'DS-Digital',\n        fontWeight: 'normal',\n        fontStyle: 'normal',\n        fontSize: 14,\n        lineHeight: 24,\n        whiteSpace: 'nowrap',\n        textAlign: 'center',\n        textBaseline: 'top'\n      }\n    }\n  },\n  defaultOptions = {\n    animation: false,\n    animationEasing: _animationEasing,\n    animationDuration: _animationDuration,\n    depth,\n    // layers: Math.abs(depth),\n    layers: 2,\n    // rendererOptions: {\n    //   antialias: false\n    // },\n    stats: true,\n    gui: false,\n    controls: true, // orbit\n    background: '#000000',\n    opacity: 0,\n    blending: false,\n    padding: 20,\n    cameraPosition: {x: 100, y: 0, z: 100},\n    // 字体样式，font.json的绝对路径，修改文字字体需要传入对应字体的font.json路径\n    // font: '/FZNewShuSong-Z10S__china.json',\n    // zoom: 30,\n    rotate: Math.PI / 4,\n    offset: [0, 0],\n    roam: true,\n    autoResize: true,\n    light: {\n      color: 0xffffff,\n      intensity: 1\n    },\n    pointLight: {\n      color: 0xffffff,\n      intensity: 2.5,\n      distance: 120,\n      position: [30, 0, 70]\n    },\n    actived: '', // 北京市\n    map: {},\n    extraBorder: null,\n    tooltip: null,\n    flylines: null,\n    scatters: null,\n    visualMap: null,\n    nameMap: {},\n    stopDefaultMousemove: false,\n    stopDefaultClick: false,\n    visibleSouthSea: false,\n    carousel: {\n      animation: false,\n      time: 3000,\n      sequence: null,\n      handler: null\n    }\n  }\n\nclass Map3D extends Three {\n  constructor(el, mapJson, options) {\n    if (mapJson.type !== 'FeatureCollection') {\n      throw new Error('geoJson数据格式不正确，请传入正确的geoJson地图数据')\n    }\n    if (options.depth) {\n      defaultStyles.areaStyle.normal.depth = options.depth\n      defaultStyles.areaStyle.emphasis.depth = options.depth\n    }\n    const opts = merge({}, defaultStyles, defaultOptions, options)\n    super(el, opts)\n    this.originalDepth = opts.depth\n    if (this.loading) {\n      this.loading.show()\n    } else {\n      this.loading = new Loading(this.el)\n    }\n    this.standardLayout = standardLayout\n    this._options = cloneDeep(opts)\n    this.mapJson = decode(cloneDeep(mapJson))\n    this.defaultStyles = pick(opts, Object.keys(defaultStyles))\n    this.init()\n  }\n\n  async init() {\n    await this.necessaryInit()\n    await this.processMapJson()\n    this.promisifyLoader()\n    this.setLight()\n    this.paint(true)\n  }\n\n  async setOptions(mapJson, options) {\n    if (mapJson.type !== 'FeatureCollection') {\n      ;[mapJson, options] = [null, mapJson]\n    } else {\n      this.mapJson = decode(mapJson)\n      await this.processMapJson()\n    }\n\n    Object.keys(defaultOptions).forEach(key => {\n      this.options = defaultOptions[key]\n    })\n    this.scatters = null\n    this.flylines = null\n    this.options = merge(this.options, defaultStyles, cloneDeep(options))\n\n    this._options = cloneDeep(this.options)\n    this.clear()\n    this.paint()\n  }\n\n  resetDepth(options) {\n    for (let key in options) {\n      if (key === 'depth') {\n        // options.depth = (options.depth / standardLayout.zoom) * (standardLayout.zoom / this.mapZoom)\n        options.depth = (standardLayout.depth / standardLayout.zoom) * (options.depth / standardLayout.depth) * 2\n      } else if (getType(options[key]) === 'object') {\n        this.resetDepth(options[key])\n      }\n    }\n  }\n\n  async paint(init) {\n    const {map, tooltip} = this.options\n    this.mapStyleMerge(map, this.defaultStyles)\n\n    this.resetDepth(this.options)\n    this.tooltip = new Tooltip(this, tooltip || {})\n\n    await this.initVisualMap()\n    await this.initFlyline()\n\n    this.drawMap()\n    this.initScatter()\n\n    this.registerMouseEvent('mousemove', this.mousemove.bind(this), this.areaMeshes)\n    this.registerMouseEvent('mouseout', this.mouseout.bind(this), this.areaMeshes)\n\n    this.registerMouseEvent('click', this.click.bind(this), this.areaMeshes)\n\n    init && this._render()\n    this.emit('ready', this)\n    this.loading && this.loading.hide()\n  }\n\n  async initVisualMap() {\n    if (!this.options.visualMap) return\n    !this.canvas && this.addCanvas()\n    const {VisualMap} = await import(/* webpackChunkName: 'visual-map' */ './components/visual-map/index')\n\n    this.processVisualMapOptions()\n    this.visualMap = await VisualMap(this.container, {\n      ...this.options.visualMap,\n      context: this.ctx,\n      canvas: this.canvas\n    })\n    const {triggerOn, type} = this.visualMap.options\n    if (triggerOn === 'scatter') {\n      this.options.scatters.data.forEach(item => {\n        const {value} = item.data\n        item.color = this.visualMap.getColor(value)\n      })\n    } else if (triggerOn === 'map') {\n      const mapOptions = this.options.map\n\n      this.mapValues = {}\n      Object.keys(mapOptions).forEach(key => {\n        const value = (mapOptions[key].data || {}).value || 0,\n          color = this.visualMap.getColor(value)\n        mapOptions[key].areaStyle.normal.color = color\n        mapOptions[key].areaStyle.inactive = {\n          color: this.visualMap.options.inactiveColor\n        }\n        this.mapValues[key] = value\n      })\n    }\n    if (type === 'piecewise') {\n      this.visualMap.on('click', this.piecewiseVisualMapClick.bind(this))\n    } else if (type === 'continuous') {\n      this.visualMap.on('mousedown', this.continuousVisualMapMousedown.bind(this))\n      this.visualMap.on('mouseup', this.continuousVisualMapMouseup.bind(this))\n      this.visualMap.on('change', this.continuousVisualChange.bind(this))\n    }\n\n    this.visualMap.on('mouseover', this.visualMapMouseover.bind(this))\n    this.visualMap.on('mouseout', this.visualMapMouseout.bind(this))\n  }\n\n  addCanvas() {\n    const {context, canvas} = createCanvas(this.rendererSize.width, this.rendererSize.height)\n    this.ctx = context\n    this.canvas = canvas\n    this.container.appendChild(canvas)\n    setStyles(this.canvas, {\n      position: 'absolute',\n      // zIndex: 0,\n      left: 0,\n      top: 0\n    })\n  }\n\n  setCanvasSize() {\n    if (this.canvas) {\n      this.canvas.width = this.rendererSize.width\n      this.canvas.height = this.rendererSize.height\n    }\n  }\n\n  resize() {\n    this.setCanvasSize()\n    this.visualMap && this.visualMap.resize()\n  }\n\n  async initScatter() {\n    if (!this.options.scatters) return\n    const Scatter = await import(/* webpackChunkName: 'scatter' */ './components/scatter/index')\n    this.Scatter = Scatter.default\n    !this.options.animation && this.drawScatter()\n  }\n\n  drawScatter() {\n    this.scatters = new this.Scatter(this, this.options.scatters)\n\n    if (this.visualMapRangeParams) {\n      this.scatters.controlScatters({\n        ...this.visualMapRangeParams,\n        show: true,\n        hideOther: true\n      })\n      this.visualMapRangeParams = null\n    }\n  }\n\n  async initFlyline() {\n    const options = this.options.flylines\n    if (!options) return\n    const Flyline = await import(/* webpackChunkName: 'flyline' */ './components/flyline/index')\n    this.Flyline = Flyline.default\n    !this.options.animation && (this.flylines = new this.Flyline(this, options))\n  }\n\n  processVisualMapOptions() {\n    let {min, max, triggerOn, type} = this.options.visualMap,\n      data\n    triggerOn = triggerOn || (type === 'piecewise' ? 'scatter' : 'map')\n    if (triggerOn === 'scatter') {\n      data = this.options.scatters.data\n    }\n    if (triggerOn === 'map') {\n      data = this.options.map\n    }\n    if (!min) min = this.getMinData(data)\n    if (!max) max = this.getMaxData(data)\n\n    Object.assign(this.options.visualMap, {min, max})\n  }\n\n  getMinData(data) {\n    return Array.isArray(data)\n      ? data.reduce((prev, cur) => {\n          const value = (cur.data || {}).value || 0\n          return prev > value ? value : prev\n        }, 0)\n      : Object.keys(data).reduce((prev, cur) => {\n          const value = (data[cur].data || {}).value || 0\n          return prev > value ? value : prev\n        }, 0)\n  }\n\n  getMaxData(data) {\n    return Array.isArray(data)\n      ? data.reduce((prev, cur) => {\n          const value = (cur.data || {}).value || 0\n          return prev < value ? value : prev\n        }, 0)\n      : Object.keys(data).reduce((prev, cur) => {\n          const value = (data[cur].data || {}).value || 0\n          return prev < value ? value : prev\n        }, 0)\n  }\n\n  setScatters(options, repaint = true) {\n    if (this.scatters) {\n      this.scatters.setOptions(options, repaint)\n    } else {\n      this.scatters = new this.Scatter(this, options)\n    }\n  }\n\n  setFlylines(options, repaint = true) {\n    if (this.flylines) {\n      this.flylines.setOptions(options, repaint)\n    } else {\n      this.flylines = new this.Flyline(this, options)\n    }\n  }\n\n  mapStyleMerge(map, defaultStyles) {\n    for (let name in map) {\n      if (map[name] && getType(map[name]) === 'object') {\n        map[name] = merge({}, defaultStyles, map[name])\n      } else {\n        map[name] = defaultStyles\n      }\n    }\n  }\n\n  promisifyLoader() {\n    this.fontLoader = loaderPromisify(new THREE.FontLoader())\n    this.textureLoader = loaderPromisify(new THREE.TextureLoader())\n  }\n\n  render() {\n    this.loading && this.loading.visible && this.loading.hide()\n    this.scatters && this.scatters.render()\n    this.flylines && this.flylines.render()\n    if (!this.animated) {\n      this.mapComboTween && this.mapComboTween.update()\n      this.cameraTween && this.cameraTween.update()\n    }\n  }\n\n  destroyHook() {\n    this.loading && this.loading.destroy()\n    this.visualMap && this.visualMap.destroy()\n    this.tooltip && this.tooltip.destroy()\n    this.off('ready')\n    this.off('click')\n    this.off('mousemove')\n  }\n\n  click(event) {\n    const animated = !this.options.animation ? true : this.animated\n    if (!animated) return\n    const group = this.getIntersectGroup(event)\n    if (this.handleOtherElement) return\n    this.emit('click', group)\n    if (!this.options.stopDefaultClick) {\n      if (this[CLICKMODEL] && this[CLICKMODEL] === group && this[CLICKMODEL].selected) {\n        this.setModelStyleByType(this[CLICKMODEL], 'normal')\n        group.selected = false\n        this[CLICKMODEL] = null\n        return\n      }\n      if (!group) {\n        if (this[CLICKMODEL]) {\n          this[CLICKMODEL].selected = false\n          this.setModelStyleByType(this[CLICKMODEL], 'normal')\n          this[CLICKMODEL] = null\n        }\n        return\n      }\n      this[CLICKMODEL] && (this[CLICKMODEL].selected = false)\n      this.setModelStyle(group, CLICKMODEL)\n      group.selected = true\n    }\n  }\n\n  mousemove(event) {\n    const animated = !this.options.animation ? true : this.animated\n    if (!animated) return\n    const group = this.getIntersectGroup(event)\n    this.emit('mousemove', group)\n    if (!this.options.stopDefaultMousemove) {\n      if (!group) {\n        if (!this.options.carousel.animation) {\n          if (this[HOVERMODEL] && this[HOVERMODEL] !== this[CLICKMODEL]) {\n            this.setModelStyleByType(this[HOVERMODEL], 'normal')\n            this[HOVERMODEL] = null\n          }\n          this.tooltip.options.triggerOn === 'area' && this.tooltip.hide(event)\n        }\n\n        !this.handleOtherElement && (this.container.style.cursor = 'default')\n\n        this.carouselMouseOut()\n        return\n      }\n\n      clearInterval(this.carouselTimer)\n      if (this.carouseSequence) {\n        this.carouselTimer = null\n        this.activeModelIndex = this.carouseSequence.findIndex(name => name === group.name) || this.activeModelIndex\n      }\n\n      this.tooltip.options.triggerOn === 'area' &&\n        this.tooltip.show({\n          type: AREA,\n          data: group.data,\n          object: group,\n          event\n        })\n      this.container.style.cursor = 'pointer'\n      if (this[HOVERMODEL] === group) return\n      if (this[CLICKMODEL] !== group) {\n        this.setModelStyle(group, HOVERMODEL)\n      } else {\n        if (this[HOVERMODEL] && !this[HOVERMODEL].selected) {\n          this.setModelStyleByType(this[HOVERMODEL], 'normal')\n          this[HOVERMODEL] = null\n        }\n      }\n    }\n  }\n\n  mouseout(event) {\n    if (this[HOVERMODEL] && !this.options.carousel.animation) {\n      this.setModelStyleByType(this[HOVERMODEL], 'normal')\n      this[HOVERMODEL] = null\n      this.tooltip.options.triggerOn === 'area' && this.tooltip.hide(event)\n    }\n    this.carouselMouseOut()\n  }\n\n  carouselMouseOut() {\n    const animated = !this.options.animation ? true : this.animated\n    if (animated && !this.carouselTimer) {\n      this.carouselAnimate()\n    }\n  }\n\n  continuousVisualChange(params, layout) {\n    this.handleOtherElement = true\n    const {min, max} = params,\n      triggerOn = this.visualMap.options.triggerOn\n    if (triggerOn === 'scatter') {\n      if (this.scatters) {\n        this.scatters.controlScatters({\n          min,\n          max,\n          show: true,\n          hideOther: true\n        })\n      } else {\n        this.visualMapRangeParams = {min, max}\n      }\n    } else if (triggerOn === 'map') {\n      this.setMapStyleByValueRange(min, max, 'change')\n    }\n  }\n\n  continuousVisualMapMousedown() {\n    this.handleOtherElement = true\n    this.controls.enabled = false\n  }\n\n  continuousVisualMapMouseup() {\n    this.controls.enabled = true\n    this.handleOtherElement = false\n  }\n\n  piecewiseVisualMapClick(params) {\n    const {min, max, selected} = params,\n      {triggerOn} = this.visualMap.options\n    this.handleOtherElement = true\n    if (triggerOn === 'scatter') {\n      this.scatters &&\n        this.scatters.controlScatters({\n          min,\n          max,\n          zoom: true,\n          show: selected\n        })\n    } else if (triggerOn === 'map') {\n      const type = !selected ? 'inactive' : 'normal'\n      Object.keys(this.mapValues).forEach(name => {\n        const value = this.mapValues[name],\n          group = this.scene.getObjectByName(name)\n        if (value >= min && value <= max) {\n          group.inactive = type === 'inactive'\n          this.setModelStyleByType(group, type)\n        }\n      })\n    }\n  }\n\n  visualMapMouseover(params, all) {\n    this.handleOtherElement = true\n    const {triggerOn, type} = this.visualMap.options\n    const {min, max, selected} = params\n\n    if (triggerOn === 'scatter') {\n      this.scatters &&\n        this.scatters.controlScatters({\n          min,\n          max,\n          zoom: true,\n          range: this.visualMap.layout.range,\n          show: type === 'piecewise' ? selected : true\n        })\n    } else {\n      if (triggerOn === 'map') {\n        if ((type === 'continuous' && params.type === 'colorBar') || type === 'piecewise') {\n          this.setMapStyleByValueRange(min, max, 'mouseover')\n        }\n      }\n    }\n    this.isVisualMapMouseout = false\n  }\n\n  visualMapMouseout() {\n    if (this.isVisualMapMouseout) return\n    const {triggerOn} = this.visualMap.options\n    this.handleOtherElement = false\n    if (triggerOn === 'scatter') {\n      this.scatters &&\n        this.scatters.controlScatters({\n          zoom: false\n        })\n    }\n    if (triggerOn === 'map') {\n      this.activesMapName &&\n        this.activesMapName.forEach(name => {\n          const group = this.scene.getObjectByName(name)\n          group && this.setModelStyleByType(group, 'normal')\n        })\n    }\n    if (!this.isVisualMapMouseout) {\n      this.isVisualMapMouseout = true\n    }\n  }\n\n  setMapStyleByValueRange(min, max, eventType) {\n    const styleKeyMaps = {\n      mouseover: ['emphasis', 'normal'],\n      change: ['normal', 'inactive'] // 对应continonus的最大最小值改变\n    }\n    eventType === 'mouseover' && (this.activesMapName = [])\n\n    Object.keys(this.mapValues).forEach(name => {\n      const value = this.mapValues[name],\n        group = this.scene.getObjectByName(name)\n      if (!group) return\n      if (value >= min && value <= max) {\n        const type = styleKeyMaps[eventType][0]\n        eventType !== 'mouseover' && (group.inactive = type === 'inactive')\n        this.setModelStyleByType(group, type)\n        eventType === 'mouseover' && this.activesMapName.push(name)\n      } else {\n        const type = styleKeyMaps[eventType][1]\n        eventType !== 'mouseover' && (group.inactive = type === 'inactive')\n        this.setModelStyleByType(group, type)\n      }\n    })\n  }\n\n  getIntersectGroup(event) {\n    const intersect = event.intersects[0]\n    if (!intersect) return null\n    const group = intersect.object.parent\n    return this.mapNames.includes(group.name) ? group : this.mapNames.includes(group.name.split('_')[0]) && group.parent\n  }\n\n  async setActiveModel(name) {\n    const group = this.scene.getObjectByName(name)\n    if (group) {\n      const {x, y} = this.vector3ToScreenPosition(group.data.center)\n\n      this.setModelStyle(group, HOVERMODEL)\n      if (this.options.carousel.handler) {\n        await this.options.carousel.handler(this[HOVERMODEL])\n      }\n      this.tooltip &&\n        this.tooltip.show({\n          type: AREA,\n          data: group.data,\n          object: group,\n          event: {\n            offsetX: x,\n            offsetY: y\n          }\n        })\n    }\n  }\n\n  vector3ToScreenPosition(position) {\n    const [x, y, z] = position,\n      worldVector = new THREE.Vector3(x, y, z),\n      vector = worldVector.project(this.camera),\n      width = this.rendererSize.width / 2,\n      height = this.rendererSize.height / 2\n    return {\n      x: Math.round(vector.x * width + width),\n      y: Math.round(-vector.y * height + height)\n    }\n  }\n\n  setModelStyle(group, key) {\n    if (group instanceof THREE.Group) {\n      this[key] && !this[key].selected && this.setModelStyleByType(this[key], 'normal')\n      this[key] = group\n      this.setModelStyleByType(this[key], 'emphasis')\n    }\n  }\n\n  async processMapJson() {\n    const {nameMap, visibleSouthSea} = this.options\n\n    if (visibleSouthSea) {\n      const southSeaJson = await import(/* webpackChunkName: 'southsea' */ './assets/southsea')\n      this.mapJson.features.push(southSeaJson.default.features[0])\n    }\n    !this.left && this.getGeoBounds()\n\n    this.mapNames = []\n    this.mapCenters = {}\n    this.mapCenterVectors = {}\n    // this.coordToVector3()\n    // const path = d3.geoPath().projection(this.projection)\n    // path.centroid(d.geometry)\n    // 把经纬度转换成x, y, z坐标\n    this.mapJson.features.forEach(d => {\n      const {cp, name: origionName} = d.properties,\n        name = nameMap[origionName] || origionName,\n        center = cp || d3.geoCentroid(d.geometry),\n        vectors3 = this.coordToVector3(center)\n      d.name = name\n      d.center = center\n      d.centerVector3 = vectors3\n\n      this.mapCenterVectors[name] = vectors3\n      this.mapNames.push(name)\n      this.mapCenters[name] = center\n      d.vector3 = {\n        singleSide: [],\n        doubleSide: []\n      }\n      d.geometry.coordinates.forEach((coordinates, i) => {\n        d.vector3[i] = []\n        coordinates.forEach((c, j) => {\n          if (Array.isArray(c[0])) {\n            d.vector3.doubleSide.push(c.map(cinner => this.coordToVector3(cinner)))\n          } else {\n            d.vector3.singleSide.push(this.coordToVector3(c))\n          }\n        })\n      })\n    })\n  }\n\n  // 经纬度转换成墨卡托投影\n  coordToVector3(coord = [], z = 0) {\n    if (!this.projection) {\n      const {rotate, offset, center, zoom, padding} = this.options\n\n      if (!this.mapCenter) {\n        this.mapCenter = center || this.getMapCenter()\n        // this.mapCenter = center || d3.geoCentroid(this.mapJson)\n        this.options.center = this.mapCenter\n      }\n      if (!this.mapZoom) {\n        this.mapZoom = (zoom || this.getZoom()) - (padding * 2) / this.standardLayout.zoom\n        this.options.zoom = this.mapZoom\n      }\n      this.projection = d3\n        .geoMercator()\n        .center(this.mapCenter)\n        .scale(this.mapZoom)\n        .rotate(rotate)\n        .translate(offset)\n    }\n    const [x, y] = this.projection(coord.concat()).reverse()\n    return [x, y, z]\n  }\n\n  getGeoBounds() {\n    ;[[this.left, this.top], [this.right, this.bottom]] = d3.geoBounds(this.mapJson)\n  }\n\n  getMapCenter() {\n    return [(this.left + this.right) * 0.5, (this.bottom + this.top) * 0.5]\n  }\n\n  getZoom() {\n    const {width, height} = this.rendererSize,\n      scaleX = width / Math.abs(this.left - this.right),\n      scaleY = height / Math.abs(this.top - this.bottom)\n    return Math.min(scaleX, scaleY) * 2\n  }\n\n  getModelCenter(geoJson) {\n    const [[left, top], [right, bottom]] = d3.geoBounds(geoJson)\n    return [(left + right) * 0.5, (bottom + top) * 0.5]\n  }\n\n  async drawMap() {\n    this.areaMeshes = []\n    this.textList = []\n    const mapGroup = new THREE.Group(),\n      {map, depth, animation, layers, visibleSouthSea} = this.options\n    this.segDepth = layers - 1 === 0 ? depth : depth / (layers - 1)\n    this.mapJson.features.forEach(d => {\n      const modelGroup = new THREE.Group(),\n        areaGroup = new THREE.Group(),\n        borderGroup = new THREE.Group(),\n        {name, vector3, centerVector3} = d,\n        {areaStyle, borderStyle, textStyle} = map[name] || this.options,\n        center = (map[name] || {}).center,\n        centerPoint = center ? this.coordToVector3(center) : centerVector3\n\n      if (name === '南海诸岛' && !visibleSouthSea) return\n      this.textList.push({\n        text: name,\n        center: centerPoint,\n        textStyle\n      })\n      const areaSingleMeshes = this.drawArea(vector3.singleSide, areaStyle.normal),\n        borderSingleMesh = this.drawBorder(vector3.singleSide, borderStyle.normal)\n      let simpleTipMesh\n      if (map[name] && map[name].data && map[name].simpleTip.show) {\n        const {data = {}, simpleTip} = map[name],\n          center = data.center ? this.coordToVector3(data.center) : centerPoint\n        !data.name && (data.name = name)\n        simpleTipMesh = this.drawSimpleTip(simpleTip, data, center)\n      }\n\n      areaSingleMeshes.forEach(mesh => areaGroup.add(mesh))\n      borderGroup.add(borderSingleMesh)\n      vector3.doubleSide.forEach(item => {\n        const areaDoubleMeshes = this.drawArea(item, areaStyle.normal),\n          borderDoubleMesh = this.drawBorder(item, borderStyle.normal)\n        areaDoubleMeshes.forEach(mesh => areaGroup.add(mesh))\n        borderGroup.add(borderDoubleMesh)\n      })\n      modelGroup.data = {\n        ...(map[name] ? map[name].data : {}),\n        name,\n        vector3,\n        center: centerPoint\n      }\n      modelGroup.name = name\n      areaGroup.name = `${name}_${AREA}`\n      borderGroup.name = `${name}_${BORDER}`\n      modelGroup.add(areaGroup)\n      modelGroup.add(borderGroup)\n      simpleTipMesh && modelGroup.add(simpleTipMesh)\n\n      if (animation) {\n        modelGroup.position.x = centerPoint[0] * comboDistance\n        modelGroup.position.y = centerPoint[1] * comboDistance\n      }\n      mapGroup.add(modelGroup)\n    })\n\n    this.mapGroup = mapGroup\n    this.scene.add(mapGroup)\n    this.drawExtraBorders()\n    this.drawTexts()\n    animation && this.mapComboAnimation()\n  }\n\n  mapComboAnimation() {\n    !this.mapComboTween && (this.mapComboTween = new this.TWEEN.Group())\n    this.mapComboTween.removeAll()\n    const {animationEasing = _animationEasing, animationDuration = _animationDuration} = this.options,\n      easing = this.tweenEasing[animationEasing],\n      groups = this.mapGroup.children\n\n    groups.forEach((group, i) => {\n      const end = {x: 0, y: 0, z: 0}\n      new this.TWEEN.Tween(group.position, this.mapComboTween)\n        .to(end, animationDuration)\n        .easing(easing)\n        .start()\n    })\n    new this.TWEEN.Tween(this, this.mapComboTween)\n      .to({}, animationDuration)\n      .onComplete(_ => {\n        this.mapComboTween.removeAll()\n        this.mapComboTween = null\n        this.options.flylines && (this.flylines = new this.Flyline(this, this.options.flylines))\n        this.options.scatters && (this.scatters = new this.Scatter(this, this.options.scatters))\n        this.cameraTween = new this.TWEEN.Group()\n        new this.TWEEN.Tween(this.camera.position, this.cameraTween)\n          .to(this.options.cameraPosition, animationDuration / 2)\n          .start()\n          .onComplete(_ => {\n            this.animated = true\n            this.cameraTween.removeAll()\n            this.cameraTween = null\n            this.carouselAnimate()\n          })\n      })\n      .start()\n  }\n\n  carouselAnimate() {\n    const {time, sequence, animation} = this.options.carousel\n    if (!animation) return\n    !this.activeModelIndex && (this.activeModelIndex = 0)\n    if (!this.carouseSequence) {\n      this.carouseSequence = sequence || this.mapNames\n    }\n    this.setActiveModel(this.carouseSequence[this.activeModelIndex])\n\n    clearInterval(this.carouselTimer)\n    this.carouselTimer = setInterval(_ => {\n      this.activeModelIndex++\n      this.activeModelIndex = this.activeModelIndex >= this.carouseSequence.length ? 0 : this.activeModelIndex\n      const name = this.carouseSequence[this.activeModelIndex]\n      this.setActiveModel(name)\n    }, time)\n  }\n\n  // 绘制地图区域 points 是一个二维数组 [[x,y], [x,y], [x,y]]\n  drawArea(points, {show, color, opacity, depth, texture}) {\n    const shape = new THREE.Shape()\n    points.forEach((d, i) => {\n      const [x, y] = d\n      if (i === 0) {\n        shape.moveTo(x, y)\n      } else if (i === points.length - 1) {\n        shape.quadraticCurveTo(x, y, x, y)\n      } else {\n        shape.lineTo(x, y, x, y)\n      }\n    })\n    const geometry = new THREE.ExtrudeBufferGeometry(shape, {\n        steps: 2,\n        depth,\n        depthTest: false,\n        bevelEnabled: false,\n        bevelThickness: 1,\n        bevelSize: 1,\n        bevelSegments: 1\n      }),\n      // MeshLambertMaterial | MeshBasicMaterial | MeshPhongMaterial\n      material = new THREE.MeshPhongMaterial({\n        color,\n        opacity,\n        transparent: true,\n        side: THREE.DoubleSide\n      })\n    this.noBledingOpacity(material, opacity)\n    texture && (material.map = texture)\n    const mesh = new THREE.Mesh(geometry, material)\n    mesh.name = AREA\n    mesh.visible = show\n    this.areaMeshes.push(mesh)\n    return [mesh]\n  }\n\n  noBledingOpacity(material, opacity) {\n    if (this.options.blending) {\n      material.blending = THREE.AdditiveBlending\n    } else {\n      material.opacity = opacity === 1 ? 0.65 : opacity\n    }\n  }\n\n  drawExtraBorders() {\n    const {extraBorder} = this.options\n    if (Array.isArray(extraBorder)) {\n      extraBorder.forEach(item => {\n        this.addBorder(item)\n      })\n    } else if (getType(extraBorder) === 'object') {\n      this.addBorder(extraBorder)\n    }\n  }\n\n  addBorder({color = '#ffffff', opacity = 1, z = 0, name}) {\n    let mapData\n    if (name) {\n      if (Array.isArray(name)) {\n        mapData = this.mapJson.features.filter(d => name.includes(d.name))\n      } else {\n        mapData = this.mapJson.features.filter(d => name === d.name)\n      }\n    } else {\n      mapData = this.mapJson.features\n    }\n    const group = new THREE.Group()\n    mapData.forEach(d => {\n      const {name, vector3} = d,\n        borderGroup = new THREE.Group(),\n        modelGroup = this.scene.getObjectByName(name),\n        borderMeshSingle = this.drawBorder(\n          vector3.singleSide,\n          {\n            show: true,\n            color,\n            opacity\n          },\n          z\n        )\n      borderGroup.add(borderMeshSingle)\n      vector3.doubleSide.forEach(item => {\n        const borderMeshDouble = this.drawBorder(\n          item,\n          {\n            show: true,\n            color,\n            opacity\n          },\n          z\n        )\n        borderGroup.add(borderMeshDouble)\n      })\n      borderGroup.name = `extraBorder_${name}_${z}`\n      modelGroup ? modelGroup.add(borderGroup) : group.add(borderGroup)\n    })\n    group.children && this.scene.add(group)\n  }\n\n  drawBorder(points, {show, color, opacity}, z) {\n    const material = new THREE.LineBasicMaterial({\n        color,\n        opacity,\n        // side: THREE.DoubleSide,\n        transparent: true\n      }),\n      geometry = new THREE.BufferGeometry(),\n      positions = []\n    if (z) {\n      points.forEach(d => {\n        const [x, y] = d\n        positions.push(x, y, (z / this.originalDepth) * this.options.depth)\n      })\n    } else {\n      Array.from({length: this.options.layers}).forEach((item, i) => {\n        const _points = points.reduce((prev, cur) => {\n          const [x, y, z] = cur\n          prev.push(x, y, z + this.segDepth * i)\n          return prev\n        }, [])\n\n        positions.push(..._points)\n      })\n    }\n\n    geometry.addAttribute('position', new THREE.Float32BufferAttribute(positions, 3))\n    geometry.computeBoundingSphere()\n\n    const border = new THREE.Line(geometry, material)\n    border.visible = show\n    border.name = BORDER\n    return border\n  }\n\n  async initFont() {\n    const {map = {}, textStyle} = this.options\n    if (textStyle.normal.show || textStyle.emphasis.show) {\n      this.font = await this.fontLoader(this.options.font)\n    } else {\n      Object.keys(map).some(item => {\n        const textStyle = map[item].textStyle\n        return textStyle.normal.show || textStyle.emphasis.show\n      }) && (this.font = await this.fontLoader(this.options.font))\n    }\n  }\n\n  async drawTexts() {\n    if (this.options.font) {\n      await this.initFont()\n      if (!this.font) return\n    }\n    this.textList.forEach(item => {\n      const {text, center, textStyle} = item,\n        mesh = this.font\n          ? this.drawThreeText(text, textStyle.normal, center)\n          : this.drawCanvasText(text, textStyle.normal, center)\n      if (mesh) {\n        const model = this.scene.getObjectByName(text) || this.scene\n        mesh.name = `${text}_${TEXT}`\n        model.add(mesh)\n      }\n    })\n  }\n\n  drawThreeText(\n    text,\n    {\n      show,\n      color,\n      opacity,\n      texture,\n      height,\n      style,\n      fontSize,\n      steps,\n      bevelThickness,\n      bevelSize,\n      bevelSegments,\n      curveSegments,\n      rotation\n    },\n    center\n  ) {\n    if (this.font) {\n      const exist = text.split('').every(t => t === ' ' || !!this.font.data.glyphs[t])\n      if (!exist) return\n    }\n    const geometry = new THREE.TextBufferGeometry(text, {\n        font: this.font,\n        size: fontSize - 2,\n        height,\n        style,\n        bevelThickness,\n        bevelSize,\n        bevelSegments,\n        curveSegments,\n        steps\n      }),\n      material = new THREE.MeshBasicMaterial({\n        color,\n        opacity,\n        depthTest: false,\n        transparent: true\n      })\n    texture && (material.map = texture)\n    const mesh = new THREE.Mesh(geometry, material),\n      scale = 1 / this.standardLayout.zoom\n\n    mesh.rotation.set(rotation.x, rotation.y, rotation.z)\n    mesh.position.set(center[0], center[1], (fontSize * scale) / 2)\n    mesh.scale.set(scale, scale, scale)\n    mesh.rendererOrder = 2\n    mesh.geometry.center()\n    mesh.name = TEXT\n    mesh.visible = show\n    return mesh\n  }\n\n  drawCanvasText(text, style, center) {\n    if (!text) return\n    const {color, opacity, fontSize, rotation, show} = style,\n      width = getTextWidth(text, style),\n      {canvas, context} = createCanvas(width, fontSize),\n      _color =\n        color.indexOf('rgba') !== -1\n          ? color\n            ? color.indexOf('rgb') !== -1\n            : rgbToRgba(color, opacity)\n          : hex2Rgba(color, opacity)\n\n    drawText(context, {\n      text,\n      x: 1,\n      y: 1,\n      ...style,\n      textAlign: 'left',\n      textBaseline: 'top',\n      color: _color\n    })\n    const mesh = this.drawTextPlane(canvas, width, fontSize),\n      scale = 1 / this.standardLayout.zoom\n\n    mesh.rotation.set(rotation.x, rotation.y, rotation.z)\n    mesh.position.set(center[0], center[1], (fontSize * scale) / 2)\n    mesh.scale.set(scale, scale, scale)\n    mesh.rendererOrder = 2\n    mesh.geometry.center()\n    mesh.name = TEXT\n    mesh.visible = show\n    return mesh\n  }\n\n  drawSimpleTip(style, data, center) {\n    const {show, formatter, rotation, offset, background, border, borderWidth, textStyle, lineGap, opacity} = style,\n      html = this.formatterTipHtml(formatter, data),\n      padding = normalizeFourValues(style.padding),\n      {width, height, texts} = this.getTipLayout(html, textStyle, padding, lineGap, borderWidth),\n      {canvas, context} = createCanvas(width + borderWidth + (width % 2 === 0 ? 0 : 1), height + borderWidth)\n    context.globalAlpha = opacity\n    context.save()\n    context.beginPath()\n    context.rect(1, 1, width, height)\n    context.fillStyle = background\n    context.strokeStyle = border\n    context.lineWidth = borderWidth\n    context.fill()\n    context.stroke()\n    context.restore()\n    texts.forEach((text, i) => {\n      drawText(context, {\n        text,\n        x: (width + borderWidth) / 2,\n        y: padding[0] + borderWidth + i * (textStyle.fontSize + lineGap),\n        ...textStyle\n      })\n    })\n    // canvas.style.marginLeft = '10px'\n    // this.el.appendChild(canvas)\n    const mesh = this.drawTextPlane(canvas, width + borderWidth, height, 1, false),\n      scale = 1 / this.standardLayout.zoom\n\n    mesh.rotation.set(rotation.x, rotation.y, rotation.z)\n    mesh.position.set(center[0] + offset[0] * scale, center[1] + offset[1] * scale, (height * scale) / 2)\n    mesh.scale.set(scale, scale, scale)\n    mesh.rendererOrder = 2\n    mesh.geometry.center()\n    mesh.name = TEXT\n    mesh.visible = show\n    return mesh\n  }\n\n  formatterTipHtml(formatter, data) {\n    if (typeof formatter === 'function') return formatter(data)\n    Object.keys(data).forEach(key => {\n      formatter = formatter.replace(`{${key}}`, data[key])\n    })\n    return formatter\n  }\n\n  getTipLayout(html, style, padding, lineGap) {\n    const arr = html.split('\\n').map(i => i.trim()),\n      width = arr.reduce((prev, cur) => {\n        const w = getTextWidth(cur, style)\n        return prev > w ? prev : w\n      }, 0),\n      height = arr.length * style.fontSize + lineGap * (arr.length - 1)\n    return {\n      width: width + padding[1] + padding[3],\n      height: height + padding[0] + padding[2],\n      texts: arr\n    }\n  }\n\n  drawTextPlane(canvas, width, height, opacity = 0.9, blending = true) {\n    const texture = new THREE.CanvasTexture(canvas)\n    texture.needsUpdate = true\n    texture.minFilter = THREE.LinearFilter\n    const planeGeometry = new THREE.PlaneBufferGeometry(width, height, 1, 1),\n      planeMaterial = new THREE.MeshBasicMaterial({\n        // color,\n        opacity,\n        map: texture,\n        transparent: true,\n        side: THREE.DoubleSide\n      })\n    if (blending) {\n      // blending: THREE.AdditiveBlending\n      planeMaterial.depthTest = false\n      planeMaterial.blending = THREE.CustomBlending\n      planeMaterial.blendEquation = THREE.AddEquation\n      planeMaterial.blendSrc = THREE.OneFactor\n      planeMaterial.blendDst = THREE.OneFactor\n      planeMaterial.blendSrcAlpha = 0\n    }\n    const plane = new THREE.Mesh(planeGeometry, planeMaterial)\n    return plane\n  }\n\n  /**\n   * 设置一个区域的颜色\n   * @param {THREE.Group} g area group\n   * @param {String} type normal | emphasis\n   */\n  setModelStyleByType(model, type) {\n    const name = model.name,\n      {\n        map = {},\n        areaStyle: defaultAreaStyle,\n        textStyle: defaultTextStyle,\n        borderStyle: defaultBorderStyle\n      } = this.options,\n      {areaStyle = defaultAreaStyle, textStyle = defaultTextStyle, borderStyle = defaultBorderStyle} = map[name] || {},\n      areaType = model.inactive && type === 'normal' ? 'inactive' : type\n\n    if (type === 'normal') {\n      model.position.z = 0\n    } else if (type === 'emphasis') {\n      model.position.z = -(1 / this.originalDepth) * areaStyle[areaType].depth * (this.originalDepth / 3)\n    }\n    model.children.forEach(group => {\n      const cname = group.name\n      if (`${name}_${TEXT}` === cname) {\n        textStyle[type] && this.setTextStyle(group, textStyle[type])\n      } else if (`${name}_${AREA}` === cname) {\n        areaStyle[areaType] && this.setAreaStyle(group, areaStyle[areaType])\n      } else if (`${name}_${BORDER}` === cname) {\n        borderStyle[type] && this.setBorderStyle(group, borderStyle[type])\n      }\n    })\n  }\n\n  setAreaStyle(group, {show = true, color, depth, opacity, texture}) {\n    group.children.forEach(mesh => {\n      color && mesh.material.color.set(color)\n      opacity && this.noBledingOpacity(mesh.material, opacity)\n      depth && (mesh.geometry.depth = depth)\n      texture && (mesh.material.map = texture)\n      mesh.visible = show\n    })\n  }\n\n  setBorderStyle(group, {show, color, opacity}) {\n    group.children.forEach(mesh => {\n      color && mesh.material.color.set(color)\n      opacity && (mesh.material.opacity = opacity)\n      mesh.visible = show\n      // mesh.position.z = depth\n    })\n  }\n\n  setTextStyle(mesh, {show, color, height, opacity, texture, rotation}) {\n    color && mesh.material.color.set(color)\n    opacity && (mesh.material.opacity = opacity)\n    height && (mesh.material.height = height)\n    texture && (mesh.material.map = texture)\n    if (rotation) {\n      rotation.x && (mesh.rotation.x = rotation.x)\n      rotation.y && (mesh.rotation.y = rotation.y)\n      rotation.z && (mesh.rotation.z = rotation.z)\n    }\n    mesh.visible = show\n  }\n\n  setCamera() {\n    const {cameraPosition, animation} = this.options,\n      {x, y, z} = cameraPosition,\n      {width, height} = this.rendererSize,\n      position = animation ? [x / 2, y, z * 2] : [x, y, z]\n\n    this.camera = new THREE.PerspectiveCamera(10, width / height, 1, 1000)\n    this.camera.up.x = 0\n    this.camera.up.y = 0\n    this.camera.up.z = 1\n    this.camera.position.set(...position)\n    this.camera.lookAt(0, 0, 0)\n  }\n\n  setLight() {\n    const {color = 0xffffff, intensity = 1} = this.options.light || {}\n    const directionalLight = new THREE.DirectionalLight(color, intensity)\n    this.scene.add(directionalLight)\n    const pointOpt = this.options.pointLight\n    const pointLight = new THREE.PointLight(pointOpt.color, pointOpt.intensity, pointOpt.distance)\n    pointLight.position.set(...pointOpt.position)\n    this.scene.add(pointLight)\n    // const helper = new THREE.PointLightHelper(pointLight, 5)\n    // this.scene.add(helper)\n    // const controll = {\n    //   x: pointLight.position.x,\n    //   y: pointLight.position.y,\n    //   z: pointLight.position.z,\n    //   intensity: pointLight.intensity\n    // }\n    // this.gui.add(controll, 'x', -100, 100).onChange(e => {\n    //   pointLight.position.x = e\n    // })\n    // this.gui.add(controll, 'y', -100, 100).onChange(e => {\n    //   pointLight.position.y = e\n    // })\n    // this.gui.add(controll, 'z', -100, 100).onChange(e => {\n    //   pointLight.position.z = e\n    // })\n    // this.gui.add(controll, 'intensity', 0, 3).onChange(e => {\n    //   pointLight.intensity = e\n    // })\n  }\n\n  setHelper() {\n    const axesHelper = new THREE.AxesHelper(5)\n    this.scene.add(axesHelper)\n  }\n\n  /**\n   * 过渡动画\n   * @param {Object|*} from - 修改的启始值\n   * @param {Object|*} to - 修改的结束值\n   * @param {number} [time] - 完成时间\n   * @param {number} [delay=0] - 延迟时间\n   * @param {callback} [callback] - 完成回调\n   * @example\n   * transition(area.position, {x:0,y:0,z:10}, 300)\n   */\n  transition(from, to, time, delay, callback) {\n    this.TWEEN.removeAll()\n    if (typeof time !== 'number') {\n      time = 300\n    }\n    if (!callback) callback = () => {}\n    new this.TWEEN.Tween(from)\n      .to(to, time)\n      .delay(delay || 0)\n      .start()\n      .onComplete(callback)\n  }\n}\n\nexport default Map3D\n"]}]}