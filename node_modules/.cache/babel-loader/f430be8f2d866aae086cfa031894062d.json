{"remainingRequest":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js!D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\工作项目\\部反诈\\src\\utils\\menuToRouter.js","dependencies":[{"path":"D:\\工作项目\\部反诈\\src\\utils\\menuToRouter.js","mtime":1598758375154},{"path":"D:\\工作项目\\部反诈\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/web.dom.iterable\";\nimport storage from 'utils/storage';\nexport var exec = function exec(menus, routes, errors) {\n  var _ref = [[], routes[\"/layout\"], [], '', {}],\n      mRoutes = _ref[0],\n      layout = _ref[1],\n      children = _ref[2],\n      indexPath = _ref[3],\n      rMenus = _ref[4];\n  menus.forEach(function (firstMenu) {\n    if (firstMenu.menuPath === '/') {\n      firstMenu.children.forEach(function (secondMenu) {\n        if (secondMenu.homePage) {\n          if (secondMenu.children && secondMenu.children.length !== 0) {\n            indexPath = secondMenu.children[0].menuPath;\n          } else {\n            indexPath = secondMenu.menuPath;\n          }\n        }\n\n        var c = routes[secondMenu.menuPath] || routes['/wrapperView'];\n\n        var r = _objectSpread({}, menuToRoute(secondMenu, c), {\n          children: []\n        });\n\n        eachMenus(secondMenu, routes, r.children);\n        children.push(r);\n      });\n      rMenus = {\n        path: firstMenu.menuPath,\n        redirect: indexPath,\n        component: layout,\n        children: children,\n        name: firstMenu.menuCode,\n        meta: {\n          title: firstMenu.menuName\n        },\n        // isDefault: firstMenu.isDefault,\n        isNewWindow: false,\n        childrenVisible: true\n      };\n      mRoutes.push(rMenus);\n    } else {\n      mRoutes.push(menuToRoute(firstMenu, routes[firstMenu.menuPath]));\n    }\n  });\n  errors && errors.length && mRoutes.push.apply(mRoutes, _toConsumableArray(errors));\n  genLastRoutes(rMenus.children);\n  console.log(mRoutes, 'routes ----------');\n  return mRoutes;\n};\n\nvar menuToRoute = function menuToRoute(menu, component) {\n  return {\n    path: menu.menuPath,\n    name: menu.menuCode,\n    icon: menu.menuIcon,\n    redirect: menu.redirect,\n    detailPage: menu.detailPage,\n    meta: {\n      title: menu.menuName\n    },\n    hidden: !menu.isVisible,\n    isNewWindow: menu.isNewWindow,\n    childrenVisible: menu.childrenVisible,\n    component: component,\n    id: menu.id,\n    security: menu.security\n  };\n};\n\nvar eachMenus = function eachMenus(menu, routes, res) {\n  if (menu.children) {\n    menu.children.forEach(function (nextMenu) {\n      var _menu = menuToRoute(nextMenu, routes[nextMenu.menuPath] || routes['/wrapperView']);\n\n      res.push(_menu);\n\n      if (nextMenu.children) {\n        _menu.children = [];\n      }\n\n      eachMenus(nextMenu, routes, _menu.children);\n    });\n  }\n};\n\nvar setLastRoute = function setLastRoute(menu, lastRoutes) {\n  if (!menu.children) return;\n  menu.children.forEach(function (subMenu) {\n    if (subMenu.detailPage) {\n      !lastRoutes.includes(subMenu.path) && lastRoutes.push(subMenu.path);\n    }\n\n    setLastRoute(subMenu, lastRoutes);\n  });\n};\n\nexport var genLastRoutes = function genLastRoutes(menus) {\n  // 最后一及路由，用于存储返回上一级路由的标记\n  var lastRoutes = storage.get('lastRoutes') || [];\n  menus.forEach(function (menu) {\n    if (!menu.hidden) {\n      setLastRoute(menu, lastRoutes);\n    }\n  });\n  storage.set('lastRoutes', lastRoutes);\n};",{"version":3,"sources":["D:\\工作项目\\部反诈\\src\\utils\\menuToRouter.js"],"names":["storage","exec","menus","routes","errors","mRoutes","layout","children","indexPath","rMenus","forEach","firstMenu","menuPath","secondMenu","homePage","length","c","r","menuToRoute","eachMenus","push","path","redirect","component","name","menuCode","meta","title","menuName","isNewWindow","childrenVisible","genLastRoutes","console","log","menu","icon","menuIcon","detailPage","hidden","isVisible","id","security","res","nextMenu","_menu","setLastRoute","lastRoutes","subMenu","includes","get","set"],"mappings":"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","sourcesContent":["import storage from 'utils/storage'\r\nexport const exec = (menus, routes, errors) => {\r\n  let [mRoutes, layout, children, indexPath, rMenus] = [[], routes[`/layout`], [], '', {}]\r\n  menus.forEach(firstMenu => {\r\n    if (firstMenu.menuPath === '/') {\r\n      firstMenu.children.forEach(secondMenu => {\r\n        if (secondMenu.homePage) {\r\n          if (secondMenu.children && secondMenu.children.length !== 0) {\r\n            indexPath = secondMenu.children[0].menuPath\r\n          } else {\r\n            indexPath = secondMenu.menuPath\r\n          }\r\n        }\r\n        const c = routes[secondMenu.menuPath] || routes['/wrapperView']\r\n        const r = {\r\n          ...menuToRoute(secondMenu, c),\r\n          children: []\r\n        }\r\n        eachMenus(secondMenu, routes, r.children)\r\n        children.push(r)\r\n      })\r\n      rMenus = {\r\n        path: firstMenu.menuPath,\r\n        redirect: indexPath,\r\n        component: layout,\r\n        children,\r\n        name: firstMenu.menuCode,\r\n        meta: {\r\n          title: firstMenu.menuName\r\n        },\r\n        // isDefault: firstMenu.isDefault,\r\n        isNewWindow: false,\r\n        childrenVisible: true\r\n      }\r\n      mRoutes.push(rMenus)\r\n    } else {\r\n      mRoutes.push(menuToRoute(firstMenu, routes[firstMenu.menuPath]))\r\n    }\r\n  })\r\n  errors && errors.length && mRoutes.push(...errors)\r\n  genLastRoutes(rMenus.children)\r\n  console.log(mRoutes, 'routes ----------')\r\n  return mRoutes\r\n}\r\n\r\nconst menuToRoute = (menu, component) => {\r\n  return {\r\n    path: menu.menuPath,\r\n    name: menu.menuCode,\r\n    icon: menu.menuIcon,\r\n    redirect: menu.redirect,\r\n    detailPage: menu.detailPage,\r\n    meta: {\r\n      title: menu.menuName\r\n    },\r\n    hidden: !menu.isVisible,\r\n    isNewWindow: menu.isNewWindow,\r\n    childrenVisible: menu.childrenVisible,\r\n    component: component,\r\n    id: menu.id,\r\n    security: menu.security\r\n  }\r\n}\r\n\r\nconst eachMenus = (menu, routes, res) => {\r\n  if (menu.children) {\r\n    menu.children.forEach(nextMenu => {\r\n      const _menu = menuToRoute(nextMenu, routes[nextMenu.menuPath] || routes['/wrapperView'])\r\n      res.push(_menu)\r\n      if (nextMenu.children) {\r\n        _menu.children = []\r\n      }\r\n      eachMenus(nextMenu, routes, _menu.children)\r\n    })\r\n  }\r\n}\r\nconst setLastRoute = (menu, lastRoutes) => {\r\n  if (!menu.children) return\r\n  menu.children.forEach(subMenu => {\r\n    if (subMenu.detailPage) {\r\n      !lastRoutes.includes(subMenu.path) && lastRoutes.push(subMenu.path)\r\n    }\r\n    setLastRoute(subMenu, lastRoutes)\r\n  })\r\n}\r\n\r\nexport const genLastRoutes = menus => {\r\n  // 最后一及路由，用于存储返回上一级路由的标记\r\n  const lastRoutes = storage.get('lastRoutes') || []\r\n\r\n  menus.forEach(menu => {\r\n    if (!menu.hidden) {\r\n      setLastRoute(menu, lastRoutes)\r\n    }\r\n  })\r\n  storage.set('lastRoutes', lastRoutes)\r\n}\r\n"]}]}