{"remainingRequest":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js!D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\工作项目\\部反诈\\src\\utils\\map3d\\components\\loading.js","dependencies":[{"path":"D:\\工作项目\\部反诈\\src\\utils\\map3d\\components\\loading.js","mtime":1598758375226},{"path":"D:\\工作项目\\部反诈\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\工作项目\\部反诈\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\\\u5DE5\\u4F5C\\u9879\\u76EE\\\\\\u90E8\\u53CD\\u8BC8\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport { setStyles, on, off, removeClass, addClass } from '../libs/dom';\n\nvar Loading =\n/*#__PURE__*/\nfunction () {\n  function Loading(container, options) {\n    _classCallCheck(this, Loading);\n\n    this.container = container || document.body;\n    this.options = _objectSpread({\n      min: 20,\n      max: 70,\n      minMove: 10,\n      maxMove: 20,\n      styleId: 'Map3dLoadingStyles',\n      id: 'Map3dLoading',\n      wrapperClass: 'map3d-loading-wrapper',\n      loadingClass: 'map3d-loading',\n      animateClass: 'map3d-laoding-run',\n      content: 'Loading...'\n    }, options);\n    this.init();\n  }\n\n  _createClass(Loading, [{\n    key: \"init\",\n    value: function init() {\n      this.addStyle();\n      var _this$options = this.options,\n          id = _this$options.id,\n          loadingClass = _this$options.loadingClass,\n          content = _this$options.content,\n          wrapperClass = _this$options.wrapperClass;\n      this.el = this.container.querySelector(\"#\".concat(id));\n\n      if (!this.el) {\n        this.el = document.createElement('div');\n        this.el.innerHTML = \"\\n        <div class=\\\"\".concat(loadingClass, \"\\\">\\n          <div>\").concat(content, \"</div>\\n        </div>\\n      \");\n        addClass(this.el, wrapperClass);\n        this.el.setAttribute('id', id);\n        this.container.appendChild(this.el);\n      }\n\n      this.loadingEl = this.el.querySelector(\".\".concat(loadingClass));\n      this.animate();\n      this.lastSpan = this.loadingEl.lastElementChild;\n      this.lastSpan && on(this.lastSpan, 'animationend', this.animate.bind(this));\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.animate();\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      setStyles(this.el, {\n        opacity: 0,\n        zIndex: -1\n      });\n      removeClass(this.loadingEl, this.options.animateClass);\n      this.visible = false;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.lastSpan && off(this.lastSpan, 'animationend', this.animate.bind(this));\n      this.el.innerHTML = '';\n      this.container && this.container.removeChild(this.el);\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      var _this$options2 = this.options,\n          min = _this$options2.min,\n          max = _this$options2.max,\n          minMove = _this$options2.minMove,\n          maxMove = _this$options2.maxMove,\n          animateClass = _this$options2.animateClass,\n          content = _this$options2.content;\n      setStyles(this.el, {\n        opacity: 1,\n        zIndex: 1000\n      });\n      removeClass(this.loadingEl, animateClass);\n      this.setCSSVars(this.loadingEl, min, max, minMove, maxMove, content);\n      addClass(this.loadingEl, animateClass);\n      this.visible = true;\n    }\n  }, {\n    key: \"addStyle\",\n    value: function addStyle() {\n      var _this$options3 = this.options,\n          styleId = _this$options3.styleId,\n          loadingClass = _this$options3.loadingClass,\n          animateClass = _this$options3.animateClass,\n          wrapperClass = _this$options3.wrapperClass;\n      if (document.querySelector(\"#\".concat(styleId))) return;\n      var style = document.createElement('style'),\n          styleText = \"\\n        .\".concat(wrapperClass, \" {\\n          width: 100%;\\n          height: 100%;\\n          position: absolute;\\n          left: 50%;\\n          top: 50%;\\n          transform: translate(-50%, -50%);\\n          background-color: rgba(50, 50, 50, 0.5);\\n          padding: 10px 20px;\\n          opacity: 1;\\n          transition: all 0.3s linear;\\n        }\\n        .\").concat(loadingClass, \" {\\n          --color: #F5F9FF;\\n          --duration: 2000ms;\\n          font-family: Roboto, Arial;\\n          font-size: 32px;\\n          white-space: nowrap;\\n          user-select: none;\\n          color: var(--color);\\n          position: absolute;\\n          left: 50%;\\n          top: 50%;\\n          transform: translate(-50%, -50%);\\n        }\\n        .\").concat(loadingClass, \" span {\\n          --x: 0;\\n          --y: 0;\\n          --move-y: 0;\\n          --move-y-s: 0;\\n          --delay: 0ms;\\n          display: block;\\n          position: absolute;\\n          top: 0;\\n          left: 0;\\n          width: 1px;\\n          text-indent: calc(var(--x) * -1);\\n          overflow: hidden;\\n          transform: translate(var(--x), var(--y));\\n        }\\n        .\").concat(loadingClass, \".\").concat(animateClass, \" div {\\n          opacity: 0;\\n        }\\n        .\").concat(loadingClass, \".\").concat(animateClass, \" span {\\n          animation: move var(--duration) ease-in-out var(--delay);\\n        }\\n\\n        @keyframes move {\\n          30% {\\n            transform: translate(var(--x), var(--move-y));\\n          }\\n          82% {\\n            transform: translate(var(--x), var(--move-y-s));\\n          }\\n        }\\n      \");\n      style.textContent = styleText;\n      style.setAttribute('id', styleId);\n      document.head.append(style);\n    }\n  }, {\n    key: \"setCSSVars\",\n    value: function setCSSVars(el, min, max, minMove, maxMove, text) {\n      var width = Math.ceil(el.clientWidth);\n\n      for (var i = 1; i < width; i++) {\n        var num = Math.floor(Math.random() * (max - min + 1)) + min,\n            numMove = Math.floor(Math.random() * (maxMove - minMove + 1)) + minMove,\n            dir = i % 2 === 0 ? 1 : -1,\n            spanCurrent = el.querySelector(\"span:nth-child(\".concat(i, \")\")),\n            span = spanCurrent || document.createElement('span');\n        span.style.cssText = \"\\n        --x: \".concat(i - 1, \"px;\\n        --move-y: \").concat(num * dir, \"px;\\n        --move-y-s: \").concat((num - numMove) * dir, \"px;\\n        --delay: \").concat(i * 10, \"ms;\\n      \");\n\n        if (!spanCurrent) {\n          span.textContent = text;\n          el.appendChild(span);\n        }\n      }\n    }\n  }]);\n\n  return Loading;\n}();\n\nexport { Loading as default };",{"version":3,"sources":["D:\\工作项目\\部反诈\\src\\utils\\map3d\\components\\loading.js"],"names":["setStyles","on","off","removeClass","addClass","Loading","container","options","document","body","min","max","minMove","maxMove","styleId","id","wrapperClass","loadingClass","animateClass","content","init","addStyle","el","querySelector","createElement","innerHTML","setAttribute","appendChild","loadingEl","animate","lastSpan","lastElementChild","bind","opacity","zIndex","visible","removeChild","setCSSVars","style","styleText","textContent","head","append","text","width","Math","ceil","clientWidth","i","num","floor","random","numMove","dir","spanCurrent","span","cssText"],"mappings":"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","sourcesContent":["import {setStyles, on, off, removeClass, addClass} from '../libs/dom'\n\nexport default class Loading {\n  constructor(container, options) {\n    this.container = container || document.body\n    this.options = {\n      min: 20,\n      max: 70,\n      minMove: 10,\n      maxMove: 20,\n      styleId: 'Map3dLoadingStyles',\n      id: 'Map3dLoading',\n      wrapperClass: 'map3d-loading-wrapper',\n      loadingClass: 'map3d-loading',\n      animateClass: 'map3d-laoding-run',\n      content: 'Loading...',\n      ...options\n    }\n    this.init()\n  }\n\n  init() {\n    this.addStyle()\n    const {id, loadingClass, content, wrapperClass} = this.options\n    this.el = this.container.querySelector(`#${id}`)\n    if (!this.el) {\n      this.el = document.createElement('div')\n      this.el.innerHTML = `\n        <div class=\"${loadingClass}\">\n          <div>${content}</div>\n        </div>\n      `\n      addClass(this.el, wrapperClass)\n      this.el.setAttribute('id', id)\n      this.container.appendChild(this.el)\n    }\n    this.loadingEl = this.el.querySelector(`.${loadingClass}`)\n\n    this.animate()\n    this.lastSpan = this.loadingEl.lastElementChild\n    this.lastSpan && on(this.lastSpan, 'animationend', this.animate.bind(this))\n  }\n\n  show() {\n    this.animate()\n  }\n\n  hide() {\n    setStyles(this.el, {\n      opacity: 0,\n      zIndex: -1\n    })\n    removeClass(this.loadingEl, this.options.animateClass)\n    this.visible = false\n  }\n\n  destroy() {\n    this.lastSpan && off(this.lastSpan, 'animationend', this.animate.bind(this))\n    this.el.innerHTML = ''\n    this.container && this.container.removeChild(this.el)\n  }\n\n  animate() {\n    const {min, max, minMove, maxMove, animateClass, content} = this.options\n    setStyles(this.el, {\n      opacity: 1,\n      zIndex: 1000\n    })\n    removeClass(this.loadingEl, animateClass)\n    this.setCSSVars(this.loadingEl, min, max, minMove, maxMove, content)\n    addClass(this.loadingEl, animateClass)\n    this.visible = true\n  }\n\n  addStyle() {\n    const {styleId, loadingClass, animateClass, wrapperClass} = this.options\n    if (document.querySelector(`#${styleId}`)) return\n    const style = document.createElement('style'),\n      styleText = `\n        .${wrapperClass} {\n          width: 100%;\n          height: 100%;\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n          background-color: rgba(50, 50, 50, 0.5);\n          padding: 10px 20px;\n          opacity: 1;\n          transition: all 0.3s linear;\n        }\n        .${loadingClass} {\n          --color: #F5F9FF;\n          --duration: 2000ms;\n          font-family: Roboto, Arial;\n          font-size: 32px;\n          white-space: nowrap;\n          user-select: none;\n          color: var(--color);\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .${loadingClass} span {\n          --x: 0;\n          --y: 0;\n          --move-y: 0;\n          --move-y-s: 0;\n          --delay: 0ms;\n          display: block;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 1px;\n          text-indent: calc(var(--x) * -1);\n          overflow: hidden;\n          transform: translate(var(--x), var(--y));\n        }\n        .${loadingClass}.${animateClass} div {\n          opacity: 0;\n        }\n        .${loadingClass}.${animateClass} span {\n          animation: move var(--duration) ease-in-out var(--delay);\n        }\n\n        @keyframes move {\n          30% {\n            transform: translate(var(--x), var(--move-y));\n          }\n          82% {\n            transform: translate(var(--x), var(--move-y-s));\n          }\n        }\n      `\n    style.textContent = styleText\n    style.setAttribute('id', styleId)\n    document.head.append(style)\n  }\n\n  setCSSVars(el, min, max, minMove, maxMove, text) {\n    const width = Math.ceil(el.clientWidth)\n    for (let i = 1; i < width; i++) {\n      const num = Math.floor(Math.random() * (max - min + 1)) + min,\n        numMove = Math.floor(Math.random() * (maxMove - minMove + 1)) + minMove,\n        dir = i % 2 === 0 ? 1 : -1,\n        spanCurrent = el.querySelector(`span:nth-child(${i})`),\n        span = spanCurrent || document.createElement('span')\n      span.style.cssText = `\n        --x: ${i - 1}px;\n        --move-y: ${num * dir}px;\n        --move-y-s: ${(num - numMove) * dir}px;\n        --delay: ${i * 10}ms;\n      `\n      if (!spanCurrent) {\n        span.textContent = text\n        el.appendChild(span)\n      }\n    }\n  }\n}\n"]}]}